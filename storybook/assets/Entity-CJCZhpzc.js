import{r as t}from"./index-uubelm5h.js";import{u as h,l as te,b as M,m as re}from"./Globe-CyzGI6Fn.js";const I=t.createContext({addEntity:()=>{},removeEntity:()=>{},addLabel:()=>{},removeLabel:()=>{},addBillboard:()=>{},removeBillboard:()=>{},addGeoObject:()=>{},removeGeoObject:()=>{},addGeometry:()=>{},removeGeometry:()=>{},addPolyline:()=>{},removePolyline:()=>{},addStrip:()=>{},removeStrip:()=>{}}),ne=({visibility:i,children:y,name:f,...l})=>{const{globe:c}=h(),o=t.useRef(null),[s,b]=t.useState([]),u=t.useRef(new Set);t.useEffect(()=>{typeof i=="boolean"&&o.current&&o.current.setVisibility(i)},[i]),t.useEffect(()=>{var e,n;if(c)return o.current=new te(f,l),c.planet.addLayer(o.current),l.onDraw&&((e=o.current)==null||e.events.on("draw",l.onDraw)),l.onMouseEnter&&((n=o.current)==null||n.events.on("mouseenter",l.onMouseEnter)),()=>{var m,d;o.current&&(c.planet.removeLayer(o.current),l.onDraw&&((m=o.current)==null||m.events.off("draw",l.onDraw)),l.onMouseEnter&&((d=o.current)==null||d.events.off("mouseenter",l.onMouseEnter)))}},[c]),t.useEffect(()=>{if(o.current&&s.length>0){const e=s.filter(n=>!u.current.has(n));o.current.addEntities(e),e.forEach(n=>u.current.add(n))}},[s]);const p=t.useCallback(e=>{b(n=>n.includes(e)?n:[...n,e])},[]),E=t.useCallback(async e=>{b(n=>n.filter(m=>m!==e)),o.current&&(await o.current.removeEntity(e),u.current.delete(e))},[]),v=t.useCallback((e,n)=>{e.setBillboard(n)},[]),C=t.useCallback(e=>{var n;(n=e.billboard)==null||n.remove()},[]),G=t.useCallback((e,n)=>{e.setGeoObject(n)},[]),k=t.useCallback(e=>{var n;(n=e.geoObject)==null||n.remove()},[]),L=t.useCallback((e,n)=>{e.setLabel(n)},[]),S=t.useCallback(e=>{var n;(n=e.label)==null||n.remove()},[]),w=t.useCallback((e,n)=>{e.setGeometry(n)},[]),j=t.useCallback(e=>{var n;(n=e.geometry)==null||n.remove()},[]),P=t.useCallback((e,n)=>{e.setPolyline(n)},[]),O=t.useCallback(e=>{var n;(n=e.polyline)==null||n.remove()},[]),R=t.useCallback((e,n)=>{e.setStrip(n)},[]),B=t.useCallback(e=>{var n;(n=e.strip)==null||n.remove()},[]);return t.createElement(I.Provider,{value:{addEntity:p,removeEntity:E,addBillboard:v,removeBillboard:C,addGeoObject:G,removeGeoObject:k,addLabel:L,removeLabel:S,addGeometry:w,removeGeometry:j,addPolyline:P,removePolyline:O,addStrip:R,removeStrip:B}},y)};ne.__docgenInfo={description:"",methods:[],displayName:"Vector",props:{children:{required:!1,tsType:{name:"union",raw:"EntityElement | EntityElement[]",elements:[{name:"ReactReactElement",raw:"React.ReactElement<{ type: typeof Entity }>",elements:[{name:"signature",type:"object",raw:"{ type: typeof Entity }",signature:{properties:[{key:"type",value:{name:"Entity",required:!0}}]}}]},{name:"Array",elements:[{name:"ReactReactElement",raw:"React.ReactElement<{ type: typeof Entity }>",elements:[{name:"signature",type:"object",raw:"{ type: typeof Entity }",signature:{properties:[{key:"type",value:{name:"Entity",required:!0}}]}}]}],raw:"EntityElement[]"}]},description:""},name:{required:!0,tsType:{name:"string"},description:""},onMouseEnter:{required:!1,tsType:{name:"EventCallback"},description:""},onDraw:{required:!1,tsType:{name:"EventCallback"},description:""}},composes:["IVectorParams"]};const oe=({visibility:i,lon:y,lat:f,alt:l,lonlat:c,name:o,children:s,...b})=>{const{globe:u}=h(),{addEntity:p,removeEntity:E,addBillboard:v,removeBillboard:C,addGeoObject:G,removeGeoObject:k,addLabel:L,removeLabel:S,addGeometry:w,removeGeometry:j,addPolyline:P,removePolyline:O,addStrip:R,removeStrip:B}=t.useContext(I),e=t.useRef(null),[n,m]=t.useState(null),[d,x]=t.useState(null),[g,F]=t.useState(null),[_,N]=t.useState(null),[q,V]=t.useState(null),[T,D]=t.useState(null);t.useEffect(()=>{var r;c&&(c instanceof M||(c=M.createFromArray(c)),(r=e.current)==null||r.setLonLat(c))},[c,n]),t.useEffect(()=>{var r;o&&((r=e.current)==null||r.setLonLat2(y,f,l))},[y,f,l]),t.useEffect(()=>{var r;typeof i=="boolean"&&e.current&&((r=e.current)==null||r.setVisibility(i))},[i]),t.useEffect(()=>{if(u)return e.current=new re({lonlat:c,name:o,...b}),p(e.current),()=>{u&&e.current&&E(e.current)}},[u,p,E]),t.useEffect(()=>{var r,a;n&&!((r=e.current)!=null&&r.billboard)&&((a=e.current)==null||a.setBillboard(n))},[n]),t.useEffect(()=>{var r,a;d&&!((r=e.current)!=null&&r.geoObject)&&((a=e.current)==null||a.setGeoObject(d))},[d]),t.useEffect(()=>{var r,a;g&&!((r=e.current)!=null&&r.label)&&((a=e.current)==null||a.setLabel(g))},[g]),t.useEffect(()=>{var r,a;_&&!((r=e.current)!=null&&r.geometry)&&((a=e.current)==null||a.setGeometry(_))},[_]),t.useEffect(()=>{var r,a;q&&!((r=e.current)!=null&&r.polyline)&&((a=e.current)==null||a.setPolyline(q))},[q]),t.useEffect(()=>{var r,a;T&&!((r=e.current)!=null&&r.strip)&&((a=e.current)==null||a.setStrip(T))},[T]);const $=t.useCallback(r=>{m(r),e.current&&v(e.current,r)},[v]),z=t.useCallback(()=>{e.current&&C(e.current),m(null)},[C]),H=t.useCallback(r=>{x(r),e.current&&G(e.current,r)},[G]),J=t.useCallback(()=>{e.current&&k(e.current),x(null)},[k]),K=t.useCallback(r=>{F(r),e.current&&L(e.current,r)},[L]),Q=t.useCallback(()=>{e.current&&S(e.current),x(null)},[S]),U=t.useCallback(r=>{N(r),e.current&&w(e.current,r)},[w]),W=t.useCallback(()=>{e.current&&j(e.current),x(null)},[j]),X=t.useCallback(r=>{V(r),e.current&&P(e.current,r)},[P]),Y=t.useCallback(()=>{e.current&&O(e.current),V(null)},[O]),Z=t.useCallback(r=>{D(r),e.current&&R(e.current,r)},[R]),ee=t.useCallback(()=>{e.current&&B(e.current),D(null)},[B]),A={_addGeometry:U,_removeGeometry:W,_addLabel:K,_removeLabel:Q,_addBillboard:$,_removeBillboard:z,_addGeoObject:H,_removeGeoObject:J,_addPolyline:X,_removePolyline:Y,_addStrip:Z,_removeStrip:ee};return s?t.createElement(t.Fragment,null,Array.isArray(s)?s.map(r=>t.isValidElement(r)?t.cloneElement(r,A):r):t.isValidElement(s)?t.cloneElement(s,A):s):null};oe.__docgenInfo={description:"",methods:[],displayName:"Entity",props:{children:{required:!1,tsType:{name:"union",raw:"EntityChildElement | EntityChildElement[]",elements:[{name:"ReactReactElement",raw:`React.ReactElement<
    typeof Billboard |
    typeof GeoObject |
    typeof Label |
    typeof Polyline |
    typeof Strip |
    typeof Geometry
>`,elements:[{name:"union",raw:`typeof Billboard |
typeof GeoObject |
typeof Label |
typeof Polyline |
typeof Strip |
typeof Geometry`,elements:[{name:"Billboard"},{name:"GeoObject"},{name:"Label"},{name:"Polyline"},{name:"Strip"},{name:"Geometry"}]}]},{name:"Array",elements:[{name:"ReactReactElement",raw:`React.ReactElement<
    typeof Billboard |
    typeof GeoObject |
    typeof Label |
    typeof Polyline |
    typeof Strip |
    typeof Geometry
>`,elements:[{name:"union",raw:`typeof Billboard |
typeof GeoObject |
typeof Label |
typeof Polyline |
typeof Strip |
typeof Geometry`,elements:[{name:"Billboard"},{name:"GeoObject"},{name:"Label"},{name:"Polyline"},{name:"Strip"},{name:"Geometry"}]}]}],raw:"EntityChildElement[]"}]},description:""},visibility:{required:!1,tsType:{name:"boolean"},description:""},lon:{required:!0,tsType:{name:"number"},description:""},lat:{required:!0,tsType:{name:"number"},description:""},alt:{required:!0,tsType:{name:"number"},description:""},onDraw:{required:!1,tsType:{name:"EventCallback"},description:""}},composes:["IEntityParams"]};export{oe as E,ne as V};
