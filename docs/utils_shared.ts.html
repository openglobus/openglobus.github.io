<!DOCTYPE html><html lang="en" style="font-size:16px"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" href="https://openglobus.github.io/favicon.ico"><title>Source: utils/shared.ts</title><!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]--><script src="scripts/third-party/hljs.js" defer="defer"></script><script src="scripts/third-party/hljs-line-num.js" defer="defer"></script><script src="scripts/third-party/popper.js" defer="defer"></script><script src="scripts/third-party/tippy.js" defer="defer"></script><script src="scripts/third-party/tocbot.min.js"></script><script>var baseURL="/",locationPathname="";baseURL=(baseURL=(baseURL="https://openglobus.github.io/docs/").replace(/https?:\/\//i,"")).substr(baseURL.indexOf("/"))</script><link rel="stylesheet" href="styles/clean-jsdoc-theme.min.css"><svg aria-hidden="true" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="display:none"><defs><symbol id="copy-icon" viewbox="0 0 488.3 488.3"><g><path d="M314.25,85.4h-227c-21.3,0-38.6,17.3-38.6,38.6v325.7c0,21.3,17.3,38.6,38.6,38.6h227c21.3,0,38.6-17.3,38.6-38.6V124    C352.75,102.7,335.45,85.4,314.25,85.4z M325.75,449.6c0,6.4-5.2,11.6-11.6,11.6h-227c-6.4,0-11.6-5.2-11.6-11.6V124    c0-6.4,5.2-11.6,11.6-11.6h227c6.4,0,11.6,5.2,11.6,11.6V449.6z"/><path d="M401.05,0h-227c-21.3,0-38.6,17.3-38.6,38.6c0,7.5,6,13.5,13.5,13.5s13.5-6,13.5-13.5c0-6.4,5.2-11.6,11.6-11.6h227    c6.4,0,11.6,5.2,11.6,11.6v325.7c0,6.4-5.2,11.6-11.6,11.6c-7.5,0-13.5,6-13.5,13.5s6,13.5,13.5,13.5c21.3,0,38.6-17.3,38.6-38.6    V38.6C439.65,17.3,422.35,0,401.05,0z"/></g></symbol><symbol id="search-icon" viewBox="0 0 512 512"><g><g><path d="M225.474,0C101.151,0,0,101.151,0,225.474c0,124.33,101.151,225.474,225.474,225.474    c124.33,0,225.474-101.144,225.474-225.474C450.948,101.151,349.804,0,225.474,0z M225.474,409.323    c-101.373,0-183.848-82.475-183.848-183.848S124.101,41.626,225.474,41.626s183.848,82.475,183.848,183.848    S326.847,409.323,225.474,409.323z"/></g></g><g><g><path d="M505.902,476.472L386.574,357.144c-8.131-8.131-21.299-8.131-29.43,0c-8.131,8.124-8.131,21.306,0,29.43l119.328,119.328    c4.065,4.065,9.387,6.098,14.715,6.098c5.321,0,10.649-2.033,14.715-6.098C514.033,497.778,514.033,484.596,505.902,476.472z"/></g></g></symbol><symbol id="font-size-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M11.246 15H4.754l-2 5H.6L7 4h2l6.4 16h-2.154l-2-5zm-.8-2L8 6.885 5.554 13h4.892zM21 12.535V12h2v8h-2v-.535a4 4 0 1 1 0-6.93zM19 18a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"/></symbol><symbol id="add-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M11 11V5h2v6h6v2h-6v6h-2v-6H5v-2z"/></symbol><symbol id="minus-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M5 11h14v2H5z"/></symbol><symbol id="dark-theme-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M10 7a7 7 0 0 0 12 4.9v.1c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2h.1A6.979 6.979 0 0 0 10 7zm-6 5a8 8 0 0 0 15.062 3.762A9 9 0 0 1 8.238 4.938 7.999 7.999 0 0 0 4 12z"/></symbol><symbol id="light-theme-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M12 18a6 6 0 1 1 0-12 6 6 0 0 1 0 12zm0-2a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM11 1h2v3h-2V1zm0 19h2v3h-2v-3zM3.515 4.929l1.414-1.414L7.05 5.636 5.636 7.05 3.515 4.93zM16.95 18.364l1.414-1.414 2.121 2.121-1.414 1.414-2.121-2.121zm2.121-14.85l1.414 1.415-2.121 2.121-1.414-1.414 2.121-2.121zM5.636 16.95l1.414 1.414-2.121 2.121-1.414-1.414 2.121-2.121zM23 11v2h-3v-2h3zM4 11v2H1v-2h3z"/></symbol><symbol id="reset-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M18.537 19.567A9.961 9.961 0 0 1 12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10c0 2.136-.67 4.116-1.81 5.74L17 12h3a8 8 0 1 0-2.46 5.772l.997 1.795z"/></symbol><symbol id="down-icon" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.7803 6.21967C13.0732 6.51256 13.0732 6.98744 12.7803 7.28033L8.53033 11.5303C8.23744 11.8232 7.76256 11.8232 7.46967 11.5303L3.21967 7.28033C2.92678 6.98744 2.92678 6.51256 3.21967 6.21967C3.51256 5.92678 3.98744 5.92678 4.28033 6.21967L8 9.93934L11.7197 6.21967C12.0126 5.92678 12.4874 5.92678 12.7803 6.21967Z"></path></symbol><symbol id="codepen-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M16.5 13.202L13 15.535v3.596L19.197 15 16.5 13.202zM14.697 12L12 10.202 9.303 12 12 13.798 14.697 12zM20 10.869L18.303 12 20 13.131V10.87zM19.197 9L13 4.869v3.596l3.5 2.333L19.197 9zM7.5 10.798L11 8.465V4.869L4.803 9 7.5 10.798zM4.803 15L11 19.131v-3.596l-3.5-2.333L4.803 15zM4 13.131L5.697 12 4 10.869v2.262zM2 9a1 1 0 0 1 .445-.832l9-6a1 1 0 0 1 1.11 0l9 6A1 1 0 0 1 22 9v6a1 1 0 0 1-.445.832l-9 6a1 1 0 0 1-1.11 0l-9-6A1 1 0 0 1 2 15V9z"/></symbol><symbol id="close-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M12 10.586l4.95-4.95 1.414 1.414-4.95 4.95 4.95 4.95-1.414 1.414-4.95-4.95-4.95 4.95-1.414-1.414 4.95-4.95-4.95-4.95L7.05 5.636z"/></symbol><symbol id="menu-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M3 4h18v2H3V4zm0 7h18v2H3v-2zm0 7h18v2H3v-2z"/></symbol></defs></svg></head><body data-theme="dark"><div class="sidebar-container"><div class="sidebar" id="sidebar"><a href="/" class="sidebar-title sidebar-title-anchor">OpenGlobus</a><div class="sidebar-items-container"><div class="sidebar-section-title with-arrow" data-isopen="false" id="sidebar-modules"><div>Modules</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="module-og_math_coder.html">og/math/coder</a></div><div class="sidebar-section-children"><a href="module-og_proj_EPSG3857.html">og/proj/EPSG3857</a></div><div class="sidebar-section-children"><a href="module-og_proj_EPSG4326.html">og/proj/EPSG4326</a></div><div class="sidebar-section-children"><a href="module-og_proj_equi.html">og/proj/equi</a></div><div class="sidebar-section-children"><a href="module-og_segment_SegmentHelper.html">og/segment/SegmentHelper</a></div><div class="sidebar-section-children"><a href="module-og_utils_earcut.html">og/utils/earcut</a></div><div class="sidebar-section-children"><a href="module-og_utils_shared.html">og/utils/shared</a></div><div class="sidebar-section-children"><a href="module-og_webgl_types.html">og/webgl/types</a></div><div class="sidebar-section-children"><a href="module-og_webgl_variableHandlers.html">og/webgl/variableHandlers</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="sidebar-classes"><div>Classes</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="AtmosphereConfig.html">AtmosphereConfig</a></div><div class="sidebar-section-children"><a href="BaseBillboard.html">BaseBillboard</a></div><div class="sidebar-section-children"><a href="BaseBillboardHandler.html">BaseBillboardHandler</a></div><div class="sidebar-section-children"><a href="BaseGeoImage.html">BaseGeoImage</a></div><div class="sidebar-section-children"><a href="BaseNode.html">BaseNode</a></div><div class="sidebar-section-children"><a href="Billboard.html">Billboard</a></div><div class="sidebar-section-children"><a href="BillboardHandler.html">BillboardHandler</a></div><div class="sidebar-section-children"><a href="Box.html">Box</a></div><div class="sidebar-section-children"><a href="Camera.html">Camera</a></div><div class="sidebar-section-children"><a href="CanvasTiles.html">CanvasTiles</a></div><div class="sidebar-section-children"><a href="Clock.html">Clock</a></div><div class="sidebar-section-children"><a href="CompassButton.html">CompassButton</a></div><div class="sidebar-section-children"><a href="Cons.html">Cons</a></div><div class="sidebar-section-children"><a href="Control.html">Control</a></div><div class="sidebar-section-children"><a href="DrawingSwitcher.html">DrawingSwitcher</a></div><div class="sidebar-section-children"><a href="EarthCoordinates.html">EarthCoordinates</a></div><div class="sidebar-section-children"><a href="ElevationProfile.html">ElevationProfile</a></div><div class="sidebar-section-children"><a href="Ellipsoid.html">Ellipsoid</a></div><div class="sidebar-section-children"><a href="EmptyTerrain.html">EmptyTerrain</a></div><div class="sidebar-section-children"><a href="Entity.html">Entity</a></div><div class="sidebar-section-children"><a href="EntityCollection.html">EntityCollection</a></div><div class="sidebar-section-children"><a href="EntityCollectionNode.html">EntityCollectionNode</a></div><div class="sidebar-section-children"><a href="Events.html">Events</a></div><div class="sidebar-section-children"><a href="Extent.html">Extent</a></div><div class="sidebar-section-children"><a href="Framebuffer.html">Framebuffer</a></div><div class="sidebar-section-children"><a href="Frustum.html">Frustum</a></div><div class="sidebar-section-children"><a href="GeoImage.html">GeoImage</a></div><div class="sidebar-section-children"><a href="GeoObject.html">GeoObject</a></div><div class="sidebar-section-children"><a href="GeoVideo.html">GeoVideo</a></div><div class="sidebar-section-children"><a href="Globe.html">Globe</a></div><div class="sidebar-section-children"><a href="GlobusTerrain.html">GlobusTerrain</a></div><div class="sidebar-section-children"><a href="Handler.html">Handler</a></div><div class="sidebar-section-children"><a href="ImageCanvas.html">ImageCanvas</a></div><div class="sidebar-section-children"><a href="KML.html">KML</a></div><div class="sidebar-section-children"><a href="KeyboardNavigation.html">KeyboardNavigation</a></div><div class="sidebar-section-children"><a href="Label.html">Label</a></div><div class="sidebar-section-children"><a href="Layer.html">Layer</a></div><div class="sidebar-section-children"><a href="LayerSwitcher.html">LayerSwitcher</a></div><div class="sidebar-section-children"><a href="Lighting.html">Lighting</a></div><div class="sidebar-section-children"><a href="Line3.html">Line3</a></div><div class="sidebar-section-children"><a href="LonLat.html">LonLat</a></div><div class="sidebar-section-children"><a href="global.html#Mat3">Mat3</a></div><div class="sidebar-section-children"><a href="global.html#Mat4">Mat4</a></div><div class="sidebar-section-children"><a href="Material.html">Material</a></div><div class="sidebar-section-children"><a href="MouseNavigation.html">MouseNavigation</a></div><div class="sidebar-section-children"><a href="Multisample.html">Multisample</a></div><div class="sidebar-section-children"><a href="Node.html">Node</a></div><div class="sidebar-section-children"><a href="OldMouseNavigation.html">OldMouseNavigation</a></div><div class="sidebar-section-children"><a href="Plane.html">Plane</a></div><div class="sidebar-section-children"><a href="Planet.html">Planet</a></div><div class="sidebar-section-children"><a href="PlanetCamera.html">PlanetCamera</a></div><div class="sidebar-section-children"><a href="PointCloud.html">PointCloud</a></div><div class="sidebar-section-children"><a href="Polyline.html">Polyline</a></div><div class="sidebar-section-children"><a href="Program.html">Program</a></div><div class="sidebar-section-children"><a href="ProgramController.html">ProgramController</a></div><div class="sidebar-section-children"><a href="global.html#Quat">Quat</a></div><div class="sidebar-section-children"><a href="Ray.html">Ray</a></div><div class="sidebar-section-children"><a href="Ray.html">Ray</a></div><div class="sidebar-section-children"><a href="Rectangle.html">Rectangle</a></div><div class="sidebar-section-children"><a href="RenderNode.html">RenderNode</a></div><div class="sidebar-section-children"><a href="Renderer.html">Renderer</a></div><div class="sidebar-section-children"><a href="RendererEvents.html">RendererEvents</a></div><div class="sidebar-section-children"><a href="RgbTerrain.html">RgbTerrain</a></div><div class="sidebar-section-children"><a href="RulerSwitcher.html">RulerSwitcher</a></div><div class="sidebar-section-children"><a href="ScaleControl.html">ScaleControl</a></div><div class="sidebar-section-children"><a href="Segment.html">Segment</a></div><div class="sidebar-section-children"><a href="Segment.html">Segment</a></div><div class="sidebar-section-children"><a href="SegmentBoundVisualization.html">SegmentBoundVisualization</a></div><div class="sidebar-section-children"><a href="SegmentLonLat.html">SegmentLonLat</a></div><div class="sidebar-section-children"><a href="Selection.html">Selection</a></div><div class="sidebar-section-children"><a href="ShowFps.html">ShowFps</a></div><div class="sidebar-section-children"><a href="SimpleNavigation.html">SimpleNavigation</a></div><div class="sidebar-section-children"><a href="Sphere.html">Sphere</a></div><div class="sidebar-section-children">Stack.&lt;<a href="global.html#T">T</a>></div><div class="sidebar-section-children"><a href="Strip.html">Strip</a></div><div class="sidebar-section-children"><a href="Sun.html">Sun</a></div><div class="sidebar-section-children"><a href="TextureAtlas.html">TextureAtlas</a></div><div class="sidebar-section-children"><a href="TextureAtlas.html">TextureAtlas</a></div><div class="sidebar-section-children"><a href="ToggleWireframe.html">ToggleWireframe</a></div><div class="sidebar-section-children"><a href="TouchNavigation.html">TouchNavigation</a></div><div class="sidebar-section-children"><a href="global.html#Vec2">Vec2</a></div><div class="sidebar-section-children"><a href="global.html#Vec3">Vec3</a></div><div class="sidebar-section-children"><a href="global.html#Vec4">Vec4</a></div><div class="sidebar-section-children"><a href="Vector.html">Vector</a></div><div class="sidebar-section-children"><a href="WMS.html">WMS</a></div><div class="sidebar-section-children"><a href="XYZ.html">XYZ</a></div><div class="sidebar-section-children"><a href="ZoomControl.html">ZoomControl</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="sidebar-events"><div>Events</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="EntityCollection.html#event:add">add</a></div><div class="sidebar-section-children"><a href="EntityCollection.html#event:doubletouch">doubletouch</a></div><div class="sidebar-section-children"><a href="EntityCollection.html#event:draw">draw</a></div><div class="sidebar-section-children"><a href="EntityCollection.html#event:drawend">drawend</a></div><div class="sidebar-section-children"><a href="EntityCollection.html#event:entityadd">entityadd</a></div><div class="sidebar-section-children"><a href="EntityCollection.html#event:entityremove">entityremove</a></div><div class="sidebar-section-children"><a href="EntityCollection.html#event:lclick">lclick</a></div><div class="sidebar-section-children"><a href="EntityCollection.html#event:ldblclick">ldblclick</a></div><div class="sidebar-section-children"><a href="EntityCollection.html#event:ldown">ldown</a></div><div class="sidebar-section-children"><a href="EntityCollection.html#event:lhold">lhold</a></div><div class="sidebar-section-children"><a href="EntityCollection.html#event:lup">lup</a></div><div class="sidebar-section-children"><a href="EntityCollection.html#event:mclick">mclick</a></div><div class="sidebar-section-children"><a href="EntityCollection.html#event:mdblclick">mdblclick</a></div><div class="sidebar-section-children"><a href="EntityCollection.html#event:mdown">mdown</a></div><div class="sidebar-section-children"><a href="EntityCollection.html#event:mhold">mhold</a></div><div class="sidebar-section-children"><a href="EntityCollection.html#event:mouseenter">mouseenter</a></div><div class="sidebar-section-children"><a href="EntityCollection.html#event:mouseleave">mouseleave</a></div><div class="sidebar-section-children"><a href="EntityCollection.html#event:mousemove">mousemove</a></div><div class="sidebar-section-children"><a href="EntityCollection.html#event:mousewheel">mousewheel</a></div><div class="sidebar-section-children"><a href="EntityCollection.html#event:mup">mup</a></div><div class="sidebar-section-children"><a href="EntityCollection.html#event:rclick">rclick</a></div><div class="sidebar-section-children"><a href="EntityCollection.html#event:rdblclick">rdblclick</a></div><div class="sidebar-section-children"><a href="EntityCollection.html#event:rdown">rdown</a></div><div class="sidebar-section-children"><a href="EntityCollection.html#event:remove">remove</a></div><div class="sidebar-section-children"><a href="EntityCollection.html#event:rhold">rhold</a></div><div class="sidebar-section-children"><a href="EntityCollection.html#event:rup">rup</a></div><div class="sidebar-section-children"><a href="EntityCollection.html#event:touchend">touchend</a></div><div class="sidebar-section-children"><a href="EntityCollection.html#event:touchenter">touchenter</a></div><div class="sidebar-section-children"><a href="EntityCollection.html#event:touchleave">touchleave</a></div><div class="sidebar-section-children"><a href="EntityCollection.html#event:touchmove">touchmove</a></div><div class="sidebar-section-children"><a href="EntityCollection.html#event:touchstart">touchstart</a></div><div class="sidebar-section-children"><a href="EntityCollection.html#event:visibilitychange">visibilitychange</a></div><div class="sidebar-section-children"><a href="EventsHandler_BaseGeoImageEventsList_.html#event:loadend">loadend</a></div><div class="sidebar-section-children"><a href="EventsHandler_VectorEventsList_.html#event:draw">draw</a></div><div class="sidebar-section-children"><a href="EventsHandler_VectorEventsList_.html#event:entityadd">entityadd</a></div><div class="sidebar-section-children"><a href="EventsHandler_VectorEventsList_.html#event:entityremove">entityremove</a></div><div class="sidebar-section-children"><a href="global.html#event:#load">#load</a></div><div class="sidebar-section-children"><a href="global.html#event:#loadend">#loadend</a></div><div class="sidebar-section-children"><a href="og.Camera.html#event:flyend">flyend</a></div><div class="sidebar-section-children"><a href="og.Camera.html#event:flystart">flystart</a></div><div class="sidebar-section-children"><a href="og.Camera.html#event:flystop">flystop</a></div><div class="sidebar-section-children"><a href="og.Camera.html#event:moveend">moveend</a></div><div class="sidebar-section-children"><a href="og.Camera.html#event:viewchange">viewchange</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:add">add</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:doubletouch">doubletouch</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:lclick">lclick</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:ldblclick">ldblclick</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:ldown">ldown</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:lhold">lhold</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:lup">lup</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:mclick">mclick</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:mdblclick">mdblclick</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:mdown">mdown</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:mhold">mhold</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:mouseenter">mouseenter</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:mouseenter">mouseenter</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:mousemove">mousemove</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:mousewheel">mousewheel</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:mup">mup</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:rclick">rclick</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:rdblclick">rdblclick</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:rdown">rdown</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:remove">remove</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:rhold">rhold</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:rup">rup</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:touchend">touchend</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:touchenter">touchenter</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:touchleave">touchleave</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:touchmove">touchmove</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:touchstart">touchstart</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:visibilitychange">visibilitychange</a></div><div class="sidebar-section-children"><a href="og.MouseNavigation.html#event:drag">drag</a></div><div class="sidebar-section-children"><a href="og.MouseNavigation.html#event:rotate">rotate</a></div><div class="sidebar-section-children"><a href="og.MouseNavigation.html#event:zoom">zoom</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:doubletouch">doubletouch</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:draw">draw</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:drawtransparent">drawtransparent</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:lclick">lclick</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:ldblclick">ldblclick</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:ldown">ldown</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:lhold">lhold</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:lup">lup</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:mclick">mclick</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:mdblclick">mdblclick</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:mdown">mdown</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:mhold">mhold</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:mouseenter">mouseenter</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:mouseleave">mouseleave</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:mousemove">mousemove</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:mousestop">mousestop</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:mousewheel">mousewheel</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:mup">mup</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:postdraw">postdraw</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:rclick">rclick</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:rdblclick">rdblclick</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:rdown">rdown</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:resize">resize</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:resizeend">resizeend</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:rhold">rhold</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:rup">rup</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:touchcancel">touchcancel</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:touchend">touchend</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:touchenter">touchenter</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:touchleave">touchleave</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:touchmove">touchmove</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:touchstart">touchstart</a></div><div class="sidebar-section-children"><a href="og.TouchNavigation.html#event:doubletapzoom">doubletapzoom</a></div><div class="sidebar-section-children"><a href="og.TouchNavigation.html#event:drag">drag</a></div><div class="sidebar-section-children"><a href="og.TouchNavigation.html#event:rotate">rotate</a></div><div class="sidebar-section-children"><a href="og.layer.CanvasTiles.html#event:load">load</a></div><div class="sidebar-section-children"><a href="og.layer.CanvasTiles.html#event:loadend">loadend</a></div><div class="sidebar-section-children"><a href="og.scene.Planet.html#event:baselayerchange">baselayerchange</a></div><div class="sidebar-section-children"><a href="og.scene.Planet.html#event:draw">draw</a></div><div class="sidebar-section-children"><a href="og.scene.Planet.html#event:layeradd">layeradd</a></div><div class="sidebar-section-children"><a href="og.scene.Planet.html#event:layerremove">layerremove</a></div><div class="sidebar-section-children"><a href="og.scene.Planet.html#event:layervisibilitychange">layervisibilitychange</a></div><div class="sidebar-section-children"><a href="og.scene.Planet.html#event:rendercompleted">rendercompleted</a></div><div class="sidebar-section-children"><a href="og.scene.Planet.html#event:terraincompleted">terraincompleted</a></div><div class="sidebar-section-children"><a href="og.scene.Planet.html#event:terraincompleted">terraincompleted</a></div><div class="sidebar-section-children"><a href="og.terrain.GlobusTerrain.html#event:load">load</a></div><div class="sidebar-section-children"><a href="og.terrain.GlobusTerrain.html#event:loadend">loadend</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="sidebar-global"><div>Global</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="global.html#ARCSECONDS_TO_RADIANS">ARCSECONDS_TO_RADIANS</a></div><div class="sidebar-section-children"><a href="global.html#AU_TO_METERS">AU_TO_METERS</a></div><div class="sidebar-section-children"><a href="global.html#COMSIDE">COMSIDE</a></div><div class="sidebar-section-children"><a href="global.html#DAYS_PER_JULIAN_CENTURY">DAYS_PER_JULIAN_CENTURY</a></div><div class="sidebar-section-children"><a href="global.html#DAYS_PER_JULIAN_YEAR">DAYS_PER_JULIAN_YEAR</a></div><div class="sidebar-section-children"><a href="global.html#DEFAULT_MAX_NODES">DEFAULT_MAX_NODES</a></div><div class="sidebar-section-children"><a href="global.html#DEG2RAD">DEG2RAD</a></div><div class="sidebar-section-children"><a href="global.html#DEGREES">DEGREES</a></div><div class="sidebar-section-children"><a href="global.html#DEGREES_DOUBLE">DEGREES_DOUBLE</a></div><div class="sidebar-section-children"><a href="global.html#DEGREES_TO_HOURS">DEGREES_TO_HOURS</a></div><div class="sidebar-section-children"><a href="global.html#DateToTAI">DateToTAI</a></div><div class="sidebar-section-children"><a href="global.html#DateToUTC">DateToUTC</a></div><div class="sidebar-section-children"><a href="global.html#EARTH_GRAVITATIONAL_PARAMETER">EARTH_GRAVITATIONAL_PARAMETER</a></div><div class="sidebar-section-children"><a href="global.html#ExtentBoundingBox">ExtentBoundingBox</a></div><div class="sidebar-section-children"><a href="global.html#HOURS_PER_DAY">HOURS_PER_DAY</a></div><div class="sidebar-section-children"><a href="global.html#HOURS_TO_DEGREES">HOURS_TO_DEGREES</a></div><div class="sidebar-section-children"><a href="global.html#HOURS_TO_RADIANS">HOURS_TO_RADIANS</a></div><div class="sidebar-section-children"><a href="global.html#HandlerEventType">HandlerEventType</a></div><div class="sidebar-section-children"><a href="global.html#IEntityParams">IEntityParams</a></div><div class="sidebar-section-children"><a href="global.html#IGeoObjectParams">IGeoObjectParams</a></div><div class="sidebar-section-children"><a href="global.html#J2000">J2000</a></div><div class="sidebar-section-children"><a href="global.html#J2000_OBLIQUITY">J2000_OBLIQUITY</a></div><div class="sidebar-section-children"><a href="global.html#LOG2">LOG2</a></div><div class="sidebar-section-children"><a href="global.html#MAX">MAX</a></div><div class="sidebar-section-children"><a href="global.html#MAX32">MAX32</a></div><div class="sidebar-section-children"><a href="global.html#MAX_LAT">MAX_LAT</a></div><div class="sidebar-section-children"><a href="global.html#METERS_PER_UNIT">METERS_PER_UNIT</a></div><div class="sidebar-section-children"><a href="global.html#MILLISECONDS_PER_DAY">MILLISECONDS_PER_DAY</a></div><div class="sidebar-section-children"><a href="global.html#MILLISECONDS_PER_SECOND">MILLISECONDS_PER_SECOND</a></div><div class="sidebar-section-children"><a href="global.html#MIN">MIN</a></div><div class="sidebar-section-children"><a href="global.html#MINUTES_PER_DAY">MINUTES_PER_DAY</a></div><div class="sidebar-section-children"><a href="global.html#MINUTES_PER_HOUR">MINUTES_PER_HOUR</a></div><div class="sidebar-section-children"><a href="global.html#MIN_LAT">MIN_LAT</a></div><div class="sidebar-section-children"><a href="global.html#MODIFIED_JULIAN_DATE_DIFFERENCE">MODIFIED_JULIAN_DATE_DIFFERENCE</a></div><div class="sidebar-section-children"><a href="global.html#Mat3">Mat3</a></div><div class="sidebar-section-children"><a href="global.html#Mat4">Mat4</a></div><div class="sidebar-section-children"><a href="global.html#NEIGHBOUR">NEIGHBOUR</a></div><div class="sidebar-section-children"><a href="global.html#NOPSORD">NOPSORD</a></div><div class="sidebar-section-children"><a href="global.html#ONE_BY_HOURS_PER_DAY">ONE_BY_HOURS_PER_DAY</a></div><div class="sidebar-section-children"><a href="global.html#ONE_BY_MILLISECONDS_PER_DAY">ONE_BY_MILLISECONDS_PER_DAY</a></div><div class="sidebar-section-children"><a href="global.html#ONE_BY_MINUTES_PER_DAY">ONE_BY_MINUTES_PER_DAY</a></div><div class="sidebar-section-children"><a href="global.html#ONE_BY_POLE_DOUBLE">ONE_BY_POLE_DOUBLE</a></div><div class="sidebar-section-children"><a href="global.html#ONE_BY_SECONDS_PER_DAY">ONE_BY_SECONDS_PER_DAY</a></div><div class="sidebar-section-children"><a href="global.html#ONE_BY_SECONDS_PER_HOUR">ONE_BY_SECONDS_PER_HOUR</a></div><div class="sidebar-section-children"><a href="global.html#ONE_BY_SECONDS_PER_MINUTE">ONE_BY_SECONDS_PER_MINUTE</a></div><div class="sidebar-section-children"><a href="global.html#OPPART">OPPART</a></div><div class="sidebar-section-children"><a href="global.html#OPSIDE">OPSIDE</a></div><div class="sidebar-section-children"><a href="global.html#PARTOFFSET">PARTOFFSET</a></div><div class="sidebar-section-children"><a href="global.html#PICOSECOND">PICOSECOND</a></div><div class="sidebar-section-children"><a href="global.html#PI_TWO">PI_TWO</a></div><div class="sidebar-section-children"><a href="global.html#PLANET_NAME_PREFIX">PLANET_NAME_PREFIX</a></div><div class="sidebar-section-children"><a href="global.html#POLE">POLE</a></div><div class="sidebar-section-children"><a href="global.html#POLE_DOUBLE">POLE_DOUBLE</a></div><div class="sidebar-section-children"><a href="global.html#Quat">Quat</a></div><div class="sidebar-section-children"><a href="global.html#QuatAxisAngle">QuatAxisAngle</a></div><div class="sidebar-section-children"><a href="global.html#RAD2DEG">RAD2DEG</a></div><div class="sidebar-section-children"><a href="global.html#RADIANS">RADIANS</a></div><div class="sidebar-section-children"><a href="global.html#RADIANS_HALF">RADIANS_HALF</a></div><div class="sidebar-section-children"><a href="global.html#RADIANS_TO_HOURS">RADIANS_TO_HOURS</a></div><div class="sidebar-section-children"><a href="global.html#SAFE">SAFE</a></div><div class="sidebar-section-children"><a href="global.html#SECONDS_PER_12_HOURS">SECONDS_PER_12_HOURS</a></div><div class="sidebar-section-children"><a href="global.html#SECONDS_PER_DAY">SECONDS_PER_DAY</a></div><div class="sidebar-section-children"><a href="global.html#SECONDS_PER_HOUR">SECONDS_PER_HOUR</a></div><div class="sidebar-section-children"><a href="global.html#SECONDS_PER_MILLISECOND">SECONDS_PER_MILLISECOND</a></div><div class="sidebar-section-children"><a href="global.html#SECONDS_PER_MINUTE">SECONDS_PER_MINUTE</a></div><div class="sidebar-section-children"><a href="global.html#SQRT_HALF">SQRT_HALF</a></div><div class="sidebar-section-children"><a href="global.html#STR2ALIGN">STR2ALIGN</a></div><div class="sidebar-section-children"><a href="global.html#SUN_GRAVITATIONAL_PARAMETER">SUN_GRAVITATIONAL_PARAMETER</a></div><div class="sidebar-section-children"><a href="global.html#T">T</a></div><div class="sidebar-section-children"><a href="global.html#TAItoDate">TAItoDate</a></div><div class="sidebar-section-children"><a href="global.html#TAItoTDB">TAItoTDB</a></div><div class="sidebar-section-children"><a href="global.html#TAItoUTC">TAItoUTC</a></div><div class="sidebar-section-children"><a href="global.html#TDT_TAI">TDT_TAI</a></div><div class="sidebar-section-children"><a href="global.html#TRACK">TRACK</a></div><div class="sidebar-section-children"><a href="global.html#TWO_PI">TWO_PI</a></div><div class="sidebar-section-children"><a href="global.html#UTCtoDate">UTCtoDate</a></div><div class="sidebar-section-children"><a href="global.html#UTCtoTAI">UTCtoTAI</a></div><div class="sidebar-section-children"><a href="global.html#Units">Units</a></div><div class="sidebar-section-children"><a href="global.html#Vec2">Vec2</a></div><div class="sidebar-section-children"><a href="global.html#Vec3">Vec3</a></div><div class="sidebar-section-children"><a href="global.html#Vec4">Vec4</a></div><div class="sidebar-section-children"><a href="global.html#_currPickingColor">_currPickingColor</a></div><div class="sidebar-section-children"><a href="global.html#_entitiesConstructor">_entitiesConstructor</a></div><div class="sidebar-section-children"><a href="global.html#_prevPickingColor">_prevPickingColor</a></div><div class="sidebar-section-children"><a href="global.html#addDays">addDays</a></div><div class="sidebar-section-children"><a href="global.html#addHours">addHours</a></div><div class="sidebar-section-children"><a href="global.html#addMilliseconds">addMilliseconds</a></div><div class="sidebar-section-children"><a href="global.html#addMinutes">addMinutes</a></div><div class="sidebar-section-children"><a href="global.html#addSeconds">addSeconds</a></div><div class="sidebar-section-children"><a href="global.html#bezier3v">bezier3v</a></div><div class="sidebar-section-children"><a href="global.html#clamp">clamp</a></div><div class="sidebar-section-children"><a href="global.html#daysToSeconds">daysToSeconds</a></div><div class="sidebar-section-children"><a href="global.html#degToDec">degToDec</a></div><div class="sidebar-section-children"><a href="global.html#equationCallback">equationCallback</a></div><div class="sidebar-section-children"><a href="global.html#exp2">exp2</a></div><div class="sidebar-section-children"><a href="global.html#forwardArray">forwardArray</a></div><div class="sidebar-section-children"><a href="global.html#forward_lat">forward_lat</a></div><div class="sidebar-section-children"><a href="global.html#forward_lon">forward_lon</a></div><div class="sidebar-section-children"><a href="global.html#frac">frac</a></div><div class="sidebar-section-children"><a href="global.html#getAngleBetweenAzimuths">getAngleBetweenAzimuths</a></div><div class="sidebar-section-children"><a href="global.html#getAngleDirection">getAngleDirection</a></div><div class="sidebar-section-children"><a href="global.html#getDayNumber">getDayNumber</a></div><div class="sidebar-section-children"><a href="global.html#getDays">getDays</a></div><div class="sidebar-section-children"><a href="global.html#getHours">getHours</a></div><div class="sidebar-section-children"><a href="global.html#getMilliseconds">getMilliseconds</a></div><div class="sidebar-section-children"><a href="global.html#getMinutes">getMinutes</a></div><div class="sidebar-section-children"><a href="global.html#getSeconds">getSeconds</a></div><div class="sidebar-section-children"><a href="global.html#getSunPosition">getSunPosition</a></div><div class="sidebar-section-children"><a href="global.html#getTileX">getTileX</a></div><div class="sidebar-section-children"><a href="global.html#getTileY">getTileY</a></div><div class="sidebar-section-children"><a href="global.html#inverse_lat">inverse_lat</a></div><div class="sidebar-section-children"><a href="global.html#inverse_lon">inverse_lon</a></div><div class="sidebar-section-children"><a href="global.html#isPowerOfTwo">isPowerOfTwo</a></div><div class="sidebar-section-children"><a href="global.html#lerp">lerp</a></div><div class="sidebar-section-children"><a href="global.html#log">log</a></div><div class="sidebar-section-children"><a href="global.html#log2">log2</a></div><div class="sidebar-section-children"><a href="global.html#mars">mars</a></div><div class="sidebar-section-children"><a href="global.html#mod">mod</a></div><div class="sidebar-section-children"><a href="global.html#moon">moon</a></div><div class="sidebar-section-children"><a href="global.html#negativePItoPI">negativePItoPI</a></div><div class="sidebar-section-children"><a href="global.html#nextHighestPowerOfTwo">nextHighestPowerOfTwo</a></div><div class="sidebar-section-children"><a href="global.html#norm_lon">norm_lon</a></div><div class="sidebar-section-children"><a href="global.html#pow2i">pow2i</a></div><div class="sidebar-section-children"><a href="global.html#random">random</a></div><div class="sidebar-section-children"><a href="global.html#randomi">randomi</a></div><div class="sidebar-section-children"><a href="global.html#rev">rev</a></div><div class="sidebar-section-children"><a href="global.html#secondsToDays">secondsToDays</a></div><div class="sidebar-section-children"><a href="global.html#slice">slice</a></div><div class="sidebar-section-children"><a href="global.html#solve_iteration">solve_iteration</a></div><div class="sidebar-section-children"><a href="global.html#solve_iteration_fixed">solve_iteration_fixed</a></div><div class="sidebar-section-children"><a href="global.html#step">step</a></div><div class="sidebar-section-children"><a href="global.html#visibleExtent">visibleExtent</a></div><div class="sidebar-section-children"><a href="global.html#wgs84">wgs84</a></div><div class="sidebar-section-children"><a href="global.html#zeroTwoPI">zeroTwoPI</a></div></div></div></div></div><div class="navbar-container" id="VuAckcnZhf"><nav class="navbar"><div class="navbar-left-items"></div><div class="navbar-right-items"><div class="navbar-right-item"><button class="icon-button search-button" aria-label="open-search"><svg><use xlink:href="#search-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button theme-toggle" aria-label="toggle-theme"><svg><use class="theme-svg-use" xlink:href="#light-theme-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button font-size" aria-label="change-font-size"><svg><use xlink:href="#font-size-icon"></use></svg></button></div></div><nav></nav></nav></div><div class="toc-container"><div class="toc-content"><span class="bold">On this page</span><div id="eed4d2a0bfd64539bb9df78095dec881"></div></div></div><div class="body-wrapper"><div class="main-content"><div class="main-wrapper"><section id="source-page" class="source-page"><header><h1 id="title" class="has-anchor">utils_shared.ts</h1></header><article><pre class="prettyprint source lang-js"><code>/**
 * @module og/utils/shared
 */

import {Extent} from "../Extent";
import {LonLat} from "../LonLat";
import {Vec2} from "../math/Vec2";
import type {NumberArray2} from "../math/Vec2";
import {Vec3} from "../math/Vec3";
import type {NumberArray3} from "../math/Vec3";
import {Vec4} from "../math/Vec4";
import type {NumberArray4} from "../math/Vec4";
import {colorTable} from "./colorTable";
import {Ellipsoid} from "../ellipsoid/Ellipsoid";
import {wgs84} from "../ellipsoid/wgs84";
import * as mercator from "../mercator";

export function getDefault(param?: any, def?: any): boolean {
    return param != undefined ? param : def;
}

export function isEmpty(v: any): boolean {
    return v == null;
}

/**
 * Returns true if the object pointer is undefined.
 * @function
 * @param {Object} obj - Object pointer.
 * @returns {boolean} Returns true if object is undefined.
 */
export function isUndef(obj?: any): boolean {
    return obj === void 0;
}

export function isUndefExt(obj: any, defVal: any): any {
    return isUndef(obj) ? defVal : obj;
}

let _stampCounter: number = 0;

export function stamp(obj: any): number {
    let stamp = obj._openglobus_id;
    if (!stamp) {
        stamp = obj._openglobus_id = ++_stampCounter;
    }
    return stamp;
}

export function isString(s: any): boolean {
    return typeof s === "string" || s instanceof String;
}

function d2h(val: number): string {
    return val.toString(16).padStart(2, '0');
}

export function rgbToStringHTML(rgb: NumberArray3 | Vec3): string {
    let r: string, g: string, b: string;
    if (rgb instanceof Array) {
        r = d2h(rgb[0]);
        g = d2h(rgb[1]);
        b = d2h(rgb[2]);
    } else {
        r = d2h(rgb.x);
        g = d2h(rgb.y);
        b = d2h(rgb.z);
    }
    return `#${r}${g}${b}`;
}

/**
 * Convert html color string to the RGBA number vector.
 * @param {string} htmlColor - HTML string("#C6C6C6" or "#EF5" or "rgb(8,8,8)" or "rgba(8,8,8)") color.
 * @param {number} [opacity] - Opacity for the output vector.
 * @returns {Vec4} -
 */
export function htmlColorToRgba(htmlColor: string, opacity?: number): Vec4 {
    let hColor: any | undefined = colorTable[htmlColor];
    if (hColor) {
        htmlColor = hColor;
    }

    if (htmlColor[0] === "#") {
        let shorthandRegex = /^#?([a-f\d])([a-f\d])([a-f\d])$/i;
        let hex = htmlColor.replace(shorthandRegex, function (m, r, g, b) {
            return r + r + g + g + b + b;
        });
        let result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
        if (result) {
            return new Vec4(
                parseInt(result[1], 16) / 255,
                parseInt(result[2], 16) / 255,
                parseInt(result[3], 16) / 255,
                isEmpty(opacity) ? 1.0 : opacity
            );
        } else {
            return new Vec4();
        }
    } else {
        if (isEmpty(opacity)) {
            opacity = 1.0;
        }
        let m = htmlColor.split(",");
        return new Vec4(
            parseInt(m[0].split("(")[1]) / 255,
            parseInt(m[1]) / 255,
            parseInt(m[2]) / 255,
            !isEmpty(m[3]) ? parseFloat(m[3]) : opacity
        );
    }
}

export function htmlColorToFloat32Array(htmlColor: string, opacity?: number): Float32Array {
    let c = htmlColorToRgba(htmlColor, opacity);
    return new Float32Array([c.x, c.y, c.z, c.w]);
}

/**
 * Convert html color string to the RGB number vector.
 * @param {string} htmlColor - HTML string("#C6C6C6" or "#EF5" or "rgb(8,8,8)" or "rgba(8,8,8)") color.
 * @returns {Vec3} -
 */
export function htmlColorToRgb(htmlColor: string): Vec3 {
    let hColor: any | undefined = colorTable[htmlColor];
    if (hColor) {
        htmlColor = hColor;
    }

    if (htmlColor[0] === "#") {
        let shorthandRegex = /^#?([a-f\d])([a-f\d])([a-f\d])$/i;
        let hex = htmlColor.replace(shorthandRegex, function (m, r, g, b) {
            return r + r + g + g + b + b;
        });
        let result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
        if (result) {
            return new Vec3(
                parseInt(result[1], 16) / 255,
                parseInt(result[2], 16) / 255,
                parseInt(result[3], 16) / 255
            );
        } else {
            return new Vec3();
        }
    } else {
        let m = htmlColor.split(",");
        return new Vec3(
            parseInt(m[0].split("(")[1]) / 255,
            parseInt(m[1]) / 255,
            parseInt(m[2]) / 255
        );
    }
}

/**
 * Replace template substrings between '{' and '}' tokens.
 * @param {string} template - String with templates in "{" and "}"
 * @param {Object} params - Template named object with subsrtings.
 * @returns {string} -
 *
 * @example &lt;caption>Example from og.terrain that replaces tile indexes in url:&lt;/caption>
 * var substrings = {
 *       "x": 12,
 *       "y": 15,
 *       "z": 8
 * }
 * og.utils.stringTemplate("http://earth3.openglobus.org/{z}/{y}/{x}.ddm", substrings);
 * //returns http://earth3.openglobus.org/8/15/12.ddm
 */
export function stringTemplate(template: string, params?: any): string {
    return template.replace(/{[^{}]+}/g, function (key) {
        return params[key.replace(/[{}]+/g, "")] || "";
    });
}

/**
 * Replace template substrings between '${...}' tokens.
 * @param {string} template - String with templates in "${" and "}"
 * @param {Object} params - Template named object with subsrtings.
 * @returns {string} -
 *
 * @example &lt;caption>Example from og.terrain that replaces tile indexes in url:&lt;/caption>
 * var substrings = {
 *       "x": 12,
 *       "y": 15,
 *       "z": 8
 * }
 * og.utils.stringTemplate2("http://earth3.openglobus.org/${z}/${y}/${x}.ddm", substrings);
 * //returns http://earth3.openglobus.org/8/15/12.ddm
 */
export function stringTemplate2(template: string, params?: Record&lt;string, any>): string {
    return template.replace(/\$\{([^}]+)\}/g, (_, key) => {
        return params?.[key.trim()] ?? "";
    });
}

export function getHTML(template: string, params?: any): string {
    return stringTemplate(template, params);
}

export function parseHTML(htmlStr: string): HTMLElement[] {
    let p = document.createElement("div");
    p.innerHTML = htmlStr;
    let domArr: HTMLElement[] = [];
    for (let i = 0; i &lt; p.childNodes.length; i++) {
        domArr.push(p.childNodes[i] as HTMLElement);
        p.removeChild(p.childNodes[i]);
    }
    return domArr;
}

export function print2d(id: string, text: string, x: number, y: number) {
    let el = document.getElementById(id);
    if (!el) {
        el = document.createElement("div");
        el.id = id;
        el.classList.add("defaultText");
        document.body.appendChild(el);
    }
    el.innerHTML = text;
    el.style.left = `${x}px`;
    el.style.top = `${y}px`;
}

export function isNumber(value: any): boolean {
    return typeof value === 'number';
}

export function defaultString(str?: string, def: string = ""): string {
    return str ? str.trim() : def;
}

export function createVector3(v?: number | Vec3 | Vec2 | NumberArray3 | NumberArray2 | null, def?: Vec3): Vec3 {
    if (v) {
        if (isNumber(v)) {
            return new Vec3(v as number, v as number, v as number);
        } else if (v instanceof Vec3) {
            return v.clone();
        } else if (v instanceof Array) {
            return Vec3.fromVec(v);
        } else if (v instanceof Vec2) {
            return new Vec3(v.x, v.y, 0.0);
        }
    } else if (def) {
        return def;
    }
    return new Vec3();
}

export function createVector4(v?: Vec4 | NumberArray4 | null, def?: Vec4): Vec4 {
    if (v) {
        if (v instanceof Vec4) {
            return v.clone();
        } else if (v instanceof Array) {
            return Vec4.fromVec(v);
        }
    } else if (def) {
        return def;
    }
    return new Vec4();
}

export function createColorRGBA(c?: string | NumberArray4 | Vec4 | null, def?: Vec4): Vec4 {
    if (c) {
        if (isString(c)) {
            return htmlColorToRgba(c as string);
        } else if (c instanceof Array) {
            return Vec4.fromVec(c);
        } else if (c instanceof Vec4) {
            return c.clone();
        }
    } else if (def) {
        return def;
    }
    return new Vec4(1.0, 1.0, 1.0, 1.0);
}

export function createColorRGB(c?: string | NumberArray3 | Vec3 | null, def?: Vec3): Vec3 {
    if (c) {
        if (isString(c)) {
            return htmlColorToRgb(c as string);
        } else if (c instanceof Array) {
            return Vec3.fromVec(c);
        } else if (c instanceof Vec3) {
            return (c as Vec3).clone();
        }
    } else if (def) {
        return def;
    }
    return new Vec3(1.0, 1.0, 1.0);
}

export function createExtent(e?: Extent | [[number, number], [number, number]] | null, def?: Extent): Extent {
    if (e) {
        if (e instanceof Array) {
            return new Extent(createLonLat(e[0]), createLonLat(e[1]));
        } else if (e instanceof Extent) {
            return e.clone();
        }
    } else if (def) {
        return def;
    }
    return new Extent();
}

export function createLonLat(l?: LonLat | NumberArray2 | NumberArray3, def?: LonLat): LonLat {
    if (l) {
        if (l instanceof Array) {
            return new LonLat(l[0], l[1], l[2]);
        } else if (l instanceof LonLat) {
            return l.clone();
        }
    } else if (def) {
        return def;
    }
    return new LonLat();
}

export function binarySearchFast(arr: number[] | TypedArray, x: number) {
    let start = 0,
        end = arr.length - 1;
    while (start &lt;= end) {
        let k = Math.floor((start + end) * 0.5);
        if (Math.abs(arr[k] - x) &lt; 1e-3) {
            return k;
        } else if (arr[k] &lt; x) {
            start = k + 1;
        } else {
            end = k - 1;
        }
    }
    return -1;
}

/**
 * Finds an item in a sorted array.
 * @param {any[]} ar The sorted array to search.
 * @param {any} el The item to find in the array.
 * @param {Function} compare_fn comparator The function to use to compare the item to
 *        elements in the array.
 * @returns {number} a negative number  if 'a' is less than 'b'; 0 if 'a' is equal to 'b'; 'a' positive number of 'a' is greater than 'b'.
 *
 * @example
 * // Create a comparator function to search through an array of numbers.
 * function comparator(a, b) {
 *     return a - b;
 * };
 * var numbers = [0, 2, 4, 6, 8];
 * var index = og.utils.binarySearch(numbers, 6, comparator); // 3
 */
export function binarySearch(ar: any[], el: any, compare_fn: Function): number {
    let m = 0;
    let n = ar.length - 1;
    while (m &lt;= n) {
        let k = (n + m) >> 1;
        let cmp = compare_fn(el, ar[k], k);
        if (cmp > 0) {
            m = k + 1;
        } else if (cmp &lt; 0) {
            n = k - 1;
        } else {
            return k;
        }
    }
    return -m - 1;
}

/**
 * @todo: replace any with generic
 * Binary insertion that uses binarySearch algorithm.
 * @param {any[]} ar - The sorted array to insert.
 * @param {any} el - The item to insert.
 * @param {Function} compare_fn - comparator The function to use to compare the item to
 *        elements in the array.
 * @returns {number} Array index position in which item inserted in.
 */
export function binaryInsert(ar: any[], el: any, compare_fn: Function): number {
    let i = binarySearch(ar, el, compare_fn);
    if (i &lt; 0) {
        i = ~i;
    }
    ar.splice(i, 0, el);
    return i;
}

/**
 * Returns two segment lines intersection coordinate.
 * @static
 * @param {Vec2} start1 - First line first coordinate.
 * @param {Vec2} end1 - First line second coordinate.
 * @param {Vec2} start2 - Second line first coordinate.
 * @param {Vec2} end2 - Second line second coordinate.
 * @param {boolean} [isSegment] - Lines are segments.
 * @return {Vec2} - Intersection coordinate.
 */
export function getLinesIntersection2v(start1: Vec2, end1: Vec2, start2: Vec2, end2: Vec2, isSegment: boolean): Vec2 | undefined {
    let dir1 = end1.sub(start1);
    let dir2 = end2.sub(start2);

    let a1 = -dir1.y;
    let b1 = +dir1.x;
    let d1 = -(a1 * start1.x + b1 * start1.y);

    let a2 = -dir2.y;
    let b2 = +dir2.x;
    let d2 = -(a2 * start2.x + b2 * start2.y);

    let seg1_line2_start = a2 * start1.x + b2 * start1.y + d2;
    let seg1_line2_end = a2 * end1.x + b2 * end1.y + d2;

    let seg2_line1_start = a1 * start2.x + b1 * start2.y + d1;
    let seg2_line1_end = a1 * end2.x + b1 * end2.y + d1;

    if (
        isSegment &amp;&amp;
        (seg1_line2_start * seg1_line2_end > 0 || seg2_line1_start * seg2_line1_end > 0)
    ) {
        return undefined;
    }

    let u = seg1_line2_start / (seg1_line2_start - seg1_line2_end);

    return new Vec2(start1.x + u * dir1.x, start1.y + u * dir1.y);
}

/**
 * Returns two segment lines intersection coordinate.
 * @static
 * @param {Vec2} start1 - First line first coordinate.
 * @param {Vec2} end1 - First line second coordinate.
 * @param {Vec2} start2 - Second line first coordinate.
 * @param {Vec2} end2 - Second line second coordinate.
 * @param {boolean} [isSegment=false] - Lines are segments.
 * @return {Vec2} - Intersection coordinate.
 */
export function getLinesIntersectionLonLat(start1: LonLat, end1: LonLat, start2: LonLat, end2: LonLat, isSegment: boolean = false): LonLat | undefined {
    let dir1 = new LonLat(end1.lon - start1.lon, end1.lat - start1.lat);
    let dir2 = new LonLat(end2.lon - start2.lon, end2.lat - start2.lat);

    let a1 = -dir1.lat;
    let b1 = +dir1.lon;
    let d1 = -(a1 * start1.lon + b1 * start1.lat);

    let a2 = -dir2.lat;
    let b2 = +dir2.lon;
    let d2 = -(a2 * start2.lon + b2 * start2.lat);

    let seg1_line2_start = a2 * start1.lon + b2 * start1.lat + d2;
    let seg1_line2_end = a2 * end1.lon + b2 * end1.lat + d2;

    let seg2_line1_start = a1 * start2.lon + b1 * start2.lat + d1;
    let seg2_line1_end = a1 * end2.lon + b1 * end2.lat + d1;

    if (
        isSegment &amp;&amp;
        (seg1_line2_start * seg1_line2_end > 0 || seg2_line1_start * seg2_line1_end > 0)
    ) {
        return undefined;
    }

    let u = seg1_line2_start / (seg1_line2_start - seg1_line2_end);

    return new LonLat(start1.lon + u * dir1.lon, start1.lat + u * dir1.lat);
}

/**
 * Converts XML to JSON
 * @static
 * @param {Object} xml - Xml object
 * @return {Object} - Json converted object.
 */
export function xmlToJson(xml: any): any {
    // Create the return object
    let obj: any = {};

    if (xml.nodeType === 1) {
        // element
        // do attributes
        if (xml.attributes.length > 0) {
            obj["@attributes"] = {};
            for (let j = 0; j &lt; xml.attributes.length; j++) {
                let attribute = xml.attributes.item(j);
                obj["@attributes"][attribute.nodeName] = attribute.nodeValue;
            }
        }
    } else if (xml.nodeType === 3) {
        // text
        obj = xml.nodeValue;
    }

    // do children
    if (xml.hasChildNodes()) {
        for (let i = 0; i &lt; xml.childNodes.length; i++) {
            let item = xml.childNodes.item(i);
            let nodeName = item.nodeName;
            if (typeof obj[nodeName] === "undefined") {
                obj[nodeName] = xmlToJson(item);
            } else {
                if (typeof obj[nodeName].push === "undefined") {
                    let old = obj[nodeName];
                    obj[nodeName] = [];
                    obj[nodeName].push(old);
                }
                obj[nodeName].push(xmlToJson(item));
            }
        }
    }
    return obj;
}

export const castType = {
    string: function (v: any) {
        return isEmpty(v) ? v : v.toString();
    },

    date: function (v: any) {
        return isEmpty(v) ? v : new Date(v * 1000);
    },

    datetime: function (v: any) {
        return isEmpty(v) ? v : new Date(v * 1000);
    },

    time: function (v: any) {
        return isEmpty(v) ? v : parseInt(v);
    },

    integer: function (v: any) {
        return isEmpty(v) ? v : parseInt(v);
    },

    float: function (v: any) {
        return isEmpty(v) ? v : parseFloat(v);
    },

    boolean: function (str: any) {
        if (str === null) {
            return str;
        }

        if (typeof str === "boolean") {
            if (str === true) {
                return true;
            }
            return false;
        }
        if (typeof str === "string") {
            if (str === "") {
                return false;
            }
            str = str.replace(/^\s+|\s+$/g, "");
            if (str.toLowerCase() === "true" || str.toLowerCase() === "yes") {
                return true;
            }
            str = str.replace(/,/g, ".");
            str = str.replace(/^\s*\-\s*/g, "-");
        }
        if (!isNaN(str)) {
            return parseFloat(str) !== 0;
        }
        return false;
    }
};

export function base64toBlob(base64Data: string, contentType: string = ""): Blob {

    let sliceSize = 1024;
    let byteCharacters = atob(base64Data);
    let bytesLength = byteCharacters.length;
    let slicesCount = Math.ceil(bytesLength / sliceSize);
    let byteArrays = new Array(slicesCount);

    for (let sliceIndex = 0; sliceIndex &lt; slicesCount; ++sliceIndex) {

        let begin = sliceIndex * sliceSize;
        let end = Math.min(begin + sliceSize, bytesLength);
        let bytes = new Array(end - begin);

        for (let offset = begin, i = 0; offset &lt; end; ++i, ++offset) {
            bytes[i] = byteCharacters[offset].charCodeAt(0);
        }

        byteArrays[sliceIndex] = new Uint8Array(bytes);
    }
    return new Blob(byteArrays, {type: contentType});
}

export function base64StringToBlog(string: string): Blob {

    let block = string.split(";");
    let contentType = block[0].split(":")[1];
    let data = block[1].split(",")[1];

    return base64toBlob(data, contentType);
}

///**
// *
// * @param {LonLat} p
// * @param {LonLat} v1
// * @param {LonLat} v2
// * @param {LonLat} v3
// * @param {Array&lt;Number>} res
// */
//export function cartesianToBarycentricLonLat(p, v1, v2, v3, res) {

//    const y2y3 = v2.lat - v3.lat,
//        x3x2 = v3.lon - v2.lon,
//        x1x3 = v1.lon - v3.lon,
//        y1y3 = v1.lat - v3.lat,
//        y3y1 = v3.lat - v1.lat,
//        xx3 = p.lon - v3.lon,
//        yy3 = p.lat - v3.lat;

//    const d = y2y3 * x1x3 + x3x2 * y1y3,
//        lambda1 = (y2y3 * xx3 + x3x2 * yy3) / d,
//        lambda2 = (y3y1 * xx3 + x1x3 * yy3) / d;

//    res[0] = lambda1;
//    res[1] = lambda2;
//    res[2] = 1 - lambda1 - lambda2;

//    return 0 &lt;= res[0] &amp;&amp; res[0] &lt;= 1 &amp;&amp; 0 &lt;= lambda1 &amp;&amp; lambda1 &lt;= 1 &amp;&amp; 0 &lt;= lambda2 &amp;&amp; lambda2 &lt;= 1;
//};

/**
 * Callback throttling
 * @param {any} func
 * @param {Number} limit
 * @param {boolean} [skip]
 */
export function throttle(func: Function, limit: number, skip: boolean = false) {
    let lastFunc: any;
    let lastRan: number = 0;
    return function () {
        const args = arguments;
        if (!lastRan) {
            func.apply(null, args);
            lastRan = Date.now();
        } else {
            if (skip) {
                clearTimeout(lastFunc);
            }
            lastFunc = setTimeout(() => {
                if (Date.now() - lastRan >= limit) {
                    func.apply(null, args);
                    lastRan = Date.now();
                }
            }, limit - (Date.now() - lastRan));
        }
    };
}

/**
 *
 * y2-----Q12--------------Q22---
 * |       |     |          |
 * |       |     |          |
 * y-------|-----P----------|----
 * |       |     |          |
 * |       |     |          |
 * |       |     |          |
 * |       |     |          |
 * |       |     |          |
 * y1-----Q11----|---------Q21---
 *         |     |          |
 *         |     |          |
 *         x1    x          x2
 *
 *
 * @param {Number} x -
 * @param {Number} y -
 * @param {Number} fQ11 -
 * @param {Number} fQ21 -
 * @param {Number} fQ12 -
 * @param {Number} fQ22 -
 * @param {Number} [x1=0.0] -
 * @param {Number} [x2=1.0] -
 * @param {Number} [y1=0.0] -
 * @param {Number} [y2=1.0] -
 */
export function blerp(
    x: number, y: number, fQ11: number, fQ21: number, fQ12: number, fQ22: number,
    x1: number = 0.0, x2: number = 1.0, y1: number = 0.0, y2: number = 1.0): number {
    return (
        (fQ11 * (x2 - x) * (y2 - y) +
            fQ21 * (x - x1) * (y2 - y) +
            fQ12 * (x2 - x) * (y - y1) +
            fQ22 * (x - x1) * (y - y1)) /
        ((x2 - x1) * (y2 - y1))
    );
}

export function blerp2(x: number, y: number, fQ11: number, fQ21: number, fQ12: number, fQ22: number): number {
    return (
        fQ11 * (1.0 - x) * (1.0 - y) + fQ21 * x * (1.0 - y) + fQ12 * (1.0 - x) * y + fQ22 * x * y
    );
}

export function extractElevationTiles(rgbaData: number[] | TypedArray, outCurrenElevations: number[] | TypedArray, outChildrenElevations: number[][][] | TypedArray[][]) {
    let destSize = Math.sqrt(outCurrenElevations.length) - 1;
    let destSizeOne = destSize + 1;
    let sourceSize = Math.sqrt(rgbaData.length / 4);
    let dt = sourceSize / destSize;

    let rightHeigh = 0,
        bottomHeigh = 0;

    for (
        let k = 0, currIndex = 0, sourceDataLength = rgbaData.length / 4;
        k &lt; sourceDataLength;
        k++
    ) {
        let height = rgbaData[k * 4];

        let i = Math.floor(k / sourceSize),
            j = k % sourceSize;

        let tileX = Math.floor(j / destSize),
            tileY = Math.floor(i / destSize);

        let destArr = outChildrenElevations[tileY][tileX];

        let ii = i % destSize,
            jj = j % destSize;

        let destIndex = (ii + tileY) * destSizeOne + jj + tileX;

        destArr[destIndex] = height;

        if ((i + tileY) % dt === 0 &amp;&amp; (j + tileX) % dt === 0) {
            outCurrenElevations[currIndex++] = height;
        }

        if ((j + 1) % destSize === 0 &amp;&amp; j !== sourceSize - 1) {
            //current tile
            rightHeigh = rgbaData[(k + 1) * 4];
            let middleHeight = (height + rightHeigh) * 0.5;
            destIndex = (ii + tileY) * destSizeOne + jj + 1;
            destArr[destIndex] = middleHeight;

            if ((i + tileY) % dt === 0) {
                outCurrenElevations[currIndex++] = middleHeight;
            }

            //next right tile
            let rightindex = (ii + tileY) * destSizeOne + ((jj + 1) % destSize);
            outChildrenElevations[tileY][tileX + 1][rightindex] = middleHeight;
        }

        if ((i + 1) % destSize === 0 &amp;&amp; i !== sourceSize - 1) {
            //current tile
            bottomHeigh = rgbaData[(k + sourceSize) * 4];
            let middleHeight = (height + bottomHeigh) * 0.5;
            destIndex = (ii + 1) * destSizeOne + jj + tileX;
            destArr[destIndex] = middleHeight;

            if ((j + tileX) % dt === 0) {
                outCurrenElevations[currIndex++] = middleHeight;
            }

            //next bottom tile
            let bottomindex = ((ii + 1) % destSize) * destSizeOne + jj + tileX;
            outChildrenElevations[tileY + 1][tileX][bottomindex] = middleHeight;
        }

        if (
            (j + 1) % destSize === 0 &amp;&amp;
            j !== sourceSize - 1 &amp;&amp;
            (i + 1) % destSize === 0 &amp;&amp;
            i !== sourceSize - 1
        ) {
            //current tile
            let rightBottomHeight = rgbaData[(k + sourceSize + 1) * 4];
            let middleHeight = (height + rightHeigh + bottomHeigh + rightBottomHeight) * 0.25;
            destIndex = (ii + 1) * destSizeOne + (jj + 1);
            destArr[destIndex] = middleHeight;

            outCurrenElevations[currIndex++] = middleHeight;

            //next right tile
            let rightindex = (ii + 1) * destSizeOne;
            outChildrenElevations[tileY][tileX + 1][rightindex] = middleHeight;

            //next bottom tile
            let bottomindex = destSize;
            outChildrenElevations[tileY + 1][tileX][bottomindex] = middleHeight;

            //next right bottom tile
            let rightBottomindex = 0;
            outChildrenElevations[tileY + 1][tileX + 1][rightBottomindex] = middleHeight;
        }
    }
}

export type TypedArray =
    | Int8Array
    | Uint8Array
    | Uint8ClampedArray
    | Int16Array
    | Uint16Array
    | Int32Array
    | Uint32Array
    | Float32Array
    | Float64Array;

/**
 * Concatenates two the same type arrays
 * @param {TypedArray} a
 * @param {TypedArray | number[]} b
 */
export function concatTypedArrays(a: TypedArray, b: TypedArray | number[]): TypedArray {
    let c = new (a as any).constructor(a.length + b.length); //hacky
    c.set(a, 0);
    c.set(b, a.length);
    return c;
}

/**
 * Concatenates two the same  arrays
 * @param {TypedArray | number[]} [a=[]] - First array
 * @param {TypedArray | number[]} [b=[]] - Second array
 * @return {TypedArray | number[]} -
 */
export function concatArrays(a: TypedArray | number[] = [], b: TypedArray | number[] = []): TypedArray | number[] {
    if (ArrayBuffer.isView(a)) {
        return concatTypedArrays(a as TypedArray, b as TypedArray);
    } else {
        for (let i = 0; i &lt; b.length; i++) {
            a.push(b[i]);
        }
        return a;
    }
}

/**
 * Convert simple array to typed
 * @param arr {number[]}
 * @param ctor {Float32Array}
 * @returns {TypedArray}
 */
export function makeArrayTyped(arr: TypedArray | number[], ctor: Function = Float32Array) {
    if (!ArrayBuffer.isView(arr)) {
        const typedArr = new (ctor as any)(arr.length); //hacky
        typedArr.set(arr, 0);
        return typedArr;
    } else {
        return arr;
    }
}

/**
 * Convert typed array to array
 * @param arr {TypedArray | number[]}
 * @returns {number[]}
 */
export function makeArray(arr: TypedArray | number[]): number[] {
    if (ArrayBuffer.isView(arr)) {
        return Array.from(arr);
    } else {
        return arr;
    }
}

/**
 *
 * @param {TypedArray | Array} arr
 * @param {Number} starting
 * @param {Number} deleteCount
 * @param {{ result: number[] }} [out]
 */

export function spliceArray(arr: TypedArray | number[], starting: number, deleteCount: number, out?: {
    result: number[]
} | { result: TypedArray }): TypedArray | number[] {
    if (ArrayBuffer.isView(arr)) {
        if (starting &lt; 0) {
            deleteCount = Math.abs(starting);
            starting += arr.length;
        }
        return spliceTypedArray(arr, starting, deleteCount, out as { result: TypedArray });
    } else {
        let res;
        if (starting &lt; 0) {
            res = arr.splice(starting);
        } else {
            res = arr.splice(starting, deleteCount);
        }
        if (out) {
            out.result = res;
        }
        return arr;
    }
}

/**
 *
 * @param {TypedArray} arr
 * @param {Number} starting
 * @param {Number} deleteCount
 * @param {{ result: TypedArray }} [out]
 */
export function spliceTypedArray&lt;T extends TypedArray>(arr: T, starting: number, deleteCount: number, out?: {
    result: T
}): T {
    if (arr.length === 0) {
        return arr;
    }
    const newSize = arr.length - deleteCount;
    const splicedArray = new (arr as any).constructor(newSize); //hacky
    splicedArray.set(arr.subarray(0, starting));
    splicedArray.set(arr.subarray(starting + deleteCount), starting);
    if (out) {
        out.result = arr.subarray(starting, starting + deleteCount) as T;
    }
    return splicedArray;
}

/**
 * Returns 64-bit triangle coordinate array from inside of the source triangle array.
 * @static
 * @param {TypedArray | number[]} sourceArr - Source array
 * @param {number} gridSize - Source array square matrix size
 * @param {number} i0 - First row index source array matrix
 * @param {number} j0 - First column index
 * @param {number} size - Square matrix result size.
 * @return {Float64Array} Triangle coordinates array from the source array.
 * @TODO: optimization
 */
export function getMatrixSubArray64(sourceArr: TypedArray | number[], gridSize: number, i0: number, j0: number, size: number): Float64Array {

    const size_1 = size + 1;
    const i0size = i0 + size_1;
    const j0size = j0 + size_1;

    let res = new Float64Array(size_1 * size_1 * 3);
    let vInd = 0;

    for (let i = i0; i &lt; i0size; i++) {
        for (let j = j0; j &lt; j0size; j++) {

            let ind = 3 * (i * (gridSize + 1) + j);

            res[vInd++] = sourceArr[ind];
            res[vInd++] = sourceArr[ind + 1];
            res[vInd++] = sourceArr[ind + 2];
        }
    }

    return res;
}

/**
 * Returns 32-bit triangle coordinate array from inside of the source triangle array.
 * @static
 * @param {TypedArray | number[]} sourceArr - Source array
 * @param {number} gridSize - Source array square matrix size
 * @param {number} i0 - First row index source array matrix
 * @param {number} j0 - First column index
 * @param {number} size - Square matrix result size.
 * @return {Float32Array} Triangle coordinates array from the source array.
 */
export function getMatrixSubArray32(sourceArr: TypedArray | number[], gridSize: number, i0: number, j0: number, size: number): Float32Array {

    const size_1 = size + 1;
    const i0size = i0 + size_1;
    const j0size = j0 + size_1;

    let res = new Float32Array(size_1 * size_1 * 3);
    let vInd = 0;

    for (let i = i0; i &lt; i0size; i++) {
        for (let j = j0; j &lt; j0size; j++) {

            let ind = 3 * (i * (gridSize + 1) + j);

            res[vInd++] = sourceArr[ind];
            res[vInd++] = sourceArr[ind + 1];
            res[vInd++] = sourceArr[ind + 2];
        }
    }

    return res;
}

/**
 * Returns two float32 triangle coordinate arrays from inside of the source triangle array.
 * @TODO: optimization
 */
export function getMatrixSubArrayBoundsExt(
    sourceArr: TypedArray | number[],
    sourceArrHigh: TypedArray | number[],
    sourceArrLow: TypedArray | number[],
    noDataVertices: TypedArray | number[] | undefined,
    gridSize: number,
    i0: number,
    j0: number,
    size: number,
    outArr: TypedArray | number[],
    outArrHigh: TypedArray | number[],
    outArrLow: TypedArray | number[],
    outBounds: any,
    outNoDataVertices: TypedArray | number[]
) {
    const i0size = i0 + size + 1;
    const j0size = j0 + size + 1;

    gridSize += 1;

    let vInd = 0,
        nInd = 0;

    for (let i = i0; i &lt; i0size; i++) {
        for (let j = j0; j &lt; j0size; j++) {
            let indBy3 = i * gridSize + j,
                ind = 3 * indBy3;

            let x = sourceArr[ind],
                y = sourceArr[ind + 1],
                z = sourceArr[ind + 2];

            if (!noDataVertices || noDataVertices[indBy3] === 0) {
                if (x &lt; outBounds.xmin) outBounds.xmin = x;
                if (x > outBounds.xmax) outBounds.xmax = x;
                if (y &lt; outBounds.ymin) outBounds.ymin = y;
                if (y > outBounds.ymax) outBounds.ymax = y;
                if (z &lt; outBounds.zmin) outBounds.zmin = z;
                if (z > outBounds.zmax) outBounds.zmax = z;
            } else {
                outNoDataVertices[nInd] = 1;
            }

            nInd++;

            outArr[vInd] = x;
            outArrLow[vInd] = sourceArrLow[ind];
            outArrHigh[vInd++] = sourceArrHigh[ind];

            outArr[vInd] = y;
            outArrLow[vInd] = sourceArrLow[ind + 1];
            outArrHigh[vInd++] = sourceArrHigh[ind + 1];

            outArr[vInd] = z;
            outArrLow[vInd] = sourceArrLow[ind + 2];
            outArrHigh[vInd++] = sourceArrHigh[ind + 2];
        }
    }
}

export function cloneArray(items: any[]): any[] {
    return items.map((item) => (Array.isArray(item) ? cloneArray(item) : item));
}

/**
 * Promise for load images
 * @function
 * @param {string} url - link to image.
 * @returns {Promise&lt;Image>} Returns promise.
 */
export async function loadImage(url: string): Promise&lt;HTMLImageElement> {
    return new Promise&lt;HTMLImageElement>(resolve => {
        const image = new Image();
        image.addEventListener('load', () => {
            resolve(image);
        });
        image.src = url;
        image.crossOrigin = ""
        return image;
    });
}

/**
 * Gets image is loaded
 * @param {HTMLImageElement} image
 * @returns {boolean} Returns true is the image is loaded
 */
export function isImageLoaded(image: HTMLImageElement): boolean {
    return image.complete &amp;&amp; image.naturalHeight !== 0;
}

export function distanceFormat(v: number): string {
    if (v > 1000) {
        return `${(v / 1000).toFixed(2)} km`;
    } else if (v > 9) {
        return `${Math.round(v)} m`;
    } else {
        return `${v.toFixed(1)} m`;
    }
}

export function distanceFormatExt(v: number): [string, string] {
    if (v > 1000) {
        let d = v - Math.floor(v);
        if (d !== 0) {
            return [(v / 1000).toFixed(2), "km"];
        }
        return [(v / 1000).toFixed(0), "km"]
    } else if (v > 9) {
        return [Math.round(v).toString(), "m"];
    } else {
        if (v &lt;= 0.01) {
            return ["0", "m"]
        }
        return [v.toFixed(1), "m"];
    }
}

export function getUrlParam(paramName: string): number | undefined {
    let urlParams = new URLSearchParams(location.search);
    let param = urlParams.get(paramName);
    if (param) {
        return Number(param);
    }
}


/**
 *
 * @param x
 * @param y
 * @param z
 * @param imageSize
 * @param ellipsoid
 *
 * console.log(1, getTileImageResolution(0, 0, 1));
 * console.log(7, getTileImageResolution(66, 44, 7));
 * console.log(10, getTileImageResolution(536, 358, 10));
 * console.log(12, getTileImageResolution(2149, 1446, 12));
 * console.log(13, getTileImageResolution(4301, 2892, 13));
 * console.log(14, getTileImageResolution(8582, 5736, 14));
 * console.log(15, getTileImageResolution(17205, 11569, 15));
 * console.log(16, getTileImageResolution(34419, 23138, 16));
 * console.log(17, getTileImageResolution(68661, 45892, 17));
 * console.log(18, getTileImageResolution(137650, 92555, 18));
 */
export function getTileImageResolution(x: number, y: number, z: number, imageSize = 256, ellipsoid: Ellipsoid = wgs84) {
    let ext = mercator.getTileExtent(x, y, z);
    let b0 = ext.getSouthWest().inverseMercator(),
        b1 = ext.getNorthEast().inverseMercator();
    let width = ellipsoid.getGreatCircleDistance(b0, new LonLat(b1.lon, b0.lat)),
        height = ellipsoid.getGreatCircleDistance(b0, new LonLat(b0.lon, b1.lat));

    return [width / imageSize, height / imageSize];
}

export function toFixedMax(value: number, maxFixed: number = -1): string {
    if (maxFixed &lt; 0) {
        return value.toString();
    }
    const factor = Math.pow(10, maxFixed);
    return (Math.round(value * factor) / factor).toString();
}</code></pre></article></section></div></div></div><div class="search-container" id="PkfLWpAbet" style="display:none"><div class="wrapper" id="iCxFxjkHbP"><button class="icon-button search-close-button" id="VjLlGakifb" aria-label="close search"><svg><use xlink:href="#close-icon"></use></svg></button><div class="search-box-c"><svg><use xlink:href="#search-icon"></use></svg> <input type="text" id="vpcKVYIppa" class="search-input" placeholder="Search..." autofocus></div><div class="search-result-c" id="fWwVHRuDuN"><span class="search-result-c-text">Type anything to view search result</span></div></div></div><div class="mobile-menu-icon-container"><button class="icon-button" id="mobile-menu" data-isopen="false" aria-label="menu"><svg><use xlink:href="#menu-icon"></use></svg></button></div><div id="mobile-sidebar" class="mobile-sidebar-container"><div class="mobile-sidebar-wrapper"><a href="/" class="sidebar-title sidebar-title-anchor">OpenGlobus</a><div class="mobile-nav-links"></div><div class="mobile-sidebar-items-c"><div class="sidebar-section-title with-arrow" data-isopen="false" id="sidebar-modules"><div>Modules</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="module-og_math_coder.html">og/math/coder</a></div><div class="sidebar-section-children"><a href="module-og_proj_EPSG3857.html">og/proj/EPSG3857</a></div><div class="sidebar-section-children"><a href="module-og_proj_EPSG4326.html">og/proj/EPSG4326</a></div><div class="sidebar-section-children"><a href="module-og_proj_equi.html">og/proj/equi</a></div><div class="sidebar-section-children"><a href="module-og_segment_SegmentHelper.html">og/segment/SegmentHelper</a></div><div class="sidebar-section-children"><a href="module-og_utils_earcut.html">og/utils/earcut</a></div><div class="sidebar-section-children"><a href="module-og_utils_shared.html">og/utils/shared</a></div><div class="sidebar-section-children"><a href="module-og_webgl_types.html">og/webgl/types</a></div><div class="sidebar-section-children"><a href="module-og_webgl_variableHandlers.html">og/webgl/variableHandlers</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="sidebar-classes"><div>Classes</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="AtmosphereConfig.html">AtmosphereConfig</a></div><div class="sidebar-section-children"><a href="BaseBillboard.html">BaseBillboard</a></div><div class="sidebar-section-children"><a href="BaseBillboardHandler.html">BaseBillboardHandler</a></div><div class="sidebar-section-children"><a href="BaseGeoImage.html">BaseGeoImage</a></div><div class="sidebar-section-children"><a href="BaseNode.html">BaseNode</a></div><div class="sidebar-section-children"><a href="Billboard.html">Billboard</a></div><div class="sidebar-section-children"><a href="BillboardHandler.html">BillboardHandler</a></div><div class="sidebar-section-children"><a href="Box.html">Box</a></div><div class="sidebar-section-children"><a href="Camera.html">Camera</a></div><div class="sidebar-section-children"><a href="CanvasTiles.html">CanvasTiles</a></div><div class="sidebar-section-children"><a href="Clock.html">Clock</a></div><div class="sidebar-section-children"><a href="CompassButton.html">CompassButton</a></div><div class="sidebar-section-children"><a href="Cons.html">Cons</a></div><div class="sidebar-section-children"><a href="Control.html">Control</a></div><div class="sidebar-section-children"><a href="DrawingSwitcher.html">DrawingSwitcher</a></div><div class="sidebar-section-children"><a href="EarthCoordinates.html">EarthCoordinates</a></div><div class="sidebar-section-children"><a href="ElevationProfile.html">ElevationProfile</a></div><div class="sidebar-section-children"><a href="Ellipsoid.html">Ellipsoid</a></div><div class="sidebar-section-children"><a href="EmptyTerrain.html">EmptyTerrain</a></div><div class="sidebar-section-children"><a href="Entity.html">Entity</a></div><div class="sidebar-section-children"><a href="EntityCollection.html">EntityCollection</a></div><div class="sidebar-section-children"><a href="EntityCollectionNode.html">EntityCollectionNode</a></div><div class="sidebar-section-children"><a href="Events.html">Events</a></div><div class="sidebar-section-children"><a href="Extent.html">Extent</a></div><div class="sidebar-section-children"><a href="Framebuffer.html">Framebuffer</a></div><div class="sidebar-section-children"><a href="Frustum.html">Frustum</a></div><div class="sidebar-section-children"><a href="GeoImage.html">GeoImage</a></div><div class="sidebar-section-children"><a href="GeoObject.html">GeoObject</a></div><div class="sidebar-section-children"><a href="GeoVideo.html">GeoVideo</a></div><div class="sidebar-section-children"><a href="Globe.html">Globe</a></div><div class="sidebar-section-children"><a href="GlobusTerrain.html">GlobusTerrain</a></div><div class="sidebar-section-children"><a href="Handler.html">Handler</a></div><div class="sidebar-section-children"><a href="ImageCanvas.html">ImageCanvas</a></div><div class="sidebar-section-children"><a href="KML.html">KML</a></div><div class="sidebar-section-children"><a href="KeyboardNavigation.html">KeyboardNavigation</a></div><div class="sidebar-section-children"><a href="Label.html">Label</a></div><div class="sidebar-section-children"><a href="Layer.html">Layer</a></div><div class="sidebar-section-children"><a href="LayerSwitcher.html">LayerSwitcher</a></div><div class="sidebar-section-children"><a href="Lighting.html">Lighting</a></div><div class="sidebar-section-children"><a href="Line3.html">Line3</a></div><div class="sidebar-section-children"><a href="LonLat.html">LonLat</a></div><div class="sidebar-section-children"><a href="global.html#Mat3">Mat3</a></div><div class="sidebar-section-children"><a href="global.html#Mat4">Mat4</a></div><div class="sidebar-section-children"><a href="Material.html">Material</a></div><div class="sidebar-section-children"><a href="MouseNavigation.html">MouseNavigation</a></div><div class="sidebar-section-children"><a href="Multisample.html">Multisample</a></div><div class="sidebar-section-children"><a href="Node.html">Node</a></div><div class="sidebar-section-children"><a href="OldMouseNavigation.html">OldMouseNavigation</a></div><div class="sidebar-section-children"><a href="Plane.html">Plane</a></div><div class="sidebar-section-children"><a href="Planet.html">Planet</a></div><div class="sidebar-section-children"><a href="PlanetCamera.html">PlanetCamera</a></div><div class="sidebar-section-children"><a href="PointCloud.html">PointCloud</a></div><div class="sidebar-section-children"><a href="Polyline.html">Polyline</a></div><div class="sidebar-section-children"><a href="Program.html">Program</a></div><div class="sidebar-section-children"><a href="ProgramController.html">ProgramController</a></div><div class="sidebar-section-children"><a href="global.html#Quat">Quat</a></div><div class="sidebar-section-children"><a href="Ray.html">Ray</a></div><div class="sidebar-section-children"><a href="Ray.html">Ray</a></div><div class="sidebar-section-children"><a href="Rectangle.html">Rectangle</a></div><div class="sidebar-section-children"><a href="RenderNode.html">RenderNode</a></div><div class="sidebar-section-children"><a href="Renderer.html">Renderer</a></div><div class="sidebar-section-children"><a href="RendererEvents.html">RendererEvents</a></div><div class="sidebar-section-children"><a href="RgbTerrain.html">RgbTerrain</a></div><div class="sidebar-section-children"><a href="RulerSwitcher.html">RulerSwitcher</a></div><div class="sidebar-section-children"><a href="ScaleControl.html">ScaleControl</a></div><div class="sidebar-section-children"><a href="Segment.html">Segment</a></div><div class="sidebar-section-children"><a href="Segment.html">Segment</a></div><div class="sidebar-section-children"><a href="SegmentBoundVisualization.html">SegmentBoundVisualization</a></div><div class="sidebar-section-children"><a href="SegmentLonLat.html">SegmentLonLat</a></div><div class="sidebar-section-children"><a href="Selection.html">Selection</a></div><div class="sidebar-section-children"><a href="ShowFps.html">ShowFps</a></div><div class="sidebar-section-children"><a href="SimpleNavigation.html">SimpleNavigation</a></div><div class="sidebar-section-children"><a href="Sphere.html">Sphere</a></div><div class="sidebar-section-children">Stack.&lt;<a href="global.html#T">T</a>></div><div class="sidebar-section-children"><a href="Strip.html">Strip</a></div><div class="sidebar-section-children"><a href="Sun.html">Sun</a></div><div class="sidebar-section-children"><a href="TextureAtlas.html">TextureAtlas</a></div><div class="sidebar-section-children"><a href="TextureAtlas.html">TextureAtlas</a></div><div class="sidebar-section-children"><a href="ToggleWireframe.html">ToggleWireframe</a></div><div class="sidebar-section-children"><a href="TouchNavigation.html">TouchNavigation</a></div><div class="sidebar-section-children"><a href="global.html#Vec2">Vec2</a></div><div class="sidebar-section-children"><a href="global.html#Vec3">Vec3</a></div><div class="sidebar-section-children"><a href="global.html#Vec4">Vec4</a></div><div class="sidebar-section-children"><a href="Vector.html">Vector</a></div><div class="sidebar-section-children"><a href="WMS.html">WMS</a></div><div class="sidebar-section-children"><a href="XYZ.html">XYZ</a></div><div class="sidebar-section-children"><a href="ZoomControl.html">ZoomControl</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="sidebar-events"><div>Events</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="EntityCollection.html#event:add">add</a></div><div class="sidebar-section-children"><a href="EntityCollection.html#event:doubletouch">doubletouch</a></div><div class="sidebar-section-children"><a href="EntityCollection.html#event:draw">draw</a></div><div class="sidebar-section-children"><a href="EntityCollection.html#event:drawend">drawend</a></div><div class="sidebar-section-children"><a href="EntityCollection.html#event:entityadd">entityadd</a></div><div class="sidebar-section-children"><a href="EntityCollection.html#event:entityremove">entityremove</a></div><div class="sidebar-section-children"><a href="EntityCollection.html#event:lclick">lclick</a></div><div class="sidebar-section-children"><a href="EntityCollection.html#event:ldblclick">ldblclick</a></div><div class="sidebar-section-children"><a href="EntityCollection.html#event:ldown">ldown</a></div><div class="sidebar-section-children"><a href="EntityCollection.html#event:lhold">lhold</a></div><div class="sidebar-section-children"><a href="EntityCollection.html#event:lup">lup</a></div><div class="sidebar-section-children"><a href="EntityCollection.html#event:mclick">mclick</a></div><div class="sidebar-section-children"><a href="EntityCollection.html#event:mdblclick">mdblclick</a></div><div class="sidebar-section-children"><a href="EntityCollection.html#event:mdown">mdown</a></div><div class="sidebar-section-children"><a href="EntityCollection.html#event:mhold">mhold</a></div><div class="sidebar-section-children"><a href="EntityCollection.html#event:mouseenter">mouseenter</a></div><div class="sidebar-section-children"><a href="EntityCollection.html#event:mouseleave">mouseleave</a></div><div class="sidebar-section-children"><a href="EntityCollection.html#event:mousemove">mousemove</a></div><div class="sidebar-section-children"><a href="EntityCollection.html#event:mousewheel">mousewheel</a></div><div class="sidebar-section-children"><a href="EntityCollection.html#event:mup">mup</a></div><div class="sidebar-section-children"><a href="EntityCollection.html#event:rclick">rclick</a></div><div class="sidebar-section-children"><a href="EntityCollection.html#event:rdblclick">rdblclick</a></div><div class="sidebar-section-children"><a href="EntityCollection.html#event:rdown">rdown</a></div><div class="sidebar-section-children"><a href="EntityCollection.html#event:remove">remove</a></div><div class="sidebar-section-children"><a href="EntityCollection.html#event:rhold">rhold</a></div><div class="sidebar-section-children"><a href="EntityCollection.html#event:rup">rup</a></div><div class="sidebar-section-children"><a href="EntityCollection.html#event:touchend">touchend</a></div><div class="sidebar-section-children"><a href="EntityCollection.html#event:touchenter">touchenter</a></div><div class="sidebar-section-children"><a href="EntityCollection.html#event:touchleave">touchleave</a></div><div class="sidebar-section-children"><a href="EntityCollection.html#event:touchmove">touchmove</a></div><div class="sidebar-section-children"><a href="EntityCollection.html#event:touchstart">touchstart</a></div><div class="sidebar-section-children"><a href="EntityCollection.html#event:visibilitychange">visibilitychange</a></div><div class="sidebar-section-children"><a href="EventsHandler_BaseGeoImageEventsList_.html#event:loadend">loadend</a></div><div class="sidebar-section-children"><a href="EventsHandler_VectorEventsList_.html#event:draw">draw</a></div><div class="sidebar-section-children"><a href="EventsHandler_VectorEventsList_.html#event:entityadd">entityadd</a></div><div class="sidebar-section-children"><a href="EventsHandler_VectorEventsList_.html#event:entityremove">entityremove</a></div><div class="sidebar-section-children"><a href="global.html#event:#load">#load</a></div><div class="sidebar-section-children"><a href="global.html#event:#loadend">#loadend</a></div><div class="sidebar-section-children"><a href="og.Camera.html#event:flyend">flyend</a></div><div class="sidebar-section-children"><a href="og.Camera.html#event:flystart">flystart</a></div><div class="sidebar-section-children"><a href="og.Camera.html#event:flystop">flystop</a></div><div class="sidebar-section-children"><a href="og.Camera.html#event:moveend">moveend</a></div><div class="sidebar-section-children"><a href="og.Camera.html#event:viewchange">viewchange</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:add">add</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:doubletouch">doubletouch</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:lclick">lclick</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:ldblclick">ldblclick</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:ldown">ldown</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:lhold">lhold</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:lup">lup</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:mclick">mclick</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:mdblclick">mdblclick</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:mdown">mdown</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:mhold">mhold</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:mouseenter">mouseenter</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:mouseenter">mouseenter</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:mousemove">mousemove</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:mousewheel">mousewheel</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:mup">mup</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:rclick">rclick</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:rdblclick">rdblclick</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:rdown">rdown</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:remove">remove</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:rhold">rhold</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:rup">rup</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:touchend">touchend</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:touchenter">touchenter</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:touchleave">touchleave</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:touchmove">touchmove</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:touchstart">touchstart</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:visibilitychange">visibilitychange</a></div><div class="sidebar-section-children"><a href="og.MouseNavigation.html#event:drag">drag</a></div><div class="sidebar-section-children"><a href="og.MouseNavigation.html#event:rotate">rotate</a></div><div class="sidebar-section-children"><a href="og.MouseNavigation.html#event:zoom">zoom</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:doubletouch">doubletouch</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:draw">draw</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:drawtransparent">drawtransparent</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:lclick">lclick</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:ldblclick">ldblclick</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:ldown">ldown</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:lhold">lhold</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:lup">lup</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:mclick">mclick</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:mdblclick">mdblclick</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:mdown">mdown</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:mhold">mhold</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:mouseenter">mouseenter</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:mouseleave">mouseleave</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:mousemove">mousemove</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:mousestop">mousestop</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:mousewheel">mousewheel</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:mup">mup</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:postdraw">postdraw</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:rclick">rclick</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:rdblclick">rdblclick</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:rdown">rdown</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:resize">resize</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:resizeend">resizeend</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:rhold">rhold</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:rup">rup</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:touchcancel">touchcancel</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:touchend">touchend</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:touchenter">touchenter</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:touchleave">touchleave</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:touchmove">touchmove</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:touchstart">touchstart</a></div><div class="sidebar-section-children"><a href="og.TouchNavigation.html#event:doubletapzoom">doubletapzoom</a></div><div class="sidebar-section-children"><a href="og.TouchNavigation.html#event:drag">drag</a></div><div class="sidebar-section-children"><a href="og.TouchNavigation.html#event:rotate">rotate</a></div><div class="sidebar-section-children"><a href="og.layer.CanvasTiles.html#event:load">load</a></div><div class="sidebar-section-children"><a href="og.layer.CanvasTiles.html#event:loadend">loadend</a></div><div class="sidebar-section-children"><a href="og.scene.Planet.html#event:baselayerchange">baselayerchange</a></div><div class="sidebar-section-children"><a href="og.scene.Planet.html#event:draw">draw</a></div><div class="sidebar-section-children"><a href="og.scene.Planet.html#event:layeradd">layeradd</a></div><div class="sidebar-section-children"><a href="og.scene.Planet.html#event:layerremove">layerremove</a></div><div class="sidebar-section-children"><a href="og.scene.Planet.html#event:layervisibilitychange">layervisibilitychange</a></div><div class="sidebar-section-children"><a href="og.scene.Planet.html#event:rendercompleted">rendercompleted</a></div><div class="sidebar-section-children"><a href="og.scene.Planet.html#event:terraincompleted">terraincompleted</a></div><div class="sidebar-section-children"><a href="og.scene.Planet.html#event:terraincompleted">terraincompleted</a></div><div class="sidebar-section-children"><a href="og.terrain.GlobusTerrain.html#event:load">load</a></div><div class="sidebar-section-children"><a href="og.terrain.GlobusTerrain.html#event:loadend">loadend</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="sidebar-global"><div>Global</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="global.html#ARCSECONDS_TO_RADIANS">ARCSECONDS_TO_RADIANS</a></div><div class="sidebar-section-children"><a href="global.html#AU_TO_METERS">AU_TO_METERS</a></div><div class="sidebar-section-children"><a href="global.html#COMSIDE">COMSIDE</a></div><div class="sidebar-section-children"><a href="global.html#DAYS_PER_JULIAN_CENTURY">DAYS_PER_JULIAN_CENTURY</a></div><div class="sidebar-section-children"><a href="global.html#DAYS_PER_JULIAN_YEAR">DAYS_PER_JULIAN_YEAR</a></div><div class="sidebar-section-children"><a href="global.html#DEFAULT_MAX_NODES">DEFAULT_MAX_NODES</a></div><div class="sidebar-section-children"><a href="global.html#DEG2RAD">DEG2RAD</a></div><div class="sidebar-section-children"><a href="global.html#DEGREES">DEGREES</a></div><div class="sidebar-section-children"><a href="global.html#DEGREES_DOUBLE">DEGREES_DOUBLE</a></div><div class="sidebar-section-children"><a href="global.html#DEGREES_TO_HOURS">DEGREES_TO_HOURS</a></div><div class="sidebar-section-children"><a href="global.html#DateToTAI">DateToTAI</a></div><div class="sidebar-section-children"><a href="global.html#DateToUTC">DateToUTC</a></div><div class="sidebar-section-children"><a href="global.html#EARTH_GRAVITATIONAL_PARAMETER">EARTH_GRAVITATIONAL_PARAMETER</a></div><div class="sidebar-section-children"><a href="global.html#ExtentBoundingBox">ExtentBoundingBox</a></div><div class="sidebar-section-children"><a href="global.html#HOURS_PER_DAY">HOURS_PER_DAY</a></div><div class="sidebar-section-children"><a href="global.html#HOURS_TO_DEGREES">HOURS_TO_DEGREES</a></div><div class="sidebar-section-children"><a href="global.html#HOURS_TO_RADIANS">HOURS_TO_RADIANS</a></div><div class="sidebar-section-children"><a href="global.html#HandlerEventType">HandlerEventType</a></div><div class="sidebar-section-children"><a href="global.html#IEntityParams">IEntityParams</a></div><div class="sidebar-section-children"><a href="global.html#IGeoObjectParams">IGeoObjectParams</a></div><div class="sidebar-section-children"><a href="global.html#J2000">J2000</a></div><div class="sidebar-section-children"><a href="global.html#J2000_OBLIQUITY">J2000_OBLIQUITY</a></div><div class="sidebar-section-children"><a href="global.html#LOG2">LOG2</a></div><div class="sidebar-section-children"><a href="global.html#MAX">MAX</a></div><div class="sidebar-section-children"><a href="global.html#MAX32">MAX32</a></div><div class="sidebar-section-children"><a href="global.html#MAX_LAT">MAX_LAT</a></div><div class="sidebar-section-children"><a href="global.html#METERS_PER_UNIT">METERS_PER_UNIT</a></div><div class="sidebar-section-children"><a href="global.html#MILLISECONDS_PER_DAY">MILLISECONDS_PER_DAY</a></div><div class="sidebar-section-children"><a href="global.html#MILLISECONDS_PER_SECOND">MILLISECONDS_PER_SECOND</a></div><div class="sidebar-section-children"><a href="global.html#MIN">MIN</a></div><div class="sidebar-section-children"><a href="global.html#MINUTES_PER_DAY">MINUTES_PER_DAY</a></div><div class="sidebar-section-children"><a href="global.html#MINUTES_PER_HOUR">MINUTES_PER_HOUR</a></div><div class="sidebar-section-children"><a href="global.html#MIN_LAT">MIN_LAT</a></div><div class="sidebar-section-children"><a href="global.html#MODIFIED_JULIAN_DATE_DIFFERENCE">MODIFIED_JULIAN_DATE_DIFFERENCE</a></div><div class="sidebar-section-children"><a href="global.html#Mat3">Mat3</a></div><div class="sidebar-section-children"><a href="global.html#Mat4">Mat4</a></div><div class="sidebar-section-children"><a href="global.html#NEIGHBOUR">NEIGHBOUR</a></div><div class="sidebar-section-children"><a href="global.html#NOPSORD">NOPSORD</a></div><div class="sidebar-section-children"><a href="global.html#ONE_BY_HOURS_PER_DAY">ONE_BY_HOURS_PER_DAY</a></div><div class="sidebar-section-children"><a href="global.html#ONE_BY_MILLISECONDS_PER_DAY">ONE_BY_MILLISECONDS_PER_DAY</a></div><div class="sidebar-section-children"><a href="global.html#ONE_BY_MINUTES_PER_DAY">ONE_BY_MINUTES_PER_DAY</a></div><div class="sidebar-section-children"><a href="global.html#ONE_BY_POLE_DOUBLE">ONE_BY_POLE_DOUBLE</a></div><div class="sidebar-section-children"><a href="global.html#ONE_BY_SECONDS_PER_DAY">ONE_BY_SECONDS_PER_DAY</a></div><div class="sidebar-section-children"><a href="global.html#ONE_BY_SECONDS_PER_HOUR">ONE_BY_SECONDS_PER_HOUR</a></div><div class="sidebar-section-children"><a href="global.html#ONE_BY_SECONDS_PER_MINUTE">ONE_BY_SECONDS_PER_MINUTE</a></div><div class="sidebar-section-children"><a href="global.html#OPPART">OPPART</a></div><div class="sidebar-section-children"><a href="global.html#OPSIDE">OPSIDE</a></div><div class="sidebar-section-children"><a href="global.html#PARTOFFSET">PARTOFFSET</a></div><div class="sidebar-section-children"><a href="global.html#PICOSECOND">PICOSECOND</a></div><div class="sidebar-section-children"><a href="global.html#PI_TWO">PI_TWO</a></div><div class="sidebar-section-children"><a href="global.html#PLANET_NAME_PREFIX">PLANET_NAME_PREFIX</a></div><div class="sidebar-section-children"><a href="global.html#POLE">POLE</a></div><div class="sidebar-section-children"><a href="global.html#POLE_DOUBLE">POLE_DOUBLE</a></div><div class="sidebar-section-children"><a href="global.html#Quat">Quat</a></div><div class="sidebar-section-children"><a href="global.html#QuatAxisAngle">QuatAxisAngle</a></div><div class="sidebar-section-children"><a href="global.html#RAD2DEG">RAD2DEG</a></div><div class="sidebar-section-children"><a href="global.html#RADIANS">RADIANS</a></div><div class="sidebar-section-children"><a href="global.html#RADIANS_HALF">RADIANS_HALF</a></div><div class="sidebar-section-children"><a href="global.html#RADIANS_TO_HOURS">RADIANS_TO_HOURS</a></div><div class="sidebar-section-children"><a href="global.html#SAFE">SAFE</a></div><div class="sidebar-section-children"><a href="global.html#SECONDS_PER_12_HOURS">SECONDS_PER_12_HOURS</a></div><div class="sidebar-section-children"><a href="global.html#SECONDS_PER_DAY">SECONDS_PER_DAY</a></div><div class="sidebar-section-children"><a href="global.html#SECONDS_PER_HOUR">SECONDS_PER_HOUR</a></div><div class="sidebar-section-children"><a href="global.html#SECONDS_PER_MILLISECOND">SECONDS_PER_MILLISECOND</a></div><div class="sidebar-section-children"><a href="global.html#SECONDS_PER_MINUTE">SECONDS_PER_MINUTE</a></div><div class="sidebar-section-children"><a href="global.html#SQRT_HALF">SQRT_HALF</a></div><div class="sidebar-section-children"><a href="global.html#STR2ALIGN">STR2ALIGN</a></div><div class="sidebar-section-children"><a href="global.html#SUN_GRAVITATIONAL_PARAMETER">SUN_GRAVITATIONAL_PARAMETER</a></div><div class="sidebar-section-children"><a href="global.html#T">T</a></div><div class="sidebar-section-children"><a href="global.html#TAItoDate">TAItoDate</a></div><div class="sidebar-section-children"><a href="global.html#TAItoTDB">TAItoTDB</a></div><div class="sidebar-section-children"><a href="global.html#TAItoUTC">TAItoUTC</a></div><div class="sidebar-section-children"><a href="global.html#TDT_TAI">TDT_TAI</a></div><div class="sidebar-section-children"><a href="global.html#TRACK">TRACK</a></div><div class="sidebar-section-children"><a href="global.html#TWO_PI">TWO_PI</a></div><div class="sidebar-section-children"><a href="global.html#UTCtoDate">UTCtoDate</a></div><div class="sidebar-section-children"><a href="global.html#UTCtoTAI">UTCtoTAI</a></div><div class="sidebar-section-children"><a href="global.html#Units">Units</a></div><div class="sidebar-section-children"><a href="global.html#Vec2">Vec2</a></div><div class="sidebar-section-children"><a href="global.html#Vec3">Vec3</a></div><div class="sidebar-section-children"><a href="global.html#Vec4">Vec4</a></div><div class="sidebar-section-children"><a href="global.html#_currPickingColor">_currPickingColor</a></div><div class="sidebar-section-children"><a href="global.html#_entitiesConstructor">_entitiesConstructor</a></div><div class="sidebar-section-children"><a href="global.html#_prevPickingColor">_prevPickingColor</a></div><div class="sidebar-section-children"><a href="global.html#addDays">addDays</a></div><div class="sidebar-section-children"><a href="global.html#addHours">addHours</a></div><div class="sidebar-section-children"><a href="global.html#addMilliseconds">addMilliseconds</a></div><div class="sidebar-section-children"><a href="global.html#addMinutes">addMinutes</a></div><div class="sidebar-section-children"><a href="global.html#addSeconds">addSeconds</a></div><div class="sidebar-section-children"><a href="global.html#bezier3v">bezier3v</a></div><div class="sidebar-section-children"><a href="global.html#clamp">clamp</a></div><div class="sidebar-section-children"><a href="global.html#daysToSeconds">daysToSeconds</a></div><div class="sidebar-section-children"><a href="global.html#degToDec">degToDec</a></div><div class="sidebar-section-children"><a href="global.html#equationCallback">equationCallback</a></div><div class="sidebar-section-children"><a href="global.html#exp2">exp2</a></div><div class="sidebar-section-children"><a href="global.html#forwardArray">forwardArray</a></div><div class="sidebar-section-children"><a href="global.html#forward_lat">forward_lat</a></div><div class="sidebar-section-children"><a href="global.html#forward_lon">forward_lon</a></div><div class="sidebar-section-children"><a href="global.html#frac">frac</a></div><div class="sidebar-section-children"><a href="global.html#getAngleBetweenAzimuths">getAngleBetweenAzimuths</a></div><div class="sidebar-section-children"><a href="global.html#getAngleDirection">getAngleDirection</a></div><div class="sidebar-section-children"><a href="global.html#getDayNumber">getDayNumber</a></div><div class="sidebar-section-children"><a href="global.html#getDays">getDays</a></div><div class="sidebar-section-children"><a href="global.html#getHours">getHours</a></div><div class="sidebar-section-children"><a href="global.html#getMilliseconds">getMilliseconds</a></div><div class="sidebar-section-children"><a href="global.html#getMinutes">getMinutes</a></div><div class="sidebar-section-children"><a href="global.html#getSeconds">getSeconds</a></div><div class="sidebar-section-children"><a href="global.html#getSunPosition">getSunPosition</a></div><div class="sidebar-section-children"><a href="global.html#getTileX">getTileX</a></div><div class="sidebar-section-children"><a href="global.html#getTileY">getTileY</a></div><div class="sidebar-section-children"><a href="global.html#inverse_lat">inverse_lat</a></div><div class="sidebar-section-children"><a href="global.html#inverse_lon">inverse_lon</a></div><div class="sidebar-section-children"><a href="global.html#isPowerOfTwo">isPowerOfTwo</a></div><div class="sidebar-section-children"><a href="global.html#lerp">lerp</a></div><div class="sidebar-section-children"><a href="global.html#log">log</a></div><div class="sidebar-section-children"><a href="global.html#log2">log2</a></div><div class="sidebar-section-children"><a href="global.html#mars">mars</a></div><div class="sidebar-section-children"><a href="global.html#mod">mod</a></div><div class="sidebar-section-children"><a href="global.html#moon">moon</a></div><div class="sidebar-section-children"><a href="global.html#negativePItoPI">negativePItoPI</a></div><div class="sidebar-section-children"><a href="global.html#nextHighestPowerOfTwo">nextHighestPowerOfTwo</a></div><div class="sidebar-section-children"><a href="global.html#norm_lon">norm_lon</a></div><div class="sidebar-section-children"><a href="global.html#pow2i">pow2i</a></div><div class="sidebar-section-children"><a href="global.html#random">random</a></div><div class="sidebar-section-children"><a href="global.html#randomi">randomi</a></div><div class="sidebar-section-children"><a href="global.html#rev">rev</a></div><div class="sidebar-section-children"><a href="global.html#secondsToDays">secondsToDays</a></div><div class="sidebar-section-children"><a href="global.html#slice">slice</a></div><div class="sidebar-section-children"><a href="global.html#solve_iteration">solve_iteration</a></div><div class="sidebar-section-children"><a href="global.html#solve_iteration_fixed">solve_iteration_fixed</a></div><div class="sidebar-section-children"><a href="global.html#step">step</a></div><div class="sidebar-section-children"><a href="global.html#visibleExtent">visibleExtent</a></div><div class="sidebar-section-children"><a href="global.html#wgs84">wgs84</a></div><div class="sidebar-section-children"><a href="global.html#zeroTwoPI">zeroTwoPI</a></div></div></div><div class="mobile-navbar-actions"><div class="navbar-right-item"><button class="icon-button search-button" aria-label="open-search"><svg><use xlink:href="#search-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button theme-toggle" aria-label="toggle-theme"><svg><use class="theme-svg-use" xlink:href="#light-theme-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button font-size" aria-label="change-font-size"><svg><use xlink:href="#font-size-icon"></use></svg></button></div></div></div></div><script type="text/javascript" src="scripts/core.min.js"></script><script src="scripts/search.min.js" defer="defer"></script><script src="scripts/third-party/fuse.js" defer="defer"></script><script type="text/javascript">var tocbotInstance=tocbot.init({tocSelector:"#eed4d2a0bfd64539bb9df78095dec881",contentSelector:".main-content",headingSelector:"h1, h2, h3",hasInnerContainers:!0,scrollContainer:".main-content",headingsOffset:130,onClick:bringLinkToView})</script></body></html>