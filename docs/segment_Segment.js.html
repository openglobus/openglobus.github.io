<!DOCTYPE html><html lang="en" style="font-size:16px"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" href="https://openglobus.github.io/favicon.ico"><title>Source: segment/Segment.js</title><!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]--><script src="scripts/third-party/hljs.js" defer="defer"></script><script src="scripts/third-party/hljs-line-num.js" defer="defer"></script><script src="scripts/third-party/popper.js" defer="defer"></script><script src="scripts/third-party/tippy.js" defer="defer"></script><script src="scripts/third-party/tocbot.min.js"></script><script>var baseURL="/",locationPathname="";baseURL=(baseURL=(baseURL="https://openglobus.github.io/docs/").replace(/https?:\/\//i,"")).substr(baseURL.indexOf("/"))</script><link rel="stylesheet" href="styles/clean-jsdoc-theme.min.css"><svg aria-hidden="true" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="display:none"><defs><symbol id="copy-icon" viewbox="0 0 488.3 488.3"><g><path d="M314.25,85.4h-227c-21.3,0-38.6,17.3-38.6,38.6v325.7c0,21.3,17.3,38.6,38.6,38.6h227c21.3,0,38.6-17.3,38.6-38.6V124    C352.75,102.7,335.45,85.4,314.25,85.4z M325.75,449.6c0,6.4-5.2,11.6-11.6,11.6h-227c-6.4,0-11.6-5.2-11.6-11.6V124    c0-6.4,5.2-11.6,11.6-11.6h227c6.4,0,11.6,5.2,11.6,11.6V449.6z"/><path d="M401.05,0h-227c-21.3,0-38.6,17.3-38.6,38.6c0,7.5,6,13.5,13.5,13.5s13.5-6,13.5-13.5c0-6.4,5.2-11.6,11.6-11.6h227    c6.4,0,11.6,5.2,11.6,11.6v325.7c0,6.4-5.2,11.6-11.6,11.6c-7.5,0-13.5,6-13.5,13.5s6,13.5,13.5,13.5c21.3,0,38.6-17.3,38.6-38.6    V38.6C439.65,17.3,422.35,0,401.05,0z"/></g></symbol><symbol id="search-icon" viewBox="0 0 512 512"><g><g><path d="M225.474,0C101.151,0,0,101.151,0,225.474c0,124.33,101.151,225.474,225.474,225.474    c124.33,0,225.474-101.144,225.474-225.474C450.948,101.151,349.804,0,225.474,0z M225.474,409.323    c-101.373,0-183.848-82.475-183.848-183.848S124.101,41.626,225.474,41.626s183.848,82.475,183.848,183.848    S326.847,409.323,225.474,409.323z"/></g></g><g><g><path d="M505.902,476.472L386.574,357.144c-8.131-8.131-21.299-8.131-29.43,0c-8.131,8.124-8.131,21.306,0,29.43l119.328,119.328    c4.065,4.065,9.387,6.098,14.715,6.098c5.321,0,10.649-2.033,14.715-6.098C514.033,497.778,514.033,484.596,505.902,476.472z"/></g></g></symbol><symbol id="font-size-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M11.246 15H4.754l-2 5H.6L7 4h2l6.4 16h-2.154l-2-5zm-.8-2L8 6.885 5.554 13h4.892zM21 12.535V12h2v8h-2v-.535a4 4 0 1 1 0-6.93zM19 18a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"/></symbol><symbol id="add-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M11 11V5h2v6h6v2h-6v6h-2v-6H5v-2z"/></symbol><symbol id="minus-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M5 11h14v2H5z"/></symbol><symbol id="dark-theme-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M10 7a7 7 0 0 0 12 4.9v.1c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2h.1A6.979 6.979 0 0 0 10 7zm-6 5a8 8 0 0 0 15.062 3.762A9 9 0 0 1 8.238 4.938 7.999 7.999 0 0 0 4 12z"/></symbol><symbol id="light-theme-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M12 18a6 6 0 1 1 0-12 6 6 0 0 1 0 12zm0-2a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM11 1h2v3h-2V1zm0 19h2v3h-2v-3zM3.515 4.929l1.414-1.414L7.05 5.636 5.636 7.05 3.515 4.93zM16.95 18.364l1.414-1.414 2.121 2.121-1.414 1.414-2.121-2.121zm2.121-14.85l1.414 1.415-2.121 2.121-1.414-1.414 2.121-2.121zM5.636 16.95l1.414 1.414-2.121 2.121-1.414-1.414 2.121-2.121zM23 11v2h-3v-2h3zM4 11v2H1v-2h3z"/></symbol><symbol id="reset-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M18.537 19.567A9.961 9.961 0 0 1 12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10c0 2.136-.67 4.116-1.81 5.74L17 12h3a8 8 0 1 0-2.46 5.772l.997 1.795z"/></symbol><symbol id="down-icon" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.7803 6.21967C13.0732 6.51256 13.0732 6.98744 12.7803 7.28033L8.53033 11.5303C8.23744 11.8232 7.76256 11.8232 7.46967 11.5303L3.21967 7.28033C2.92678 6.98744 2.92678 6.51256 3.21967 6.21967C3.51256 5.92678 3.98744 5.92678 4.28033 6.21967L8 9.93934L11.7197 6.21967C12.0126 5.92678 12.4874 5.92678 12.7803 6.21967Z"></path></symbol><symbol id="codepen-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M16.5 13.202L13 15.535v3.596L19.197 15 16.5 13.202zM14.697 12L12 10.202 9.303 12 12 13.798 14.697 12zM20 10.869L18.303 12 20 13.131V10.87zM19.197 9L13 4.869v3.596l3.5 2.333L19.197 9zM7.5 10.798L11 8.465V4.869L4.803 9 7.5 10.798zM4.803 15L11 19.131v-3.596l-3.5-2.333L4.803 15zM4 13.131L5.697 12 4 10.869v2.262zM2 9a1 1 0 0 1 .445-.832l9-6a1 1 0 0 1 1.11 0l9 6A1 1 0 0 1 22 9v6a1 1 0 0 1-.445.832l-9 6a1 1 0 0 1-1.11 0l-9-6A1 1 0 0 1 2 15V9z"/></symbol><symbol id="close-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M12 10.586l4.95-4.95 1.414 1.414-4.95 4.95 4.95 4.95-1.414 1.414-4.95-4.95-4.95 4.95-1.414-1.414 4.95-4.95-4.95-4.95L7.05 5.636z"/></symbol><symbol id="menu-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M3 4h18v2H3V4zm0 7h18v2H3v-2zm0 7h18v2H3v-2z"/></symbol></defs></svg></head><body class="dark" data-theme="dark"><div class="sidebar-container"><div class="sidebar" id="sidebar"><a href="/" class="sidebar-title sidebar-title-anchor">Openglobus</a><div class="sidebar-items-container"><div class="sidebar-section-title with-arrow" data-isopen="false" id="8ZQgI2FVTwRHQRn6b4gvT"><div>Modules</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="module-og_Globe.html">og/Globe</a></div><div class="sidebar-section-children"><a href="module-og_math.html">og/math</a></div><div class="sidebar-section-children"><a href="module-og_math_coder.html">og/math/coder</a></div><div class="sidebar-section-children"><a href="module-og_mercator.html">og/mercator</a></div><div class="sidebar-section-children"><a href="module-og_proj_EPSG3857.html">og/proj/EPSG3857</a></div><div class="sidebar-section-children"><a href="module-og_proj_EPSG4326.html">og/proj/EPSG4326</a></div><div class="sidebar-section-children"><a href="module-og_segment_SegmentHelper.html">og/segment/SegmentHelper</a></div><div class="sidebar-section-children"><a href="module-og_utils_earcut.html">og/utils/earcut</a></div><div class="sidebar-section-children"><a href="module-og_utils_shared.html">og/utils/shared</a></div><div class="sidebar-section-children"><a href="module-og_webgl_callbacks.html">og/webgl/callbacks</a></div><div class="sidebar-section-children"><a href="module-og_webgl_types.html">og/webgl/types</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="UPZpnc1JpQ6bEJjRqi6uT"><div>Classes</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="Atmosphere.html">Atmosphere</a></div><div class="sidebar-section-children"><a href="BaseBillboard.html">BaseBillboard</a></div><div class="sidebar-section-children"><a href="BaseGeoImage.html">BaseGeoImage</a></div><div class="sidebar-section-children"><a href="BaseNode.html">BaseNode</a></div><div class="sidebar-section-children"><a href="Billboard.html">Billboard</a></div><div class="sidebar-section-children"><a href="BillboardHandler.html">BillboardHandler</a></div><div class="sidebar-section-children"><a href="Box.html">Box</a></div><div class="sidebar-section-children"><a href="Camera.html">Camera</a></div><div class="sidebar-section-children"><a href="CanvasTiles.html">CanvasTiles</a></div><div class="sidebar-section-children"><a href="Clock.html">Clock</a></div><div class="sidebar-section-children"><a href="CompassButton.html">CompassButton</a></div><div class="sidebar-section-children"><a href="Cons.html">Cons</a></div><div class="sidebar-section-children"><a href="Control.html">Control</a></div><div class="sidebar-section-children"><a href="DebugInfo.html">DebugInfo</a></div><div class="sidebar-section-children"><a href="DrawingControl.html">DrawingControl</a></div><div class="sidebar-section-children"><a href="DrawingSwitcher.html">DrawingSwitcher</a></div><div class="sidebar-section-children"><a href="EarthCoordinates.html">EarthCoordinates</a></div><div class="sidebar-section-children"><a href="Ellipsoid.html">Ellipsoid</a></div><div class="sidebar-section-children"><a href="EmptyTerrain.html">EmptyTerrain</a></div><div class="sidebar-section-children"><a href="Entity.html">Entity</a></div><div class="sidebar-section-children"><a href="EntityCollection.html">EntityCollection</a></div><div class="sidebar-section-children"><a href="Events.html">Events</a></div><div class="sidebar-section-children"><a href="Extent.html">Extent</a></div><div class="sidebar-section-children"><a href="Framebuffer.html">Framebuffer</a></div><div class="sidebar-section-children"><a href="Frustum.html">Frustum</a></div><div class="sidebar-section-children"><a href="GeoImage.html">GeoImage</a></div><div class="sidebar-section-children"><a href="GeoObject.html">GeoObject</a></div><div class="sidebar-section-children"><a href="GeoVideo.html">GeoVideo</a></div><div class="sidebar-section-children"><a href="GlobusTerrain.html">GlobusTerrain</a></div><div class="sidebar-section-children"><a href="Handler.html">Handler</a></div><div class="sidebar-section-children"><a href="ICON_BUTTON_SVG.html">ICON_BUTTON_SVG</a></div><div class="sidebar-section-children"><a href="ImageCanvas.html">ImageCanvas</a></div><div class="sidebar-section-children"><a href="KML.html">KML</a></div><div class="sidebar-section-children"><a href="KeyboardNavigation.html">KeyboardNavigation</a></div><div class="sidebar-section-children"><a href="Label.html">Label</a></div><div class="sidebar-section-children"><a href="LabelHandler.html">LabelHandler</a></div><div class="sidebar-section-children"><a href="Layer.html">Layer</a></div><div class="sidebar-section-children"><a href="LayerAnimation.html">LayerAnimation</a></div><div class="sidebar-section-children"><a href="LayerSwitcher.html">LayerSwitcher</a></div><div class="sidebar-section-children"><a href="LightSource.html">LightSource</a></div><div class="sidebar-section-children"><a href="LonLat.html">LonLat</a></div><div class="sidebar-section-children"><a href="Mat3.html">Mat3</a></div><div class="sidebar-section-children"><a href="Mat4.html">Mat4</a></div><div class="sidebar-section-children"><a href="Material.html">Material</a></div><div class="sidebar-section-children"><a href="MouseNavigation.html">MouseNavigation</a></div><div class="sidebar-section-children"><a href="MouseWheelZoomControl.html">MouseWheelZoomControl</a></div><div class="sidebar-section-children"><a href="Multisample.html">Multisample</a></div><div class="sidebar-section-children"><a href="Node.html">Node</a></div><div class="sidebar-section-children"><a href="Plane.html">Plane</a></div><div class="sidebar-section-children"><a href="Planet.html">Planet</a></div><div class="sidebar-section-children"><a href="PlanetCamera.html">PlanetCamera</a></div><div class="sidebar-section-children"><a href="PointCloud.html">PointCloud</a></div><div class="sidebar-section-children"><a href="Polyline.html">Polyline</a></div><div class="sidebar-section-children"><a href="Program.html">Program</a></div><div class="sidebar-section-children"><a href="ProgramController.html">ProgramController</a></div><div class="sidebar-section-children"><a href="Quat.html">Quat</a></div><div class="sidebar-section-children"><a href="QueueArray.html">QueueArray</a></div><div class="sidebar-section-children"><a href="Ray.html">Ray</a></div><div class="sidebar-section-children"><a href="Ray.html">Ray</a></div><div class="sidebar-section-children"><a href="Rectangle.html">Rectangle</a></div><div class="sidebar-section-children"><a href="RenderNode.html">RenderNode</a></div><div class="sidebar-section-children"><a href="RendererEvents.html">RendererEvents</a></div><div class="sidebar-section-children"><a href="Ruler.html">Ruler</a></div><div class="sidebar-section-children"><a href="RulerSwitcher.html">RulerSwitcher</a></div><div class="sidebar-section-children"><a href="ScaleControl.html">ScaleControl</a></div><div class="sidebar-section-children"><a href="Segment.html">Segment</a></div><div class="sidebar-section-children"><a href="Segment.html">Segment</a></div><div class="sidebar-section-children"><a href="SegmentBoundVisualization.html">SegmentBoundVisualization</a></div><div class="sidebar-section-children"><a href="SegmentLonLat.html">SegmentLonLat</a></div><div class="sidebar-section-children"><a href="Selection.html">Selection</a></div><div class="sidebar-section-children"><a href="ShowFps.html">ShowFps</a></div><div class="sidebar-section-children"><a href="SimpleNavigation.html">SimpleNavigation</a></div><div class="sidebar-section-children"><a href="SimpleSkyBackground.html">SimpleSkyBackground</a></div><div class="sidebar-section-children"><a href="Sphere.html">Sphere</a></div><div class="sidebar-section-children"><a href="Stack.html">Stack</a></div><div class="sidebar-section-children"><a href="Strip.html">Strip</a></div><div class="sidebar-section-children"><a href="Sun.html">Sun</a></div><div class="sidebar-section-children"><a href="TextureAtlas.html">TextureAtlas</a></div><div class="sidebar-section-children"><a href="TextureAtlasNode.html">TextureAtlasNode</a></div><div class="sidebar-section-children"><a href="ToggleWireframe.html">ToggleWireframe</a></div><div class="sidebar-section-children"><a href="TouchNavigation.html">TouchNavigation</a></div><div class="sidebar-section-children"><a href="Vec2.html">Vec2</a></div><div class="sidebar-section-children"><a href="Vec3.html">Vec3</a></div><div class="sidebar-section-children"><a href="Vec4.html">Vec4</a></div><div class="sidebar-section-children"><a href="Vector.html">Vector</a></div><div class="sidebar-section-children"><a href="VisibleExtent.html">VisibleExtent</a></div><div class="sidebar-section-children"><a href="WMS.html">WMS</a></div><div class="sidebar-section-children"><a href="XYZ.html">XYZ</a></div><div class="sidebar-section-children"><a href="ZoomControl.html">ZoomControl</a></div><div class="sidebar-section-children"><a href="-__resizeTimeout.html">__resizeTimeout</a></div><div class="sidebar-section-children"><a href="module-og_Globe-Globe.html">Globe</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="bqi4O_gtULbCmqFqByt7P"><div>Events</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="og.Camera.html#event:moveend">moveend</a></div><div class="sidebar-section-children"><a href="og.Camera.html#event:viewchange">viewchange</a></div><div class="sidebar-section-children"><a href="og.EntityCollection.html#event:add">add</a></div><div class="sidebar-section-children"><a href="og.EntityCollection.html#event:doubletouch">doubletouch</a></div><div class="sidebar-section-children"><a href="og.EntityCollection.html#event:draw">draw</a></div><div class="sidebar-section-children"><a href="og.EntityCollection.html#event:drawend">drawend</a></div><div class="sidebar-section-children"><a href="og.EntityCollection.html#event:entityadd">entityadd</a></div><div class="sidebar-section-children"><a href="og.EntityCollection.html#event:entitymove">entitymove</a></div><div class="sidebar-section-children"><a href="og.EntityCollection.html#event:entityremove">entityremove</a></div><div class="sidebar-section-children"><a href="og.EntityCollection.html#event:lclick">lclick</a></div><div class="sidebar-section-children"><a href="og.EntityCollection.html#event:ldblclick">ldblclick</a></div><div class="sidebar-section-children"><a href="og.EntityCollection.html#event:ldown">ldown</a></div><div class="sidebar-section-children"><a href="og.EntityCollection.html#event:lhold">lhold</a></div><div class="sidebar-section-children"><a href="og.EntityCollection.html#event:lup">lup</a></div><div class="sidebar-section-children"><a href="og.EntityCollection.html#event:mclick">mclick</a></div><div class="sidebar-section-children"><a href="og.EntityCollection.html#event:mdblclick">mdblclick</a></div><div class="sidebar-section-children"><a href="og.EntityCollection.html#event:mdown">mdown</a></div><div class="sidebar-section-children"><a href="og.EntityCollection.html#event:mhold">mhold</a></div><div class="sidebar-section-children"><a href="og.EntityCollection.html#event:mouseenter">mouseenter</a></div><div class="sidebar-section-children"><a href="og.EntityCollection.html#event:mouseleave">mouseleave</a></div><div class="sidebar-section-children"><a href="og.EntityCollection.html#event:mousemove">mousemove</a></div><div class="sidebar-section-children"><a href="og.EntityCollection.html#event:mousewheel">mousewheel</a></div><div class="sidebar-section-children"><a href="og.EntityCollection.html#event:mup">mup</a></div><div class="sidebar-section-children"><a href="og.EntityCollection.html#event:rclick">rclick</a></div><div class="sidebar-section-children"><a href="og.EntityCollection.html#event:rdblclick">rdblclick</a></div><div class="sidebar-section-children"><a href="og.EntityCollection.html#event:rdown">rdown</a></div><div class="sidebar-section-children"><a href="og.EntityCollection.html#event:remove">remove</a></div><div class="sidebar-section-children"><a href="og.EntityCollection.html#event:rhold">rhold</a></div><div class="sidebar-section-children"><a href="og.EntityCollection.html#event:rup">rup</a></div><div class="sidebar-section-children"><a href="og.EntityCollection.html#event:touchend">touchend</a></div><div class="sidebar-section-children"><a href="og.EntityCollection.html#event:touchenter">touchenter</a></div><div class="sidebar-section-children"><a href="og.EntityCollection.html#event:touchleave">touchleave</a></div><div class="sidebar-section-children"><a href="og.EntityCollection.html#event:touchmove">touchmove</a></div><div class="sidebar-section-children"><a href="og.EntityCollection.html#event:touchstart">touchstart</a></div><div class="sidebar-section-children"><a href="og.EntityCollection.html#event:visibilitychange">visibilitychange</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:add">add</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:doubletouch">doubletouch</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:lclick">lclick</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:ldblclick">ldblclick</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:ldown">ldown</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:lhold">lhold</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:lup">lup</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:mclick">mclick</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:mdblclick">mdblclick</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:mdown">mdown</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:mhold">mhold</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:mouseenter">mouseenter</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:mouseenter">mouseenter</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:mousemove">mousemove</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:mousewheel">mousewheel</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:mup">mup</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:rclick">rclick</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:rdblclick">rdblclick</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:rdown">rdown</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:remove">remove</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:rhold">rhold</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:rup">rup</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:touchend">touchend</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:touchenter">touchenter</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:touchleave">touchleave</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:touchmove">touchmove</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:touchstart">touchstart</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:visibilitychange">visibilitychange</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:doubletouch">doubletouch</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:draw">draw</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:lclick">lclick</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:ldblclick">ldblclick</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:ldown">ldown</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:lhold">lhold</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:lup">lup</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:mclick">mclick</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:mdblclick">mdblclick</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:mdown">mdown</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:mhold">mhold</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:mouseenter">mouseenter</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:mouseleave">mouseleave</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:mousemove">mousemove</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:mousestop">mousestop</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:mousewheel">mousewheel</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:mup">mup</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:postdraw">postdraw</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:rclick">rclick</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:rdblclick">rdblclick</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:rdown">rdown</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:resize">resize</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:resizeend">resizeend</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:rhold">rhold</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:rup">rup</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:touchcancel">touchcancel</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:touchend">touchend</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:touchenter">touchenter</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:touchleave">touchleave</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:touchmove">touchmove</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:touchstart">touchstart</a></div><div class="sidebar-section-children"><a href="og.layer.BaseGeoImage.html#event:loadend">loadend</a></div><div class="sidebar-section-children"><a href="og.layer.CanvasTiles.html#event:load">load</a></div><div class="sidebar-section-children"><a href="og.layer.CanvasTiles.html#event:loadend">loadend</a></div><div class="sidebar-section-children"><a href="og.layer.Vector.html#event:draw">draw</a></div><div class="sidebar-section-children"><a href="og.layer.Vector.html#event:draw">draw</a></div><div class="sidebar-section-children"><a href="og.layer.Vector.html#event:entityadd">entityadd</a></div><div class="sidebar-section-children"><a href="og.layer.Vector.html#event:entityremove">entityremove</a></div><div class="sidebar-section-children"><a href="og.layer.XYZ.html#event:load">load</a></div><div class="sidebar-section-children"><a href="og.layer.XYZ.html#event:loadend">loadend</a></div><div class="sidebar-section-children"><a href="og.scene.Planet.html#event:baselayerchange">baselayerchange</a></div><div class="sidebar-section-children"><a href="og.scene.Planet.html#event:draw">draw</a></div><div class="sidebar-section-children"><a href="og.scene.Planet.html#event:layeradd">layeradd</a></div><div class="sidebar-section-children"><a href="og.scene.Planet.html#event:layerremove">layerremove</a></div><div class="sidebar-section-children"><a href="og.scene.Planet.html#event:layervisibilitychange">layervisibilitychange</a></div><div class="sidebar-section-children"><a href="og.scene.Planet.html#event:rendercompleted">rendercompleted</a></div><div class="sidebar-section-children"><a href="og.scene.Planet.html#event:terraincompleted">terraincompleted</a></div><div class="sidebar-section-children"><a href="og.scene.Planet.html#event:terraincompleted">terraincompleted</a></div><div class="sidebar-section-children"><a href="og.terrain.GlobusTerrain.html#event:load">load</a></div><div class="sidebar-section-children"><a href="og.terrain.GlobusTerrain.html#event:loadend">loadend</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="2wj5FJ5-h_NVDz9a6qI2i"><div>Global</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="global.html#AU_TO_METERS">AU_TO_METERS</a></div><div class="sidebar-section-children"><a href="global.html#COMSIDE">COMSIDE</a></div><div class="sidebar-section-children"><a href="global.html#DAYS_PER_JULIAN_CENTURY">DAYS_PER_JULIAN_CENTURY</a></div><div class="sidebar-section-children"><a href="global.html#DAYS_PER_JULIAN_YEAR">DAYS_PER_JULIAN_YEAR</a></div><div class="sidebar-section-children"><a href="global.html#DateToTAI">DateToTAI</a></div><div class="sidebar-section-children"><a href="global.html#DateToUTC">DateToUTC</a></div><div class="sidebar-section-children"><a href="global.html#EARTH_GRAVITATIONAL_PARAMETER">EARTH_GRAVITATIONAL_PARAMETER</a></div><div class="sidebar-section-children"><a href="global.html#EVENT_NAMES">EVENT_NAMES</a></div><div class="sidebar-section-children"><a href="global.html#HOURS_PER_DAY">HOURS_PER_DAY</a></div><div class="sidebar-section-children"><a href="global.html#J2000">J2000</a></div><div class="sidebar-section-children"><a href="global.html#J2000_OBLIQUITY">J2000_OBLIQUITY</a></div><div class="sidebar-section-children"><a href="global.html#MAX_NODES">MAX_NODES</a></div><div class="sidebar-section-children"><a href="global.html#METERS_PER_UNIT">METERS_PER_UNIT</a></div><div class="sidebar-section-children"><a href="global.html#MILLISECONDS_PER_DAY">MILLISECONDS_PER_DAY</a></div><div class="sidebar-section-children"><a href="global.html#MILLISECONDS_PER_SECOND">MILLISECONDS_PER_SECOND</a></div><div class="sidebar-section-children"><a href="global.html#MINUTES_PER_DAY">MINUTES_PER_DAY</a></div><div class="sidebar-section-children"><a href="global.html#MINUTES_PER_HOUR">MINUTES_PER_HOUR</a></div><div class="sidebar-section-children"><a href="global.html#MODIFIED_JULIAN_DATE_DIFFERENCE">MODIFIED_JULIAN_DATE_DIFFERENCE</a></div><div class="sidebar-section-children"><a href="global.html#NEIGHBOUR">NEIGHBOUR</a></div><div class="sidebar-section-children"><a href="global.html#NOPSORD">NOPSORD</a></div><div class="sidebar-section-children"><a href="global.html#ONE_BY_HOURS_PER_DAY">ONE_BY_HOURS_PER_DAY</a></div><div class="sidebar-section-children"><a href="global.html#ONE_BY_MILLISECONDS_PER_DAY">ONE_BY_MILLISECONDS_PER_DAY</a></div><div class="sidebar-section-children"><a href="global.html#ONE_BY_MINUTES_PER_DAY">ONE_BY_MINUTES_PER_DAY</a></div><div class="sidebar-section-children"><a href="global.html#ONE_BY_SECONDS_PER_DAY">ONE_BY_SECONDS_PER_DAY</a></div><div class="sidebar-section-children"><a href="global.html#ONE_BY_SECONDS_PER_HOUR">ONE_BY_SECONDS_PER_HOUR</a></div><div class="sidebar-section-children"><a href="global.html#ONE_BY_SECONDS_PER_MINUTE">ONE_BY_SECONDS_PER_MINUTE</a></div><div class="sidebar-section-children"><a href="global.html#OPPART">OPPART</a></div><div class="sidebar-section-children"><a href="global.html#OPSIDE">OPSIDE</a></div><div class="sidebar-section-children"><a href="global.html#PARTOFFSET">PARTOFFSET</a></div><div class="sidebar-section-children"><a href="global.html#PICOSECOND">PICOSECOND</a></div><div class="sidebar-section-children"><a href="global.html#SAFE">SAFE</a></div><div class="sidebar-section-children"><a href="global.html#SECONDS_PER_12_HOURS">SECONDS_PER_12_HOURS</a></div><div class="sidebar-section-children"><a href="global.html#SECONDS_PER_DAY">SECONDS_PER_DAY</a></div><div class="sidebar-section-children"><a href="global.html#SECONDS_PER_HOUR">SECONDS_PER_HOUR</a></div><div class="sidebar-section-children"><a href="global.html#SECONDS_PER_MILLISECOND">SECONDS_PER_MILLISECOND</a></div><div class="sidebar-section-children"><a href="global.html#SECONDS_PER_MINUTE">SECONDS_PER_MINUTE</a></div><div class="sidebar-section-children"><a href="global.html#STR2ALIGN">STR2ALIGN</a></div><div class="sidebar-section-children"><a href="global.html#SUN_GRAVITATIONAL_PARAMETER">SUN_GRAVITATIONAL_PARAMETER</a></div><div class="sidebar-section-children"><a href="global.html#T">T</a></div><div class="sidebar-section-children"><a href="global.html#TAItoDate">TAItoDate</a></div><div class="sidebar-section-children"><a href="global.html#TAItoTDB">TAItoTDB</a></div><div class="sidebar-section-children"><a href="global.html#TAItoUTC">TAItoUTC</a></div><div class="sidebar-section-children"><a href="global.html#TDT_TAI">TDT_TAI</a></div><div class="sidebar-section-children"><a href="global.html#TRACK">TRACK</a></div><div class="sidebar-section-children"><a href="global.html#UTCtoDate">UTCtoDate</a></div><div class="sidebar-section-children"><a href="global.html#UTCtoTAI">UTCtoTAI</a></div><div class="sidebar-section-children"><a href="global.html#Units">Units</a></div><div class="sidebar-section-children"><a href="global.html#_entitiesConstructor">_entitiesConstructor</a></div><div class="sidebar-section-children"><a href="global.html#addDays">addDays</a></div><div class="sidebar-section-children"><a href="global.html#addHours">addHours</a></div><div class="sidebar-section-children"><a href="global.html#addMilliseconds">addMilliseconds</a></div><div class="sidebar-section-children"><a href="global.html#addMinutes">addMinutes</a></div><div class="sidebar-section-children"><a href="global.html#addSeconds">addSeconds</a></div><div class="sidebar-section-children"><a href="global.html#applyCanvasCallback">applyCanvasCallback</a></div><div class="sidebar-section-children"><a href="global.html#daysToSeconds">daysToSeconds</a></div><div class="sidebar-section-children"><a href="global.html#getDayNumber">getDayNumber</a></div><div class="sidebar-section-children"><a href="global.html#getDays">getDays</a></div><div class="sidebar-section-children"><a href="global.html#getHours">getHours</a></div><div class="sidebar-section-children"><a href="global.html#getMilliseconds">getMilliseconds</a></div><div class="sidebar-section-children"><a href="global.html#getMinutes">getMinutes</a></div><div class="sidebar-section-children"><a href="global.html#getSeconds">getSeconds</a></div><div class="sidebar-section-children"><a href="global.html#getSunPosition">getSunPosition</a></div><div class="sidebar-section-children"><a href="global.html#mat3">mat3</a></div><div class="sidebar-section-children"><a href="global.html#mat4">mat4</a></div><div class="sidebar-section-children"><a href="global.html#quat">quat</a></div><div class="sidebar-section-children"><a href="global.html#ray">ray</a></div><div class="sidebar-section-children"><a href="global.html#secondsToDays">secondsToDays</a></div><div class="sidebar-section-children"><a href="global.html#simpleNavigation">simpleNavigation</a></div><div class="sidebar-section-children"><a href="global.html#vec2">vec2</a></div><div class="sidebar-section-children"><a href="global.html#vec3">vec3</a></div><div class="sidebar-section-children"><a href="global.html#vec4">vec4</a></div><div class="sidebar-section-children"><a href="global.html#wgs84">wgs84</a></div></div></div></div></div><div class="navbar-container" id="VuAckcnZhf"><nav class="navbar"><div class="navbar-left-items"></div><div class="navbar-right-items"><div class="navbar-right-item"><button class="icon-button search-button" aria-label="open-search"><svg><use xlink:href="#search-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button theme-toggle" aria-label="toggle-theme"><svg><use class="theme-svg-use" xlink:href="#light-theme-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button font-size" aria-label="change-font-size"><svg><use xlink:href="#font-size-icon"></use></svg></button></div></div><nav></nav></nav></div><div class="toc-container"><div class="toc-content"><span class="bold">On this page</span><div id="eed4d2a0bfd64539bb9df78095dec881"></div></div></div><div class="body-wrapper"><div class="main-content"><div class="main-wrapper"><section id="source-page" class="source-page"><header><h1 id="title" class="has-anchor">segment_Segment.js</h1></header><article><pre class="prettyprint source lang-js"><code>"use strict";

import { Box } from "../bv/Box.js";
import { Sphere } from "../bv/Sphere.js";
import { Extent } from "../Extent.js";
import { Layer } from "../layer/Layer.js";
import { LonLat } from "../LonLat.js";
import { Ray } from "../math/Ray.js";
import { Vec3 } from "../math/Vec3.js";
import * as mercator from "../mercator.js";
import { EPSG3857 } from "../proj/EPSG3857.js";
import { E, N, NOTRENDERING, OPSIDE, S, W } from "../quadTree/quadTree.js";
import * as segmentHelper from "../segment/segmentHelper.js";
import { getMatrixSubArray } from "../utils/shared.js";
import { Slice } from "./Slice.js";

export const TILEGROUP_COMMON = 0;
export const TILEGROUP_NORTH = 1;
export const TILEGROUP_SOUTH = 2;

var _tempHigh = new Vec3();
var _tempLow = new Vec3();

let _v0 = new Vec3(),
    _v1 = new Vec3(),
    _v2 = new Vec3(),
    _v3 = new Vec3();

let _ray = new Ray(),
    _rayEx = new Ray();

window.ELLNORM = false;

const _S = new Array(4);
_S[N] = 0;
_S[E] = 1;
_S[S] = 1;
_S[W] = 0;

const _V = new Array(4);
_V[N] = false;
_V[E] = true;
_V[S] = false;
_V[W] = true;

/**
 * Planet segment Web Mercator tile class that stored and rendered with quad tree.
 * @class
 * @param {quadTree.Node} node - Segment node.
 * @param {Planet} planet - Current planet scene.
 * @param {Number} tileZoom - Zoom index.
 * @param {Extent} extent - Segment extent.
 */
class Segment {
    /**
     * @param {quadTree.Node} node - Segment node.
     * @param {Planet} planet - Current planet scene.
     * @param {number} tileZoom - Zoom index.
     * @param {Extent} extent - Segment extent.
     */
    constructor(node, planet, tileZoom, extent) {
        this.isPole = false;

        this._tileGroup = TILEGROUP_COMMON;

        this._projection = EPSG3857;

        /**
         * Quad tree node of the segment.
         * @type {quadTree.Node}
         */
        this.node = node;

        /**
         * Planet pointer.
         * @type {Planet}
         */
        this.planet = planet;

        /**
         * WebGl handler pointer.
         * @type {Handler}
         */
        this.handler = planet.renderer.handler;

        /**
         * Segment bounding sphere
         * @type {Sphere}
         */
        this.bsphere = new Sphere();

        this._plainRadius = 0;

        /**
         * Segment bounding box.
         * @type {Box}
         */
        this.bbox = new Box();

        this._sw = new Vec3();
        this._nw = new Vec3();
        this._se = new Vec3();
        this._ne = new Vec3();

        this.centerNormal = new Vec3();

        /**
         * Geographical extent.
         * @type {Extent}
         */
        this._extent = extent;

        this._extentLonLat = null;

        /**
         * Vertices grid size.
         * @type {number}
         */
        this.gridSize = planet.terrain.gridSizeByZoom[tileZoom];

        this.fileGridSize = 0;

        /**
         * Tile zoom index.
         * @type {number}
         */
        this.tileZoom = tileZoom;

        /**
         * Horizontal tile index.
         * @type {number}
         */
        this.tileX = 0;

        this.tileXE = 0;

        this.tileXW = 0;

        this.tileYN = 0;

        this.tileYS = 0;

        /**
         * Vertical tile index.
         * @type {number}
         */
        this.tileY = 0;

        this.tileIndex = "";

        this._assignTileIndexes();

        /**
         * Texture materials array.
         * @type {Array.&lt;planetSegment.Material>}
         */
        this.materials = [];

        /**
         * Plain segment vertices was created.
         * @type {boolean}
         */
        this.plainReady = false;

        /**
         * Segment is ready to create plain vertices.
         * @type {boolean}
         */
        this.initialized = false;

        /**
         * Normal map is allready made.
         * @type {boolean}
         */
        this.normalMapReady = false;

        /**
         * Terrain is allready applied flag.
         * @type {boolean}
         */
        this.terrainReady = false;

        /**
         * Terrain is loading now flag.
         * @type {boolean}
         */
        this.terrainIsLoading = false;

        /**
         * Terrain existing flag.
         * @type {boolean}
         */
        this.terrainExists = false;

        /**
         * Means that tree passage reach the segment, and the segment terrain is ready.
         * @type {boolean}
         */
        this.passReady = false;

        this.plainVertices = null;
        this.plainVerticesHigh = null;
        this.plainVerticesLow = null;

        this.plainNormals = null;

        this.terrainVertices = null;
        this.terrainVerticesHigh = null;
        this.terrainVerticesLow = null;
        this.noDataVertices = null;

        this.tempVertices = null;
        this.tempVerticesHigh = null;
        this.tempVerticesLow = null;

        this.normalMapTexture = null;
        this.normalMapTextureBias = new Float32Array(3);
        this.normalMapVertices = null;
        this.normalMapVerticesHigh = null;
        this.normalMapVerticesLow = null;
        this.normalMapNormals = null;

        this.vertexNormalBuffer = null;
        this.vertexPositionBuffer = null;
        this.vertexPositionBufferHigh = null;
        this.vertexPositionBufferLow = null;
        this.vertexTextureCoordBuffer = null;

        this._globalTextureCoordinates = new Float32Array(4);
        this._inTheQueue = false;
        this._appliedNeighborsZoom = [0, 0, 0, 0];

        this._slices = [];

        this._indexBuffer = null;

        this.readyToEngage = false;

        this.plainProcessing = false;
    }

    checkZoom() {
        return this.tileZoom &lt; this.planet.terrain._maxNodeZoom;
    }

    /**
     * Returns entity terrain point.
     * @public
     * @param {Entity} entity - Entity.
     * @param {Vec3} res - Point coordinates.
     * @returns {Vec3} -
     */
    getEntityTerrainPoint(entity, res) {
        return this.getTerrainPoint(entity._cartesian, this.getInsideLonLat(entity), res);
    }

    getInsideLonLat(obj) {
        return obj._lonLatMerc;
    }

    isEntityInside(entity) {
        return this._extentLonLat.isInside(entity._lonLat);
    }

    /**
     * Returns distance from object to terrain coordinates and terrain point that calculates out in the res parameter.
     * @public
     * @param {Vec3} xyz - Cartesian object position.
     * @param {LonLat} insideSegmentPosition - Geodetic object position.
     * @param {Vec3} [res] - Result cartesian coordinates on the terrain.
     * @param {Vec3} [normal] - Terrain point normal.
     * @returns {number} -
     */
    getTerrainPoint(xyz, insideSegmentPosition, res) {
        let verts = this.tempVertices;

        if (verts &amp;&amp; verts.length) {
            let norm = this.planet.ellipsoid.getSurfaceNormal3v(xyz);
            _ray.set(xyz, norm.negateTo());

            let ne = this._extent.northEast,
                sw = this._extent.southWest,
                size = Math.sqrt(verts.length / 3) - 1;

            let xmax = ne.lon,
                ymax = ne.lat,
                xmin = sw.lon,
                ymin = sw.lat,
                x = insideSegmentPosition.lon,
                y = insideSegmentPosition.lat;

            let sxn = xmax - xmin,
                syn = ymax - ymin;

            let qx = sxn / size,
                qy = syn / size;

            let xn = x - xmin,
                yn = y - ymin;

            let indX = Math.floor(xn / qx),
                indY = Math.floor(size - yn / qy);

            let ind_v0 = ((size + 1) * indY + indX) * 3;
            let ind_v2 = ((size + 1) * (indY + 1) + indX) * 3;

            _v0.set(verts[ind_v0], verts[ind_v0 + 1], verts[ind_v0 + 2]);
            _v1.set(verts[ind_v0 + 3], verts[ind_v0 + 4], verts[ind_v0 + 5]);
            _v2.set(verts[ind_v2], verts[ind_v2 + 1], verts[ind_v2 + 2]);

            let d = _ray.hitTriangle(_v0, _v1, _v2, res);

            if (d === Ray.INSIDE) {
                return xyz.distance(res);
            } else if (d === Ray.AWAY) {
                _rayEx.set(xyz, norm);
                let d = _rayEx.hitTriangle(_v0, _v1, _v2, res);
                if (d === Ray.INSIDE) {
                    return -xyz.distance(res);
                }
            }

            _v3.set(verts[ind_v2 + 3], verts[ind_v2 + 4], verts[ind_v2 + 5]);

            d = _ray.hitTriangle(_v1, _v3, _v2, res);
            if (d === Ray.INSIDE) {
                return xyz.distance(res);
            } else if (d === Ray.AWAY) {
                _rayEx.set(xyz, norm);
                let d = _rayEx.hitTriangle(_v1, _v3, _v2, res);
                if (d === Ray.INSIDE) {
                    return -xyz.distance(res);
                }
            }

            if (d === Ray.AWAY) {
                return -xyz.distance(res);
            }

            return xyz.distance(res);
        } else {
            return xyz.distance(this.planet.ellipsoid.hitRay(_ray.origin, _ray.direction));
        }
    }

    /**
     * Project wgs86 to segment native projection.
     * @public
     * @param {LonLat} lonlat - Coordinates to project.
     * @returns {LonLat} -
     */
    projectNative(lonlat) {
        return lonlat.forwardMercator();
    }

    /**
     *
     * @param {boolean} forceLoading
     */
    loadTerrain(forceLoading) {
        if (this.tileZoom &lt; this.planet.terrain.minZoom || this.planet.terrain.isEmpty) {
            this.terrainIsLoading = true;

            this.elevationsNotExists();

            if (!this._inTheQueue) {
                this.planet._normalMapCreator.queue(this);
            }
        } else {
            if (this.tileZoom > this.planet.terrain.maxZoom) {
                this.elevationsNotExists();
            } else if (!this.terrainIsLoading &amp;&amp; !this.terrainReady) {
                this.planet.terrain.loadTerrain(this, forceLoading);
            }
            // if (!this.terrainIsLoading &amp;&amp; !this.terrainReady) {
            //     this.planet.terrain.loadTerrain(this, forceLoading);
            // }
        }
    }

    /**
     * Terrain obtained from server.
     * @param {Float32Array} elevations - Elevation data.
     */
    elevationsExists(elevations) {
        if (this.plainReady &amp;&amp; this.terrainIsLoading) {
            this.planet._terrainWorker.make(this, elevations);

            this.plainVerticesHigh = null;
            this.plainVerticesLow = null;

            this.normalMapVerticesHigh = null;
            this.normalMapVerticesLow = null;

            if (!this.planet.terrain.equalizeVertices) {
                this.tempVerticesHigh = null;
                this.tempVerticesLow = null;
            }
        }
    }

    /**
     * Keep plain elevation segment for rendering
     *
     * 'this.tileZoom &lt;= this.planet.terrain.maxZoom' it means, that the segment is plain
     *
     */
    elevationsNotExists() {
        if (this.planet &amp;&amp; this.tileZoom &lt;= this.planet.terrain.maxNativeZoom) {
            if (this.plainReady &amp;&amp; this.terrainIsLoading) {
                this.terrainIsLoading = false;

                let n = this.node;
                n.appliedTerrainNodeId = this.node.nodeId;
                n.equalizedSideWithNodeId[N] = n.equalizedSideWithNodeId[E] = n.equalizedSideWithNodeId[S] =
                    n.equalizedSideWithNodeId[W] = n.appliedTerrainNodeId;

                if (this.planet.lightEnabled &amp;&amp; !this._inTheQueue) {
                    this.planet._normalMapCreator.queue(this);
                }

                this.readyToEngage = true;
            }

            // plain terrain only
            this.terrainVertices = this.plainVertices;
            this.terrainVerticesHigh = this.plainVerticesHigh;
            this.terrainVerticesLow = this.plainVerticesLow;

            this.tempVertices = this.terrainVertices;
            this.tempVerticesHigh = this.terrainVerticesHigh;
            this.tempVerticesLow = this.terrainVerticesLow;

            this.noDataVertices = null;

            this.fileGridSize = Math.sqrt(this.terrainVertices.length / 3) - 1;
            this.gridSize = this.fileGridSize;
            this.terrainReady = true;
            this.terrainExists = false;
        } else {

            if (this.plainReady &amp;&amp; this.terrainIsLoading) {
                this.terrainIsLoading = false;

                let n = this.node;
                n.appliedTerrainNodeId = this.node.nodeId;
                n.equalizedSideWithNodeId[N] = n.equalizedSideWithNodeId[E] = n.equalizedSideWithNodeId[S] =
                    n.equalizedSideWithNodeId[W] = n.appliedTerrainNodeId;

                this.readyToEngage = true;
                this.terrainReady = true;
                this.passReady = true;

                this.terrainExists = false;
            }
        }
    }

    _checkEqualization(neighborSide, neigborNode) {
        return neigborNode &amp;&amp; this.tileZoom >= neigborNode.segment.tileZoom &amp;&amp;
            this.node.equalizedSideWithNodeId[neighborSide] !== neigborNode.equalizedSideWithNodeId[OPSIDE[neighborSide]];
    }

    equalize() {
        if (this.tileZoom &lt; 8 || this.gridSize &lt; 2) {
            return;
        }

        this.readyToEngage = true;
        let nn = this.node.neighbors;
        let v = this.tempVertices,
            vHigh = this.tempVerticesHigh,
            vLow = this.tempVerticesLow;
        let gs = this.gridSize,
            gsOne = gs + 1;

        let n = nn[N][0];
        if (this._checkEqualization(N, n)) {

            this.node.equalizedSideWithNodeId[N] = n.equalizedSideWithNodeId[S];

            this.readyToEngage = true;

            let offset = this.node.getOffsetOppositeNeighbourSide(n, N);

            let nv = n.segment.tempVertices,
                nvHigh = n.segment.tempVerticesHigh,
                nvLow = n.segment.tempVerticesLow;

            let n_gs = n.segment.gridSize,
                n_gsOne = n_gs + 1;

            let dz = 1 / (1 &lt;&lt; (this.tileZoom - n.segment.tileZoom));

            let inc = Math.max(gs / (n_gs * dz), 1),
                n_inc = Math.max((n_gs * dz) / gs, 1),
                n_offset = offset * n_gs;

            for (let k = 0, nk = n_offset; k &lt; gsOne; k += inc, nk += n_inc) {
                const index = k * 3;
                const n_index = (n_gsOne * n_gs + nk) * 3;

                v[index] = nv[n_index];
                v[index + 1] = nv[n_index + 1];
                v[index + 2] = nv[n_index + 2];

                vHigh[index] = nvHigh[n_index];
                vHigh[index + 1] = nvHigh[n_index + 1];
                vHigh[index + 2] = nvHigh[n_index + 2];

                vLow[index] = nvLow[n_index];
                vLow[index + 1] = nvLow[n_index + 1];
                vLow[index + 2] = nvLow[n_index + 2];
            }
        }

        n = nn[E][0];
        if (this._checkEqualization(E, n)) {

            this.node.equalizedSideWithNodeId[E] = n.equalizedSideWithNodeId[W];

            this.readyToEngage = true;

            let offset = this.node.getOffsetOppositeNeighbourSide(n, E);

            let nv = n.segment.tempVertices,
                nvHigh = n.segment.tempVerticesHigh,
                nvLow = n.segment.tempVerticesLow;

            let n_gs = n.segment.gridSize,
                n_gsOne = n_gs + 1;

            let dz = 1 / (1 &lt;&lt; (this.tileZoom - n.segment.tileZoom));

            let inc = Math.max(gs / (n_gs * dz), 1),
                n_inc = Math.max((n_gs * dz) / gs, 1),
                n_offset = offset * n_gs;

            for (let k = 0, nk = n_offset; k &lt; gsOne; k += inc, nk += n_inc) {
                const index = (gsOne * k + gs) * 3;
                const n_index = n_gsOne * nk * 3;

                v[index] = nv[n_index];
                v[index + 1] = nv[n_index + 1];
                v[index + 2] = nv[n_index + 2];

                vHigh[index] = nvHigh[n_index];
                vHigh[index + 1] = nvHigh[n_index + 1];
                vHigh[index + 2] = nvHigh[n_index + 2];

                vLow[index] = nvLow[n_index];
                vLow[index + 1] = nvLow[n_index + 1];
                vLow[index + 2] = nvLow[n_index + 2];
            }
        }

        n = nn[S][0];
        if (this._checkEqualization(S, n)) {

            this.node.equalizedSideWithNodeId[S] = n.equalizedSideWithNodeId[N];

            this.readyToEngage = true;

            let offset = this.node.getOffsetOppositeNeighbourSide(n, S);

            let nv = n.segment.tempVertices,
                nvHigh = n.segment.tempVerticesHigh,
                nvLow = n.segment.tempVerticesLow;

            let n_gs = n.segment.gridSize; // n_gsOne = n_gs + 1;

            let dz = 1 / (1 &lt;&lt; (this.tileZoom - n.segment.tileZoom));

            let inc = Math.max(gs / (n_gs * dz), 1),
                n_inc = Math.max((n_gs * dz) / gs, 1),
                n_offset = offset * n_gs;

            for (let k = 0, nk = n_offset; k &lt; gsOne; k += inc, nk += n_inc) {
                const index = (gsOne * gs + k) * 3;
                const n_index = nk * 3;

                v[index] = nv[n_index];
                v[index + 1] = nv[n_index + 1];
                v[index + 2] = nv[n_index + 2];

                vHigh[index] = nvHigh[n_index];
                vHigh[index + 1] = nvHigh[n_index + 1];
                vHigh[index + 2] = nvHigh[n_index + 2];

                vLow[index] = nvLow[n_index];
                vLow[index + 1] = nvLow[n_index + 1];
                vLow[index + 2] = nvLow[n_index + 2];
            }
        }

        n = nn[W][0];
        if (this._checkEqualization(W, n)) {

            this.node.equalizedSideWithNodeId[W] = n.equalizedSideWithNodeId[E];

            this.readyToEngage = true;

            let offset = this.node.getOffsetOppositeNeighbourSide(n, W);

            let nv = n.segment.tempVertices,
                nvHigh = n.segment.tempVerticesHigh,
                nvLow = n.segment.tempVerticesLow;

            let n_gs = n.segment.gridSize,
                n_gsOne = n_gs + 1;

            let dz = 1 / (1 &lt;&lt; (this.tileZoom - n.segment.tileZoom));

            let inc = Math.max(gs / (n_gs * dz), 1),
                n_inc = Math.max((n_gs * dz) / gs, 1),
                n_offset = offset * n_gs;

            for (let k = 0, nk = n_offset; k &lt; gsOne; k += inc, nk += n_inc) {
                const index = gsOne * k * 3;
                const n_index = (n_gsOne * nk + n_gs) * 3;

                v[index] = nv[n_index];
                v[index + 1] = nv[n_index + 1];
                v[index + 2] = nv[n_index + 2];

                vHigh[index] = nvHigh[n_index];
                vHigh[index + 1] = nvHigh[n_index + 1];
                vHigh[index + 2] = nvHigh[n_index + 2];

                vLow[index] = nvLow[n_index];
                vLow[index + 1] = nvLow[n_index + 1];
                vLow[index + 2] = nvLow[n_index + 2];
            }
        }
    }

    engage() {
        this.readyToEngage = false;
        this.createCoordsBuffers(this.tempVerticesHigh, this.tempVerticesLow, this.gridSize);
    }

    _terrainWorkerCallback(data) {
        if (this.plainReady) {
            this.readyToEngage = true;

            this.normalMapNormals = null;

            this.normalMapVertices = null;
            this.normalMapVerticesHigh = null;
            this.normalMapVerticesLow = null;

            this.terrainVertices = null;
            this.terrainVerticesHigh = null;
            this.terrainVerticesLow = null;
            this.noDataVertices = null;

            this.tempVertices = null;
            this.tempVerticesHigh = null;
            this.tempVerticesLow = null;

            this.normalMapNormals = data.normalMapNormals;
            this.normalMapVertices = data.normalMapVertices;
            this.normalMapVerticesHigh = data.normalMapVerticesHigh;
            this.normalMapVerticesLow = data.normalMapVerticesLow;

            this.terrainVertices = data.terrainVertices;
            this.terrainVerticesHigh = data.terrainVerticesHigh;
            this.terrainVerticesLow = data.terrainVerticesLow;

            this.noDataVertices = data.noDataVertices;

            this.tempVertices = this.terrainVertices;
            this.tempVerticesHigh = this.terrainVerticesHigh;
            this.tempVerticesLow = this.terrainVerticesLow;

            this.setBoundingVolumeArr(data.bounds);

            this.gridSize = Math.sqrt(this.terrainVertices.length / 3) - 1;

            let n = this.node;
            n.appliedTerrainNodeId = n.nodeId;
            n.equalizedSideWithNodeId[N] = n.equalizedSideWithNodeId[E] = n.equalizedSideWithNodeId[S] =
                n.equalizedSideWithNodeId[W] = n.appliedTerrainNodeId;

            this.terrainReady = true;
            this.terrainIsLoading = false;
            this.terrainExists = true;

            if (!this.normalMapTexturePtr) {
                var nmc = this.planet._normalMapCreator;
                this.normalMapTexturePtr = this.planet.renderer.handler.createEmptyTexture_l(
                    nmc._width,
                    nmc._height
                );
            }

            if (this.planet.lightEnabled) {
                this.planet._normalMapCreator.queue(this);
            }
        }
    }

    _normalMapEdgeEqualize(side) {
        let nn = this.node.neighbors;
        let n = nn[side][0];
        let maxZ = this.planet.terrain.maxZoom;

        if (this.tileZoom === maxZ) {
            if (!(nn[0].length || nn[1].length || nn[2].length || nn[3].length)) {
                n = this.node.getEqualNeighbor(side);
            }
        }

        let b = n &amp;&amp; n.segment,
            s = this;

        if (
            n &amp;&amp;
            b &amp;&amp;
            b.terrainReady &amp;&amp;
            b.terrainExists &amp;&amp;
            b.tileZoom &lt;= maxZ &amp;&amp;
            s._appliedNeighborsZoom[side] !== b.tileZoom
        ) {
            s._appliedNeighborsZoom[side] = b.tileZoom;

            let seg_a = s.normalMapNormals,
                seg_b = b.normalMapNormals;

            if (!(seg_a &amp;&amp; seg_b)) return;

            let seg_a_raw = s.normalMapNormals,
                seg_b_raw = b.normalMapNormals;

            // let seg_a_verts = s.terrainVertices,
            //     seg_b_verts = s.terrainVertices;

            let s_gs = Math.sqrt(seg_a.length / 3),
                // b_gs = Math.sqrt(seg_b.length / 3),
                s_gs1 = s_gs - 1;
            // b_gs1 = b_gs - 1;

            const i_a = s_gs1 * _S[side];

            let nx, ny, nz, q;

            if (s.tileZoom === b.tileZoom) {
                const i_b = s_gs1 - i_a;

                if (_V[side]) {
                    for (let k = 0; k &lt; s_gs; k++) {
                        let vInd_a = (k * s_gs + i_a) * 3,
                            vInd_b = (k * s_gs + i_b) * 3;

                        nx = seg_a_raw[vInd_a] + seg_b_raw[vInd_b];
                        ny = seg_a_raw[vInd_a + 1] + seg_b_raw[vInd_b + 1];
                        nz = seg_a_raw[vInd_a + 2] + seg_b_raw[vInd_b + 2];

                        q = 1.0 / Math.sqrt(nx * nx + ny * ny + nz * nz);

                        seg_b[vInd_b] = seg_a[vInd_a] = nx * q;
                        seg_b[vInd_b + 1] = seg_a[vInd_a + 1] = ny * q;
                        seg_b[vInd_b + 2] = seg_a[vInd_a + 2] = nz * q;
                    }
                } else {
                    for (let k = 0; k &lt; s_gs; k++) {
                        let vInd_a = (i_a * s_gs + k) * 3,
                            vInd_b = (i_b * s_gs + k) * 3;

                        nx = seg_a_raw[vInd_a] + seg_b_raw[vInd_b];
                        ny = seg_a_raw[vInd_a + 1] + seg_b_raw[vInd_b + 1];
                        nz = seg_a_raw[vInd_a + 2] + seg_b_raw[vInd_b + 2];

                        q = 1.0 / Math.sqrt(nx * nx + ny * ny + nz * nz);

                        seg_b[vInd_b] = seg_a[vInd_a] = nx * q;
                        seg_b[vInd_b + 1] = seg_a[vInd_a + 1] = ny * q;
                        seg_b[vInd_b + 2] = seg_a[vInd_a + 2] = nz * q;
                    }
                }

                if (!b._inTheQueue &amp;&amp; b._appliedNeighborsZoom[OPSIDE[side]] !== s.tileZoom) {
                    b._appliedNeighborsZoom[OPSIDE[side]] = s.tileZoom;
                    s.planet._normalMapCreator.queue(b);
                }
            }
        }
    }

    applyTerrain(elevations) {
        if (elevations) {
            this.elevationsExists(elevations);
        } else {
            this.elevationsNotExists();
        }
    }

    /**
     * Delete segment gl buffers.
     */
    deleteBuffers() {
        var gl = this.handler.gl;
        gl.deleteBuffer(this.vertexNormalBuffer);
        gl.deleteBuffer(this.vertexPositionBuffer);
        gl.deleteBuffer(this.vertexPositionBufferHigh);
        gl.deleteBuffer(this.vertexPositionBufferLow);

        this.vertexNormalBuffer = null;
        this.vertexPositionBuffer = null;
        this.vertexPositionBufferHigh = null;
        this.vertexPositionBufferLow = null;
        this.vertexTextureCoordBuffer = null;
    }

    /**
     * Delete materials.
     */
    deleteMaterials() {
        var m = this.materials;
        for (var i = 0; i &lt; m.length; i++) {
            var mi = m[i];
            if (mi) {
                mi.clear();
            }
        }
        this.materials.length = 0;
    }

    /**
     * Delete elevation data.
     */
    deleteElevations() {
        this.terrainExists = false;
        this.terrainReady = false;
        this.terrainIsLoading = false;

        this.normalMapVertices = null;
        this.normalMapVerticesHigh = null;
        this.normalMapVerticesLow = null;

        this.normalMapNormals = null;

        this.tempVertices = null;
        this.tempVerticesHigh = null;
        this.tempVerticesLow = null;

        this.terrainVertices = null;
        this.terrainVerticesHigh = null;
        this.terrainVerticesLow = null;
        this.noDataVertices = null;

        this.plainVertices = null;
        this.plainVerticesHigh = null;
        this.plainVerticesLow = null;

        this.plainNormals = null;

        if (this.normalMapReady) {
            this.handler.gl.deleteTexture(this.normalMapTexture);
        }
        this.normalMapReady = false;
        this._appliedNeighborsZoom = [0, 0, 0, 0];
        this.normalMapTextureBias[0] = 0;
        this.normalMapTextureBias[1] = 0;
        this.normalMapTextureBias[2] = 1;
        this._inTheQueue = false;
    }

    /**
     * Clear but not destroy segment data.
     */
    clearSegment() {
        this.plainReady = false;
        this.initialized = false;
        this.deleteBuffers();
        this.deleteMaterials();
        this.deleteElevations();
    }

    /**
     * Clear and destroy all segment data.
     */
    destroySegment() {

        this.clearSegment();

        var i = this._slices.length;
        while (i--) {
            this._slices[i].clear();
        }

        this._slices = null;

        this.node = null;

        this.planet = null;
        this.handler = null;
        this.bbox = null;
        this.bsphere = null;
        this._extent = null;

        this.materials = null;

        this.plainVertices = null;
        this.plainVerticesHigh = null;
        this.plainVerticesLow = null;
        this.plainNormals = null;

        this.terrainVertices = null;
        this.terrainVerticesHigh = null;
        this.terrainVerticesLow = null;
        this.noDataVertices = null;

        this.tempVertices = null;
        this.tempVerticesHigh = null;
        this.tempVerticesLow = null;

        this.normalMapTexture = null;
        this.normalMapTextureBias = null;
        this.normalMapVertices = null;
        this.normalMapVerticesHigh = null;
        this.normalMapVerticesLow = null;
        this.normalMapNormals = null;

        this.vertexNormalBuffer = null;
        this.vertexPositionBuffer = null;
        this.vertexPositionBufferHigh = null;
        this.vertexPositionBufferLow = null;
        this.vertexTextureCoordBuffer = null;

        this._projection = null;
        this._appliedNeighborsZoom = null;

        this._globalTextureCoordinates = null;
    }

    _setExtentLonLat() {
        this._extentLonLat = this._extent.inverseMercator();
    }

    /**
     * Creates bound volumes by segment geographical extent.
     */
    createBoundsByExtent() {
        var ellipsoid = this.planet.ellipsoid,
            extent = this._extentLonLat;

        var coord_sw = ellipsoid.geodeticToCartesian(extent.southWest.lon, extent.southWest.lat);
        var coord_ne = ellipsoid.geodeticToCartesian(extent.northEast.lon, extent.northEast.lat);

        var coord_nw = ellipsoid.geodeticToCartesian(
            extent.southWest.lon,
            extent.northEast.lat
        );
        var coord_se = ellipsoid.geodeticToCartesian(
            extent.northEast.lon,
            extent.southWest.lat
        );

        this._sw.copy(coord_sw);
        this._nw.copy(coord_nw);
        this._ne.copy(coord_ne);
        this._se.copy(coord_se);

        this.setBoundingVolume3v(coord_sw, coord_ne);
    }

    createBoundsByParent() {
        let pn = this.node;

        while (pn.parentNode &amp;&amp; !pn.segment.terrainReady) {
            pn = pn.parentNode;
        }

        let dZ2 = 1 &lt;&lt; (this.tileZoom - pn.segment.tileZoom);

        let offsetX = this.tileX - pn.segment.tileX * dZ2,
            offsetY = this.tileY - pn.segment.tileY * dZ2;

        if (pn.segment.terrainReady &amp;&amp; pn.segment.tileZoom >= this.planet.terrain.minZoom) {
            let gridSize = pn.segment.gridSize / dZ2;

            if (gridSize >= 1.0) {
                //
                // (*) Actually, we get parent whole bounding volume
                //
                this.bsphere.center.x = pn.segment.bsphere.center.x;
                this.bsphere.center.y = pn.segment.bsphere.center.y;
                this.bsphere.center.z = pn.segment.bsphere.center.z;
                this.bsphere.radius = pn.segment.bsphere.radius;

                let i0 = gridSize * offsetY;
                let j0 = gridSize * offsetX;

                let pnGsOne = pn.segment.gridSize + 1;

                let ind_sw = 3 * ((i0 + gridSize) * pnGsOne + j0),
                    ind_nw = 3 * (i0 * pnGsOne + j0),
                    ind_ne = 3 * (i0 * pnGsOne + j0 + gridSize),
                    ind_se = 3 * ((i0 + gridSize) * pnGsOne + j0 + gridSize);

                let pVerts = pn.segment.tempVertices;

                let v_sw = new Vec3(pVerts[ind_sw], pVerts[ind_sw + 1], pVerts[ind_sw + 2]),
                    v_ne = new Vec3(pVerts[ind_ne], pVerts[ind_ne + 1], pVerts[ind_ne + 2]);

                // check for segment zoom
                let v_nw = new Vec3(pVerts[ind_nw], pVerts[ind_nw + 1], pVerts[ind_nw + 2]),
                    v_se = new Vec3(pVerts[ind_se], pVerts[ind_se + 1], pVerts[ind_se + 2]);

                this._sw.copy(v_sw);
                this._nw.copy(v_nw);
                this._ne.copy(v_ne);
                this._se.copy(v_se);

            } else {
                let pseg = pn.segment;

                let i0 = Math.floor(gridSize * offsetY),
                    j0 = Math.floor(gridSize * offsetX);

                let insideSize = 1.0 / gridSize;

                let t_i0 = offsetY - insideSize * i0,
                    t_j0 = offsetX - insideSize * j0;

                let bigOne;
                if (pseg.gridSize === 1) {
                    bigOne = pseg.tempVertices;
                } else {
                    bigOne = getMatrixSubArray(pseg.tempVertices, pseg.gridSize, i0, j0, 1);
                }

                let v_lt = new Vec3(bigOne[0], bigOne[1], bigOne[2]),
                    v_rb = new Vec3(bigOne[9], bigOne[10], bigOne[11]);

                let vn = new Vec3(
                        bigOne[3] - bigOne[0],
                        bigOne[4] - bigOne[1],
                        bigOne[5] - bigOne[2]
                    ),
                    vw = new Vec3(
                        bigOne[6] - bigOne[0],
                        bigOne[7] - bigOne[1],
                        bigOne[8] - bigOne[2]
                    ),
                    ve = new Vec3(
                        bigOne[3] - bigOne[9],
                        bigOne[4] - bigOne[10],
                        bigOne[5] - bigOne[11]
                    ),
                    vs = new Vec3(
                        bigOne[6] - bigOne[9],
                        bigOne[7] - bigOne[10],
                        bigOne[8] - bigOne[11]
                    );

                let vi_y = t_i0,
                    vi_x = t_j0;

                let coords_lt, coords_rb;

                if (vi_y + vi_x &lt; insideSize) {
                    coords_lt = Vec3.add(
                        vn.scaleTo(vi_x / insideSize),
                        vw.scaleTo(vi_y / insideSize)
                    ).addA(v_lt);
                } else {
                    coords_lt = Vec3.add(
                        vs.scaleTo(1 - vi_x / insideSize),
                        ve.scaleTo(1 - vi_y / insideSize)
                    ).addA(v_rb);
                }

                vi_y = t_i0 + 1;
                vi_x = t_j0 + 1;

                if (vi_y + vi_x &lt; insideSize) {
                    coords_rb = Vec3.add(
                        vn.scaleTo(vi_x / insideSize),
                        vw.scaleTo(vi_y / insideSize)
                    ).addA(v_lt);
                } else {
                    coords_rb = Vec3.add(
                        vs.scaleTo(1 - vi_x / insideSize),
                        ve.scaleTo(1 - vi_y / insideSize)
                    ).addA(v_rb);
                }

                this.setBoundingVolume3v(coords_lt, coords_rb);
            }
        } else {
            this.createBoundsByExtent();
        }
    }

    setBoundingSphere(x, y, z, v) {
        this.bsphere.center.x = x;
        this.bsphere.center.y = y;
        this.bsphere.center.z = z;
        this.bsphere.radius = this.bsphere.center.distance(v);
    }

    setBoundingVolume(xmin, ymin, zmin, xmax, ymax, zmax) {
        this.bbox.setFromBoundsArr([xmin, ymin, zmin, xmax, ymax, zmax]);

        let x = xmin + (xmax - xmin) * 0.5,
            y = ymin + (ymax - ymin) * 0.5,
            z = zmin + (zmax - zmin) * 0.5;

        this.bsphere.center.set(x, y, z);
        this.bsphere.radius = this.bsphere.center.distance(new Vec3(xmin, ymin, zmin));
    }

    setBoundingVolume3v(vmin, vmax) {
        this.bbox.setFromBoundsArr([vmin.x, vmin.y, vmin.z, vmax.x, vmax.y, vmax.z]);

        let x = vmin.x + (vmax.x - vmin.x) * 0.5,
            y = vmin.y + (vmax.y - vmin.y) * 0.5,
            z = vmin.z + (vmax.z - vmin.z) * 0.5;

        this.bsphere.center.set(x, y, z);
        this.bsphere.radius = this.bsphere.center.distance(new Vec3(vmin.x, vmin.y, vmin.z));
    }

    setBoundingVolumeArr(bounds) {
        this.bbox.setFromBoundsArr(bounds);

        let x = bounds[0] + (bounds[3] - bounds[0]) * 0.5,
            y = bounds[1] + (bounds[4] - bounds[1]) * 0.5,
            z = bounds[2] + (bounds[5] - bounds[2]) * 0.5;

        this.bsphere.center.set(x, y, z);
        this.bsphere.radius = this.bsphere.center.distance(
            new Vec3(bounds[0], bounds[1], bounds[2])
        );
    }

    createCoordsBuffers(verticesHigh, verticesLow, gridSize) {
        var gsgs = (gridSize + 1) * (gridSize + 1);
        var h = this.handler;

        if (this.vertexPositionBufferHigh &amp;&amp; this.vertexPositionBufferHigh.numItems === gsgs) {
            h.setStreamArrayBuffer(this.vertexPositionBufferHigh, verticesHigh);
            h.setStreamArrayBuffer(this.vertexPositionBufferLow, verticesLow);
        } else {
            h.gl.deleteBuffer(this.vertexPositionBufferHigh);
            h.gl.deleteBuffer(this.vertexPositionBufferLow);

            this.vertexTextureCoordBuffer =
                this.planet._textureCoordsBufferCache[Math.log2(gridSize)];

            //this.vertexPositionBufferHigh = h.createStreamArrayBuffer(3, gsgs);
            //h.setStreamArrayBuffer(this.vertexPositionBufferHigh, verticesHigh);
            //this.vertexPositionBufferLow = h.createStreamArrayBuffer(3, gsgs);
            //h.setStreamArrayBuffer(this.vertexPositionBufferLow, verticesLow);

            // It works, but I'm not sure that it is correct and better use the comment above
            this.vertexPositionBufferHigh = h.createArrayBuffer(verticesHigh, 3, gsgs);
            this.vertexPositionBufferLow = h.createArrayBuffer(verticesLow, 3, gsgs);
        }
    }

    _addViewExtent() {
        var ext = this._extentLonLat;

        var viewExt = this.planet._viewExtent;

        if (ext.southWest.lon &lt; viewExt.southWest.lon) {
            viewExt.southWest.lon = ext.southWest.lon;
        }

        if (ext.northEast.lon > viewExt.northEast.lon) {
            viewExt.northEast.lon = ext.northEast.lon;
        }

        if (ext.southWest.lat &lt; viewExt.southWest.lat) {
            viewExt.southWest.lat = ext.southWest.lat;
        }

        if (ext.northEast.lat > viewExt.northEast.lat) {
            viewExt.northEast.lat = ext.northEast.lat;
        }
    }

    _assignTileIndexes() {

        this._tileGroup = TILEGROUP_COMMON;

        var tileZoom = this.tileZoom;
        var extent = this._extent;
        var pole = mercator.POLE;
        this.tileX = Math.round(
            Math.abs(-pole - extent.southWest.lon) / (extent.northEast.lon - extent.southWest.lon)
        );
        this.tileY = Math.round(
            Math.abs(pole - extent.northEast.lat) / (extent.northEast.lat - extent.southWest.lat)
        );
        var p2 = Math.pow(2, tileZoom);
        this.tileXE = (this.tileX + 1) % p2;
        this.tileXW = (p2 + this.tileX - 1) % p2;

        this.tileYN = this.tileY - 1;
        this.tileYS = this.tileY + 1;

        this.tileIndex = Layer.getTileIndex(this.tileX, this.tileY, tileZoom);
    }

    initialize() {
        var p = this.planet;
        var n = this.node;

        this.gridSize =
            p.terrain.gridSizeByZoom[this.tileZoom] || p.terrain.plainGridSize;

        n.sideSizeLog2[0] = n.sideSizeLog2[1] = n.sideSizeLog2[2] = n.sideSizeLog2[3] =
            Math.log2(this.gridSize);

        if (this.tileZoom &lt;= p.terrain.maxZoom) {
            var nmc = this.planet._normalMapCreator;
            this.normalMapTexturePtr = p.renderer.handler.createEmptyTexture_l(
                nmc._width,
                nmc._height
            );
        }

        this.normalMapTexture = this.planet.transparentTexture;

        this._assignGlobalTextureCoordinates();

        this.initialized = true;
    }

    _assignGlobalTextureCoordinates() {
        var e = this._extent;
        this._globalTextureCoordinates[0] =
            (e.southWest.lon + mercator.POLE) * mercator.ONE_BY_POLE_DOUBLE;
        this._globalTextureCoordinates[1] =
            (mercator.POLE - e.northEast.lat) * mercator.ONE_BY_POLE_DOUBLE;
        this._globalTextureCoordinates[2] =
            (e.northEast.lon + mercator.POLE) * mercator.ONE_BY_POLE_DOUBLE;
        this._globalTextureCoordinates[3] =
            (mercator.POLE - e.southWest.lat) * mercator.ONE_BY_POLE_DOUBLE;
    }

    createPlainSegmentAsync() {
        let p = this.planet,
            t = p.terrain;

        if (t.isReady() &amp;&amp; !this.plainReady &amp;&amp; this.tileZoom &lt;= t.maxZoom) {
            this.plainProcessing = true;
            p._plainSegmentWorker.make(this);
        }
    }

    _plainSegmentWorkerCallback(data) {
        this.plainProcessing = false;

        if (this.initialized &amp;&amp; !this.terrainReady) {
            this.plainReady = true;

            this.plainVertices = data.plainVertices;
            this.plainVerticesHigh = data.plainVerticesHigh;
            this.plainVerticesLow = data.plainVerticesLow;
            this.plainNormals = data.plainNormals;
            this._plainRadius = data.plainRadius;

            this.normalMapNormals = data.normalMapNormals;
            this.normalMapVertices = data.normalMapVertices;
            this.normalMapVerticesHigh = data.normalMapVerticesHigh;
            this.normalMapVerticesLow = data.normalMapVerticesLow;

            //this.terrainVertices = this.plainVertices;
            //this.terrainVerticesHigh = this.plainVerticesHigh;
            //this.terrainVerticesLow = this.plainVerticesLow;

            this.fileGridSize = Math.sqrt(data.normalMapVertices.length / 3) - 1;
        }
    }

    createPlainSegment() {
        this.initialize();
        this._createPlainVertices();
        this.readyToEngage = true;
    }

    _createPlainVertices() {
        var gridSize = this.planet.terrain.gridSizeByZoom[this.tileZoom];

        var e = this._extent,
            fgs = this.planet.terrain.plainGridSize;
        var lonSize = e.getWidth();
        var llStep = lonSize / Math.max(fgs, gridSize);
        var esw_lon = e.southWest.lon,
            ene_lat = e.northEast.lat;
        var dg = Math.max(fgs / gridSize, 1),
            gs = Math.max(fgs, gridSize) + 1;
        var r2 = this.planet.ellipsoid._invRadii2;
        var ind = 0,
            nmInd = 0;
        const gsgs = gs * gs;

        var gridSize3 = (gridSize + 1) * (gridSize + 1) * 3;

        this.plainNormals = new Float32Array(gridSize3);
        this.plainVertices = new Float64Array(gridSize3);
        this.plainVerticesHigh = new Float32Array(gridSize3);
        this.plainVerticesLow = new Float32Array(gridSize3);

        this.normalMapNormals = new Float32Array(gsgs * 3);
        this.normalMapVertices = new Float64Array(gsgs * 3);
        this.normalMapVerticesHigh = new Float32Array(gsgs * 3);
        this.normalMapVerticesLow = new Float32Array(gsgs * 3);

        var verts = this.plainVertices,
            vertsHigh = this.plainVerticesHigh,
            vertsLow = this.plainVerticesLow,
            norms = this.plainNormals,
            nmVerts = this.normalMapVertices,
            nmVertsHigh = this.normalMapVerticesHigh,
            nmVertsLow = this.normalMapVerticesLow,
            nmNorms = this.normalMapNormals;

        for (var k = 0; k &lt; gsgs; k++) {
            var j = k % gs,
                i = ~~(k / gs);

            var v = this.planet.ellipsoid.lonLatToCartesian(
                LonLat.inverseMercator(esw_lon + j * llStep, ene_lat - i * llStep)
            );
            var nx = v.x * r2.x,
                ny = v.y * r2.y,
                nz = v.z * r2.z;
            var l = 1.0 / Math.sqrt(nx * nx + ny * ny + nz * nz);
            var nxl = nx * l,
                nyl = ny * l,
                nzl = nz * l;

            Vec3.doubleToTwoFloats(v, _tempHigh, _tempLow);

            nmVerts[nmInd] = v.x;
            nmVertsHigh[nmInd] = _tempHigh.x;
            nmVertsLow[nmInd] = _tempLow.x;
            nmNorms[nmInd++] = nxl;

            nmVerts[nmInd] = v.y;
            nmVertsHigh[nmInd] = _tempHigh.y;
            nmVertsLow[nmInd] = _tempLow.y;
            nmNorms[nmInd++] = nyl;

            nmVerts[nmInd] = v.z;
            nmVertsHigh[nmInd] = _tempHigh.z;
            nmVertsLow[nmInd] = _tempLow.z;
            nmNorms[nmInd++] = nzl;

            if (i % dg === 0 &amp;&amp; j % dg === 0) {
                verts[ind] = v.x;
                vertsHigh[ind] = _tempHigh.x;
                vertsLow[ind] = _tempLow.x;
                norms[ind++] = nxl;

                verts[ind] = v.y;
                vertsHigh[ind] = _tempHigh.y;
                vertsLow[ind] = _tempLow.y;
                norms[ind++] = nyl;

                verts[ind] = v.z;
                vertsHigh[ind] = _tempHigh.z;
                vertsLow[ind] = _tempLow.z;
                norms[ind++] = nzl;
            }
        }

        this.terrainVertices = verts;
        this.terrainVerticesHigh = vertsHigh;
        this.terrainVerticesLow = vertsLow;

        this.plainReady = true;
    }

    /**
     * Gets specific layer material.
     * @public
     * @param {Layer} layer - Layer object.
     * @returns {planetSegment.Material} - Segment material.
     */
    getMaterialByLayer(layer) {
        return this.materials[layer._id];
    }

    _getLayerExtentOffset(layer) {
        var v0s = layer._extentMerc;
        var v0t = this._extent;
        var sSize_x = v0s.northEast.lon - v0s.southWest.lon;
        var sSize_y = v0s.northEast.lat - v0s.southWest.lat;
        var dV0s_x = (v0t.southWest.lon - v0s.southWest.lon) / sSize_x;
        var dV0s_y = (v0s.northEast.lat - v0t.northEast.lat) / sSize_y;
        var dSize_x = (v0t.northEast.lon - v0t.southWest.lon) / sSize_x;
        var dSize_y = (v0t.northEast.lat - v0t.southWest.lat) / sSize_y;
        return [dV0s_x, dV0s_y, dSize_x, dSize_y];
    }

    screenRendering(sh, layerSlice, sliceIndex, defaultTexture, isOverlay) {
        var gl = this.handler.gl;
        var sha = sh.attributes,
            shu = sh.uniforms;

        var pm = this.materials,
            p = this.planet;

        var currHeight, li;
        if (layerSlice &amp;&amp; layerSlice.length) {
            li = layerSlice[0];
            currHeight = li._height;
        } else {
            currHeight = 0;
        }

        // First always draw whole planet base layer segment with solid texture.
        gl.activeTexture(gl.TEXTURE0 + p.SLICE_SIZE + 2);
        gl.bindTexture(gl.TEXTURE_2D, defaultTexture || this.getDefaultTexture());
        gl.uniform1i(shu.defaultTexture, p.SLICE_SIZE + 2);

        var n = 0,
            i = 0;

        var notEmpty = false;

        var slice = this._slices[sliceIndex];

        if (!slice) {
            slice = this._slices[sliceIndex] = new Slice(this);
        } else {
            //TODO: optimization!!!
            slice.layers = [];
        }

        this._indexBuffer = this._getIndexBuffer();

        while (li) {
            if (
                this.layerOverlap(li) &amp;&amp;
                ((li._fading &amp;&amp; li._fadingOpacity > 0.0) ||
                    ((li.minZoom >= p.minCurrZoom || li.maxZoom >= p.minCurrZoom) &amp;&amp;
                        (li.minZoom &lt;= p.maxCurrZoom || li.maxZoom &lt;= p.maxCurrZoom)))
            ) {
                notEmpty = true;

                var m = pm[li._id];

                if (!m) {
                    m = pm[li._id] = li.createMaterial(this);
                }

                if (!m.isReady) {
                    this.planet._renderCompleted = false;
                    this.planet._terrainReady = false;
                }

                slice.append(li, m);

                p._samplerArr[n] = n;

                gl.activeTexture(gl.TEXTURE0 + n);
                gl.bindTexture(gl.TEXTURE_2D, m.texture || p.transparentTexture);

                n++;
            }
            i++;
            li = layerSlice[i];
        }

        if (notEmpty || !isOverlay) {
            gl.uniform1i(shu.samplerCount, n);
            gl.uniform1f(shu.height, currHeight);
            gl.uniform1iv(shu.samplerArr, p._samplerArr);

            //slice.uniform(gl, shu);

            gl.uniform4fv(shu.tileOffsetArr, slice.tileOffsetArr);
            gl.uniform1fv(shu.layerOpacityArr, slice.layerOpacityArr);
            //gl.uniform4fv(shu.visibleExtentOffsetArr, slice.visibleExtentOffsetArr);

            // bind normalmap texture
            if (p.lightEnabled) {
                gl.activeTexture(gl.TEXTURE0 + p.SLICE_SIZE + 3);
                gl.bindTexture(gl.TEXTURE_2D, this.normalMapTexture || p.transparentTexture);
                gl.uniform1i(shu.uNormalMap, p.SLICE_SIZE + 3);

                gl.uniform3fv(shu.uNormalMapBias, this.normalMapTextureBias);

                // bind segment specular and night material texture coordinates
                gl.uniform4fv(shu.uGlobalTextureCoord, this._globalTextureCoordinates);
            }

            gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexPositionBufferHigh);
            gl.vertexAttribPointer(sha.aVertexPositionHigh, this.vertexPositionBufferHigh.itemSize, gl.FLOAT, false, 0, 0);
            gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexPositionBufferLow);
            gl.vertexAttribPointer(sha.aVertexPositionLow, this.vertexPositionBufferLow.itemSize, gl.FLOAT, false, 0, 0);

            gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexTextureCoordBuffer);
            gl.vertexAttribPointer(sha.aTextureCoord, 2, gl.UNSIGNED_SHORT, true, 0, 0);

            gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this._indexBuffer);
            gl.drawElements(p.drawMode, this._indexBuffer.numItems, gl.UNSIGNED_INT, 0);
        }
    }

    heightPickingRendering(sh, layerSlice) {
        var gl = this.handler.gl;
        var sha = sh.attributes,
            shu = sh.uniforms;

        var pm = this.materials,
            p = this.planet;

        var currHeight;
        if (layerSlice &amp;&amp; layerSlice.length) {
            currHeight = layerSlice[0]._height;
        } else {
            currHeight = 0;
        }

        gl.uniform1f(shu.height, currHeight);

        gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexPositionBufferHigh);
        gl.vertexAttribPointer(sha.aVertexPositionHigh, this.vertexPositionBufferHigh.itemSize, gl.FLOAT, false, 0, 0);

        gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexPositionBufferLow);
        gl.vertexAttribPointer(sha.aVertexPositionLow, this.vertexPositionBufferLow.itemSize, gl.FLOAT, false, 0, 0);

        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this._indexBuffer);
        gl.drawElements(gl.TRIANGLE_STRIP, this._indexBuffer.numItems, gl.UNSIGNED_INT, 0);
    }

    colorPickingRendering(sh, layerSlice, sliceIndex, defaultTexture, isOverlay) {
        var gl = this.handler.gl;
        var sha = sh.attributes,
            shu = sh.uniforms;

        var pm = this.materials,
            p = this.planet;

        var currHeight;
        if (layerSlice &amp;&amp; layerSlice.length) {
            currHeight = layerSlice[0]._height;
        } else {
            currHeight = 0;
        }

        var notEmpty = false;

        var slice = this._slices[sliceIndex];

        let len = slice.layers.length;

        for (let n = 0; n &lt; len; n++) {
            notEmpty = true;

            var li = slice.layers[n];
            var n4 = n * 4;

            p._pickingColorArr[n4] = li._pickingColor.x / 255.0;
            p._pickingColorArr[n4 + 1] = li._pickingColor.y / 255.0;
            p._pickingColorArr[n4 + 2] = li._pickingColor.z / 255.0;
            p._pickingColorArr[n4 + 3] = li._pickingEnabled;

            p._samplerArr[n] = n;
            gl.activeTexture(gl.TEXTURE0 + n);
            gl.bindTexture(gl.TEXTURE_2D, pm[li._id].texture || this.planet.transparentTexture);

            p._pickingMaskArr[n] = n + p.SLICE_SIZE;
            gl.activeTexture(gl.TEXTURE0 + n + p.SLICE_SIZE);
            gl.bindTexture(gl.TEXTURE_2D, pm[li._id].pickingMask || this.planet.transparentTexture);
        }

        if (notEmpty || !isOverlay) {
            gl.uniform1i(shu.samplerCount, len);
            gl.uniform1f(shu.height, currHeight);
            gl.uniform1iv(shu.samplerArr, p._samplerArr);
            gl.uniform1iv(shu.pickingMaskArr, p._pickingMaskArr);
            gl.uniform4fv(shu.pickingColorArr, p._pickingColorArr);

            //slice.uniform(gl, shu);

            gl.uniform4fv(shu.tileOffsetArr, slice.tileOffsetArr);
            gl.uniform1fv(shu.layerOpacityArr, slice.layerOpacityArr);
            //gl.uniform4fv(shu.visibleExtentOffsetArr, slice.visibleExtentOffsetArr);

            gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexPositionBufferHigh);
            gl.vertexAttribPointer(sha.aVertexPositionHigh, this.vertexPositionBufferHigh.itemSize, gl.FLOAT, false, 0, 0);
            gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexPositionBufferLow);
            gl.vertexAttribPointer(sha.aVertexPositionLow, this.vertexPositionBufferLow.itemSize, gl.FLOAT, false, 0, 0);

            gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexTextureCoordBuffer);
            gl.vertexAttribPointer(sha.aTextureCoord, 2, gl.UNSIGNED_SHORT, true, 0, 0);

            gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this._indexBuffer);
            gl.drawElements(gl.TRIANGLE_STRIP, this._indexBuffer.numItems, gl.UNSIGNED_INT, 0);
        }
    }

    depthRendering(sh, layerSlice) {
        var gl = this.handler.gl;
        var sha = sh.attributes,
            shu = sh.uniforms;

        var currHeight;
        if (layerSlice &amp;&amp; layerSlice.length) {
            currHeight = layerSlice[0]._height;
        } else {
            currHeight = 0;
        }

        gl.uniform1f(shu.height, currHeight);

        gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexPositionBufferHigh);
        gl.vertexAttribPointer(sha.aVertexPositionHigh, this.vertexPositionBufferHigh.itemSize, gl.FLOAT, false, 0, 0);

        gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexPositionBufferLow);
        gl.vertexAttribPointer(sha.aVertexPositionLow, this.vertexPositionBufferLow.itemSize, gl.FLOAT, false, 0, 0);

        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this._indexBuffer);
        gl.drawElements(gl.TRIANGLE_STRIP, this._indexBuffer.numItems, gl.UNSIGNED_INT, 0);
    }

    _getIndexBuffer() {
        let s = this.node.sideSizeLog2;
        let cache = this.planet._indexesCache[Math.log2(this.gridSize)][s[0]][s[1]][s[2]][s[3]];
        if (!cache.buffer) {
            let indexes = segmentHelper.getInstance().createSegmentIndexes(Math.log2(this.gridSize), [s[0], s[1], s[2], s[3]]);
            cache.buffer = this.planet.renderer.handler.createElementArrayBuffer(indexes, 1);
            this.planet._indexesCacheToRemoveCounter++;
            indexes = null;
        }
        return cache.buffer;
    }

    _collectVisibleNodes() {
        this.planet._visibleNodes[this.node.nodeId] = this.node;
    }

    layerOverlap(layer) {
        return this._extent.overlaps(layer._extentMerc);
    }

    getDefaultTexture() {
        return this.planet.solidTextureOne;
    }

    getExtentLonLat() {
        return this._extentLonLat;
    }

    getExtentMerc() {
        return this._extent;
    }

    getExtent() {
        return this._extent;
    }

    getNodeState() {
        var vn = this.planet._visibleNodes[this.node.nodeId];
        return (vn &amp;&amp; vn.state) || NOTRENDERING;
    }

    getNeighborSide(b) {
        if (this.tileY === b.tileY) {
            if (this.tileX === b.tileXE) {
                return W;
            } else if (this.tileX === b.tileXW) {
                return E;
            }
        } else if (this.tileX === b.tileX) {
            if (this.tileY === b.tileYS) {
                return N;
            } else if (this.tileY === b.tileYN) {
                return S;
            }
        }

        return -1;
    }
}

export { Segment };</code></pre></article></section></div></div></div><div class="search-container" id="PkfLWpAbet" style="display:none"><div class="wrapper" id="iCxFxjkHbP"><button class="icon-button search-close-button" id="VjLlGakifb" aria-label="close search"><svg><use xlink:href="#close-icon"></use></svg></button><div class="search-box-c"><svg><use xlink:href="#search-icon"></use></svg> <input type="text" id="vpcKVYIppa" class="search-input" placeholder="Search..." autofocus></div><div class="search-result-c" id="fWwVHRuDuN"><span class="search-result-c-text">Type anything to view search result</span></div></div></div><div class="mobile-menu-icon-container"><button class="icon-button" id="mobile-menu" data-isopen="false" aria-label="menu"><svg><use xlink:href="#menu-icon"></use></svg></button></div><div id="mobile-sidebar" class="mobile-sidebar-container"><div class="mobile-sidebar-wrapper"><a href="/" class="sidebar-title sidebar-title-anchor">Openglobus</a><div class="mobile-nav-links"></div><div class="mobile-sidebar-items-c"><div class="sidebar-section-title with-arrow" data-isopen="false" id="8ZQgI2FVTwRHQRn6b4gvT"><div>Modules</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="module-og_Globe.html">og/Globe</a></div><div class="sidebar-section-children"><a href="module-og_math.html">og/math</a></div><div class="sidebar-section-children"><a href="module-og_math_coder.html">og/math/coder</a></div><div class="sidebar-section-children"><a href="module-og_mercator.html">og/mercator</a></div><div class="sidebar-section-children"><a href="module-og_proj_EPSG3857.html">og/proj/EPSG3857</a></div><div class="sidebar-section-children"><a href="module-og_proj_EPSG4326.html">og/proj/EPSG4326</a></div><div class="sidebar-section-children"><a href="module-og_segment_SegmentHelper.html">og/segment/SegmentHelper</a></div><div class="sidebar-section-children"><a href="module-og_utils_earcut.html">og/utils/earcut</a></div><div class="sidebar-section-children"><a href="module-og_utils_shared.html">og/utils/shared</a></div><div class="sidebar-section-children"><a href="module-og_webgl_callbacks.html">og/webgl/callbacks</a></div><div class="sidebar-section-children"><a href="module-og_webgl_types.html">og/webgl/types</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="UPZpnc1JpQ6bEJjRqi6uT"><div>Classes</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="Atmosphere.html">Atmosphere</a></div><div class="sidebar-section-children"><a href="BaseBillboard.html">BaseBillboard</a></div><div class="sidebar-section-children"><a href="BaseGeoImage.html">BaseGeoImage</a></div><div class="sidebar-section-children"><a href="BaseNode.html">BaseNode</a></div><div class="sidebar-section-children"><a href="Billboard.html">Billboard</a></div><div class="sidebar-section-children"><a href="BillboardHandler.html">BillboardHandler</a></div><div class="sidebar-section-children"><a href="Box.html">Box</a></div><div class="sidebar-section-children"><a href="Camera.html">Camera</a></div><div class="sidebar-section-children"><a href="CanvasTiles.html">CanvasTiles</a></div><div class="sidebar-section-children"><a href="Clock.html">Clock</a></div><div class="sidebar-section-children"><a href="CompassButton.html">CompassButton</a></div><div class="sidebar-section-children"><a href="Cons.html">Cons</a></div><div class="sidebar-section-children"><a href="Control.html">Control</a></div><div class="sidebar-section-children"><a href="DebugInfo.html">DebugInfo</a></div><div class="sidebar-section-children"><a href="DrawingControl.html">DrawingControl</a></div><div class="sidebar-section-children"><a href="DrawingSwitcher.html">DrawingSwitcher</a></div><div class="sidebar-section-children"><a href="EarthCoordinates.html">EarthCoordinates</a></div><div class="sidebar-section-children"><a href="Ellipsoid.html">Ellipsoid</a></div><div class="sidebar-section-children"><a href="EmptyTerrain.html">EmptyTerrain</a></div><div class="sidebar-section-children"><a href="Entity.html">Entity</a></div><div class="sidebar-section-children"><a href="EntityCollection.html">EntityCollection</a></div><div class="sidebar-section-children"><a href="Events.html">Events</a></div><div class="sidebar-section-children"><a href="Extent.html">Extent</a></div><div class="sidebar-section-children"><a href="Framebuffer.html">Framebuffer</a></div><div class="sidebar-section-children"><a href="Frustum.html">Frustum</a></div><div class="sidebar-section-children"><a href="GeoImage.html">GeoImage</a></div><div class="sidebar-section-children"><a href="GeoObject.html">GeoObject</a></div><div class="sidebar-section-children"><a href="GeoVideo.html">GeoVideo</a></div><div class="sidebar-section-children"><a href="GlobusTerrain.html">GlobusTerrain</a></div><div class="sidebar-section-children"><a href="Handler.html">Handler</a></div><div class="sidebar-section-children"><a href="ICON_BUTTON_SVG.html">ICON_BUTTON_SVG</a></div><div class="sidebar-section-children"><a href="ImageCanvas.html">ImageCanvas</a></div><div class="sidebar-section-children"><a href="KML.html">KML</a></div><div class="sidebar-section-children"><a href="KeyboardNavigation.html">KeyboardNavigation</a></div><div class="sidebar-section-children"><a href="Label.html">Label</a></div><div class="sidebar-section-children"><a href="LabelHandler.html">LabelHandler</a></div><div class="sidebar-section-children"><a href="Layer.html">Layer</a></div><div class="sidebar-section-children"><a href="LayerAnimation.html">LayerAnimation</a></div><div class="sidebar-section-children"><a href="LayerSwitcher.html">LayerSwitcher</a></div><div class="sidebar-section-children"><a href="LightSource.html">LightSource</a></div><div class="sidebar-section-children"><a href="LonLat.html">LonLat</a></div><div class="sidebar-section-children"><a href="Mat3.html">Mat3</a></div><div class="sidebar-section-children"><a href="Mat4.html">Mat4</a></div><div class="sidebar-section-children"><a href="Material.html">Material</a></div><div class="sidebar-section-children"><a href="MouseNavigation.html">MouseNavigation</a></div><div class="sidebar-section-children"><a href="MouseWheelZoomControl.html">MouseWheelZoomControl</a></div><div class="sidebar-section-children"><a href="Multisample.html">Multisample</a></div><div class="sidebar-section-children"><a href="Node.html">Node</a></div><div class="sidebar-section-children"><a href="Plane.html">Plane</a></div><div class="sidebar-section-children"><a href="Planet.html">Planet</a></div><div class="sidebar-section-children"><a href="PlanetCamera.html">PlanetCamera</a></div><div class="sidebar-section-children"><a href="PointCloud.html">PointCloud</a></div><div class="sidebar-section-children"><a href="Polyline.html">Polyline</a></div><div class="sidebar-section-children"><a href="Program.html">Program</a></div><div class="sidebar-section-children"><a href="ProgramController.html">ProgramController</a></div><div class="sidebar-section-children"><a href="Quat.html">Quat</a></div><div class="sidebar-section-children"><a href="QueueArray.html">QueueArray</a></div><div class="sidebar-section-children"><a href="Ray.html">Ray</a></div><div class="sidebar-section-children"><a href="Ray.html">Ray</a></div><div class="sidebar-section-children"><a href="Rectangle.html">Rectangle</a></div><div class="sidebar-section-children"><a href="RenderNode.html">RenderNode</a></div><div class="sidebar-section-children"><a href="RendererEvents.html">RendererEvents</a></div><div class="sidebar-section-children"><a href="Ruler.html">Ruler</a></div><div class="sidebar-section-children"><a href="RulerSwitcher.html">RulerSwitcher</a></div><div class="sidebar-section-children"><a href="ScaleControl.html">ScaleControl</a></div><div class="sidebar-section-children"><a href="Segment.html">Segment</a></div><div class="sidebar-section-children"><a href="Segment.html">Segment</a></div><div class="sidebar-section-children"><a href="SegmentBoundVisualization.html">SegmentBoundVisualization</a></div><div class="sidebar-section-children"><a href="SegmentLonLat.html">SegmentLonLat</a></div><div class="sidebar-section-children"><a href="Selection.html">Selection</a></div><div class="sidebar-section-children"><a href="ShowFps.html">ShowFps</a></div><div class="sidebar-section-children"><a href="SimpleNavigation.html">SimpleNavigation</a></div><div class="sidebar-section-children"><a href="SimpleSkyBackground.html">SimpleSkyBackground</a></div><div class="sidebar-section-children"><a href="Sphere.html">Sphere</a></div><div class="sidebar-section-children"><a href="Stack.html">Stack</a></div><div class="sidebar-section-children"><a href="Strip.html">Strip</a></div><div class="sidebar-section-children"><a href="Sun.html">Sun</a></div><div class="sidebar-section-children"><a href="TextureAtlas.html">TextureAtlas</a></div><div class="sidebar-section-children"><a href="TextureAtlasNode.html">TextureAtlasNode</a></div><div class="sidebar-section-children"><a href="ToggleWireframe.html">ToggleWireframe</a></div><div class="sidebar-section-children"><a href="TouchNavigation.html">TouchNavigation</a></div><div class="sidebar-section-children"><a href="Vec2.html">Vec2</a></div><div class="sidebar-section-children"><a href="Vec3.html">Vec3</a></div><div class="sidebar-section-children"><a href="Vec4.html">Vec4</a></div><div class="sidebar-section-children"><a href="Vector.html">Vector</a></div><div class="sidebar-section-children"><a href="VisibleExtent.html">VisibleExtent</a></div><div class="sidebar-section-children"><a href="WMS.html">WMS</a></div><div class="sidebar-section-children"><a href="XYZ.html">XYZ</a></div><div class="sidebar-section-children"><a href="ZoomControl.html">ZoomControl</a></div><div class="sidebar-section-children"><a href="-__resizeTimeout.html">__resizeTimeout</a></div><div class="sidebar-section-children"><a href="module-og_Globe-Globe.html">Globe</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="bqi4O_gtULbCmqFqByt7P"><div>Events</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="og.Camera.html#event:moveend">moveend</a></div><div class="sidebar-section-children"><a href="og.Camera.html#event:viewchange">viewchange</a></div><div class="sidebar-section-children"><a href="og.EntityCollection.html#event:add">add</a></div><div class="sidebar-section-children"><a href="og.EntityCollection.html#event:doubletouch">doubletouch</a></div><div class="sidebar-section-children"><a href="og.EntityCollection.html#event:draw">draw</a></div><div class="sidebar-section-children"><a href="og.EntityCollection.html#event:drawend">drawend</a></div><div class="sidebar-section-children"><a href="og.EntityCollection.html#event:entityadd">entityadd</a></div><div class="sidebar-section-children"><a href="og.EntityCollection.html#event:entitymove">entitymove</a></div><div class="sidebar-section-children"><a href="og.EntityCollection.html#event:entityremove">entityremove</a></div><div class="sidebar-section-children"><a href="og.EntityCollection.html#event:lclick">lclick</a></div><div class="sidebar-section-children"><a href="og.EntityCollection.html#event:ldblclick">ldblclick</a></div><div class="sidebar-section-children"><a href="og.EntityCollection.html#event:ldown">ldown</a></div><div class="sidebar-section-children"><a href="og.EntityCollection.html#event:lhold">lhold</a></div><div class="sidebar-section-children"><a href="og.EntityCollection.html#event:lup">lup</a></div><div class="sidebar-section-children"><a href="og.EntityCollection.html#event:mclick">mclick</a></div><div class="sidebar-section-children"><a href="og.EntityCollection.html#event:mdblclick">mdblclick</a></div><div class="sidebar-section-children"><a href="og.EntityCollection.html#event:mdown">mdown</a></div><div class="sidebar-section-children"><a href="og.EntityCollection.html#event:mhold">mhold</a></div><div class="sidebar-section-children"><a href="og.EntityCollection.html#event:mouseenter">mouseenter</a></div><div class="sidebar-section-children"><a href="og.EntityCollection.html#event:mouseleave">mouseleave</a></div><div class="sidebar-section-children"><a href="og.EntityCollection.html#event:mousemove">mousemove</a></div><div class="sidebar-section-children"><a href="og.EntityCollection.html#event:mousewheel">mousewheel</a></div><div class="sidebar-section-children"><a href="og.EntityCollection.html#event:mup">mup</a></div><div class="sidebar-section-children"><a href="og.EntityCollection.html#event:rclick">rclick</a></div><div class="sidebar-section-children"><a href="og.EntityCollection.html#event:rdblclick">rdblclick</a></div><div class="sidebar-section-children"><a href="og.EntityCollection.html#event:rdown">rdown</a></div><div class="sidebar-section-children"><a href="og.EntityCollection.html#event:remove">remove</a></div><div class="sidebar-section-children"><a href="og.EntityCollection.html#event:rhold">rhold</a></div><div class="sidebar-section-children"><a href="og.EntityCollection.html#event:rup">rup</a></div><div class="sidebar-section-children"><a href="og.EntityCollection.html#event:touchend">touchend</a></div><div class="sidebar-section-children"><a href="og.EntityCollection.html#event:touchenter">touchenter</a></div><div class="sidebar-section-children"><a href="og.EntityCollection.html#event:touchleave">touchleave</a></div><div class="sidebar-section-children"><a href="og.EntityCollection.html#event:touchmove">touchmove</a></div><div class="sidebar-section-children"><a href="og.EntityCollection.html#event:touchstart">touchstart</a></div><div class="sidebar-section-children"><a href="og.EntityCollection.html#event:visibilitychange">visibilitychange</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:add">add</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:doubletouch">doubletouch</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:lclick">lclick</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:ldblclick">ldblclick</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:ldown">ldown</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:lhold">lhold</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:lup">lup</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:mclick">mclick</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:mdblclick">mdblclick</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:mdown">mdown</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:mhold">mhold</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:mouseenter">mouseenter</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:mouseenter">mouseenter</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:mousemove">mousemove</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:mousewheel">mousewheel</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:mup">mup</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:rclick">rclick</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:rdblclick">rdblclick</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:rdown">rdown</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:remove">remove</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:rhold">rhold</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:rup">rup</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:touchend">touchend</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:touchenter">touchenter</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:touchleave">touchleave</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:touchmove">touchmove</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:touchstart">touchstart</a></div><div class="sidebar-section-children"><a href="og.Layer.html#event:visibilitychange">visibilitychange</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:doubletouch">doubletouch</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:draw">draw</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:lclick">lclick</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:ldblclick">ldblclick</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:ldown">ldown</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:lhold">lhold</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:lup">lup</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:mclick">mclick</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:mdblclick">mdblclick</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:mdown">mdown</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:mhold">mhold</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:mouseenter">mouseenter</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:mouseleave">mouseleave</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:mousemove">mousemove</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:mousestop">mousestop</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:mousewheel">mousewheel</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:mup">mup</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:postdraw">postdraw</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:rclick">rclick</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:rdblclick">rdblclick</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:rdown">rdown</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:resize">resize</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:resizeend">resizeend</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:rhold">rhold</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:rup">rup</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:touchcancel">touchcancel</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:touchend">touchend</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:touchenter">touchenter</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:touchleave">touchleave</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:touchmove">touchmove</a></div><div class="sidebar-section-children"><a href="og.RendererEvents.html#event:touchstart">touchstart</a></div><div class="sidebar-section-children"><a href="og.layer.BaseGeoImage.html#event:loadend">loadend</a></div><div class="sidebar-section-children"><a href="og.layer.CanvasTiles.html#event:load">load</a></div><div class="sidebar-section-children"><a href="og.layer.CanvasTiles.html#event:loadend">loadend</a></div><div class="sidebar-section-children"><a href="og.layer.Vector.html#event:draw">draw</a></div><div class="sidebar-section-children"><a href="og.layer.Vector.html#event:draw">draw</a></div><div class="sidebar-section-children"><a href="og.layer.Vector.html#event:entityadd">entityadd</a></div><div class="sidebar-section-children"><a href="og.layer.Vector.html#event:entityremove">entityremove</a></div><div class="sidebar-section-children"><a href="og.layer.XYZ.html#event:load">load</a></div><div class="sidebar-section-children"><a href="og.layer.XYZ.html#event:loadend">loadend</a></div><div class="sidebar-section-children"><a href="og.scene.Planet.html#event:baselayerchange">baselayerchange</a></div><div class="sidebar-section-children"><a href="og.scene.Planet.html#event:draw">draw</a></div><div class="sidebar-section-children"><a href="og.scene.Planet.html#event:layeradd">layeradd</a></div><div class="sidebar-section-children"><a href="og.scene.Planet.html#event:layerremove">layerremove</a></div><div class="sidebar-section-children"><a href="og.scene.Planet.html#event:layervisibilitychange">layervisibilitychange</a></div><div class="sidebar-section-children"><a href="og.scene.Planet.html#event:rendercompleted">rendercompleted</a></div><div class="sidebar-section-children"><a href="og.scene.Planet.html#event:terraincompleted">terraincompleted</a></div><div class="sidebar-section-children"><a href="og.scene.Planet.html#event:terraincompleted">terraincompleted</a></div><div class="sidebar-section-children"><a href="og.terrain.GlobusTerrain.html#event:load">load</a></div><div class="sidebar-section-children"><a href="og.terrain.GlobusTerrain.html#event:loadend">loadend</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="2wj5FJ5-h_NVDz9a6qI2i"><div>Global</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="global.html#AU_TO_METERS">AU_TO_METERS</a></div><div class="sidebar-section-children"><a href="global.html#COMSIDE">COMSIDE</a></div><div class="sidebar-section-children"><a href="global.html#DAYS_PER_JULIAN_CENTURY">DAYS_PER_JULIAN_CENTURY</a></div><div class="sidebar-section-children"><a href="global.html#DAYS_PER_JULIAN_YEAR">DAYS_PER_JULIAN_YEAR</a></div><div class="sidebar-section-children"><a href="global.html#DateToTAI">DateToTAI</a></div><div class="sidebar-section-children"><a href="global.html#DateToUTC">DateToUTC</a></div><div class="sidebar-section-children"><a href="global.html#EARTH_GRAVITATIONAL_PARAMETER">EARTH_GRAVITATIONAL_PARAMETER</a></div><div class="sidebar-section-children"><a href="global.html#EVENT_NAMES">EVENT_NAMES</a></div><div class="sidebar-section-children"><a href="global.html#HOURS_PER_DAY">HOURS_PER_DAY</a></div><div class="sidebar-section-children"><a href="global.html#J2000">J2000</a></div><div class="sidebar-section-children"><a href="global.html#J2000_OBLIQUITY">J2000_OBLIQUITY</a></div><div class="sidebar-section-children"><a href="global.html#MAX_NODES">MAX_NODES</a></div><div class="sidebar-section-children"><a href="global.html#METERS_PER_UNIT">METERS_PER_UNIT</a></div><div class="sidebar-section-children"><a href="global.html#MILLISECONDS_PER_DAY">MILLISECONDS_PER_DAY</a></div><div class="sidebar-section-children"><a href="global.html#MILLISECONDS_PER_SECOND">MILLISECONDS_PER_SECOND</a></div><div class="sidebar-section-children"><a href="global.html#MINUTES_PER_DAY">MINUTES_PER_DAY</a></div><div class="sidebar-section-children"><a href="global.html#MINUTES_PER_HOUR">MINUTES_PER_HOUR</a></div><div class="sidebar-section-children"><a href="global.html#MODIFIED_JULIAN_DATE_DIFFERENCE">MODIFIED_JULIAN_DATE_DIFFERENCE</a></div><div class="sidebar-section-children"><a href="global.html#NEIGHBOUR">NEIGHBOUR</a></div><div class="sidebar-section-children"><a href="global.html#NOPSORD">NOPSORD</a></div><div class="sidebar-section-children"><a href="global.html#ONE_BY_HOURS_PER_DAY">ONE_BY_HOURS_PER_DAY</a></div><div class="sidebar-section-children"><a href="global.html#ONE_BY_MILLISECONDS_PER_DAY">ONE_BY_MILLISECONDS_PER_DAY</a></div><div class="sidebar-section-children"><a href="global.html#ONE_BY_MINUTES_PER_DAY">ONE_BY_MINUTES_PER_DAY</a></div><div class="sidebar-section-children"><a href="global.html#ONE_BY_SECONDS_PER_DAY">ONE_BY_SECONDS_PER_DAY</a></div><div class="sidebar-section-children"><a href="global.html#ONE_BY_SECONDS_PER_HOUR">ONE_BY_SECONDS_PER_HOUR</a></div><div class="sidebar-section-children"><a href="global.html#ONE_BY_SECONDS_PER_MINUTE">ONE_BY_SECONDS_PER_MINUTE</a></div><div class="sidebar-section-children"><a href="global.html#OPPART">OPPART</a></div><div class="sidebar-section-children"><a href="global.html#OPSIDE">OPSIDE</a></div><div class="sidebar-section-children"><a href="global.html#PARTOFFSET">PARTOFFSET</a></div><div class="sidebar-section-children"><a href="global.html#PICOSECOND">PICOSECOND</a></div><div class="sidebar-section-children"><a href="global.html#SAFE">SAFE</a></div><div class="sidebar-section-children"><a href="global.html#SECONDS_PER_12_HOURS">SECONDS_PER_12_HOURS</a></div><div class="sidebar-section-children"><a href="global.html#SECONDS_PER_DAY">SECONDS_PER_DAY</a></div><div class="sidebar-section-children"><a href="global.html#SECONDS_PER_HOUR">SECONDS_PER_HOUR</a></div><div class="sidebar-section-children"><a href="global.html#SECONDS_PER_MILLISECOND">SECONDS_PER_MILLISECOND</a></div><div class="sidebar-section-children"><a href="global.html#SECONDS_PER_MINUTE">SECONDS_PER_MINUTE</a></div><div class="sidebar-section-children"><a href="global.html#STR2ALIGN">STR2ALIGN</a></div><div class="sidebar-section-children"><a href="global.html#SUN_GRAVITATIONAL_PARAMETER">SUN_GRAVITATIONAL_PARAMETER</a></div><div class="sidebar-section-children"><a href="global.html#T">T</a></div><div class="sidebar-section-children"><a href="global.html#TAItoDate">TAItoDate</a></div><div class="sidebar-section-children"><a href="global.html#TAItoTDB">TAItoTDB</a></div><div class="sidebar-section-children"><a href="global.html#TAItoUTC">TAItoUTC</a></div><div class="sidebar-section-children"><a href="global.html#TDT_TAI">TDT_TAI</a></div><div class="sidebar-section-children"><a href="global.html#TRACK">TRACK</a></div><div class="sidebar-section-children"><a href="global.html#UTCtoDate">UTCtoDate</a></div><div class="sidebar-section-children"><a href="global.html#UTCtoTAI">UTCtoTAI</a></div><div class="sidebar-section-children"><a href="global.html#Units">Units</a></div><div class="sidebar-section-children"><a href="global.html#_entitiesConstructor">_entitiesConstructor</a></div><div class="sidebar-section-children"><a href="global.html#addDays">addDays</a></div><div class="sidebar-section-children"><a href="global.html#addHours">addHours</a></div><div class="sidebar-section-children"><a href="global.html#addMilliseconds">addMilliseconds</a></div><div class="sidebar-section-children"><a href="global.html#addMinutes">addMinutes</a></div><div class="sidebar-section-children"><a href="global.html#addSeconds">addSeconds</a></div><div class="sidebar-section-children"><a href="global.html#applyCanvasCallback">applyCanvasCallback</a></div><div class="sidebar-section-children"><a href="global.html#daysToSeconds">daysToSeconds</a></div><div class="sidebar-section-children"><a href="global.html#getDayNumber">getDayNumber</a></div><div class="sidebar-section-children"><a href="global.html#getDays">getDays</a></div><div class="sidebar-section-children"><a href="global.html#getHours">getHours</a></div><div class="sidebar-section-children"><a href="global.html#getMilliseconds">getMilliseconds</a></div><div class="sidebar-section-children"><a href="global.html#getMinutes">getMinutes</a></div><div class="sidebar-section-children"><a href="global.html#getSeconds">getSeconds</a></div><div class="sidebar-section-children"><a href="global.html#getSunPosition">getSunPosition</a></div><div class="sidebar-section-children"><a href="global.html#mat3">mat3</a></div><div class="sidebar-section-children"><a href="global.html#mat4">mat4</a></div><div class="sidebar-section-children"><a href="global.html#quat">quat</a></div><div class="sidebar-section-children"><a href="global.html#ray">ray</a></div><div class="sidebar-section-children"><a href="global.html#secondsToDays">secondsToDays</a></div><div class="sidebar-section-children"><a href="global.html#simpleNavigation">simpleNavigation</a></div><div class="sidebar-section-children"><a href="global.html#vec2">vec2</a></div><div class="sidebar-section-children"><a href="global.html#vec3">vec3</a></div><div class="sidebar-section-children"><a href="global.html#vec4">vec4</a></div><div class="sidebar-section-children"><a href="global.html#wgs84">wgs84</a></div></div></div><div class="mobile-navbar-actions"><div class="navbar-right-item"><button class="icon-button search-button" aria-label="open-search"><svg><use xlink:href="#search-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button theme-toggle" aria-label="toggle-theme"><svg><use class="theme-svg-use" xlink:href="#light-theme-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button font-size" aria-label="change-font-size"><svg><use xlink:href="#font-size-icon"></use></svg></button></div></div></div></div><script type="text/javascript" src="scripts/core.min.js"></script><script src="scripts/search.min.js" defer="defer"></script><script src="scripts/third-party/fuse.js" defer="defer"></script><script type="text/javascript">var tocbotInstance=tocbot.init({tocSelector:"#eed4d2a0bfd64539bb9df78095dec881",contentSelector:".main-content",headingSelector:"h1, h2, h3",hasInnerContainers:!0,scrollContainer:".main-content",headingsOffset:130,onClick:bringLinkToView})</script></body></html>